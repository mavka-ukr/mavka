взяти біб інтернет

підключені_клієнти = []

дія обробити_підключення(обслуговувач, клієнт)
  друк("підключення ", клієнт)
кінець

дія обробити_відключення(обслуговувач, клієнт)
  друк("відключення ", клієнт)
  підключені_клієнти := підключені_клієнти.фільтрувати(
    дія(підключений_клієнт): підключений_клієнт != клієнт
  )
кінець

дія обробити_повідомлення(обслуговувач, клієнт, повідомлення)
  перебрати підключені_клієнти як підключений_клієнт
    обслуговувач.надіслати(підключений_клієнт, повідомлення)
  кінець
кінець

обслуговувач = інтернет.створити_обслуговувач("0.0.0.0", 8080)

друк(обслуговувач)

обслуговувач.обробник_підключення = обробити_підключення
обслуговувач.обробник_відключення = обробити_відключення
обслуговувач.обробник_повідомлення = обробити_повідомлення

обслуговувач.запустити(
  дія(помилка)
    якщо помилка
      друк("Помилка запуску обслуговувача: ", помилка)
    інакше
      друк("Обслуговувач запущено!")
    кінець
  кінець
)