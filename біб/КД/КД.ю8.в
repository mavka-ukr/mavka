/* КД 0.5.0 */

секція КД {
  структура Система;

  структура Система {
    дані: невідома_адреса;
    виділити_сиру_памʼять: (система: адреса<Система>, розмір: позитивне) -> памʼять<п8>;
    перевиділити_сиру_памʼять: (система: адреса<Система>, значення: памʼять<п8>, новий_розмір: позитивне) -> памʼять<п8>;
    звільнити_сиру_памʼять: (система: адреса<Система>, значення: невідома_памʼять) -> ніщо;
  }

  дія виділити<Т>(система: адреса<Система>): адреса<Т>;
  дія перевиділити<Т>(система: адреса<Система>, значення: адреса<Т>, кількість: позитивне): памʼять<Т>;
  дія звільнити(система: адреса<Система>, значення: невідома_адреса);
  дія виділити_памʼять<Т>(система: адреса<Система>, кількість: позитивне): памʼять<Т>;
  дія перевиділити_памʼять<Т>(система: адреса<Система>, значення: памʼять<Т>, кількість: позитивне): памʼять<Т>;
  дія звільнити_памʼять(система: адреса<Система>, значення: невідома_памʼять);

  дія виділити<Т>(система: адреса<Система>): адреса<Т> {
    вернути система.виділити_сиру_памʼять(система, Т.розмір) як адреса<Т>;
  }

  дія перевиділити<Т>(система: адреса<Система>, значення: адреса<Т>, кількість: позитивне): памʼять<Т> {
    вернути система.перевиділити_сиру_памʼять(система, значення як невідома_адреса, кількість * Т.розмір) як памʼять<Т>;
  }

  дія звільнити(система: адреса<Система>, значення: невідома_адреса) {
    система.звільнити_сиру_памʼять(система, значення як невідома_памʼять);
  }

  дія виділити_памʼять<Т>(система: адреса<Система>, кількість: позитивне): памʼять<Т> {
    вернути система.виділити_сиру_памʼять(система, кількість * Т.розмір) як памʼять<Т>;
  }

  дія перевиділити_памʼять<Т>(система: адреса<Система>, значення: памʼять<Т>, кількість: позитивне): памʼять<Т> {
    вернути система.перевиділити_сиру_памʼять(система, значення як памʼять<п8>, кількість * Т.розмір) як памʼять<Т>;
  }

  дія звільнити_памʼять(система: адреса<Система>, значення: невідома_памʼять) {
    система.звільнити_сиру_памʼять(система, значення);
  }
}

секція КД {
  секція символи {
    синонім Кінець = 0;
    синонім Початок = 1;
    синонім Передвказівка = 2;
    синонім Розрив = 3;
    синонім Пропуск = 4;
    синонім Хвиляста = 5;
    синонім І = 6;
    синонім Відсоток = 7;
    синонім Секція = 8;
    синонім Мітка = 9;
    синонім Адреса = 10;
    синонім Хрестик_в_кругу = 11;
    синонім Хрестик = 12;
    синонім Гривня = 13;
    синонім Дія = 14;
    синонім Зірочка = 15;
    синонім Нуль = 16;
    синонім Один = 17;
    синонім Два = 18;
    синонім Три = 19;
    синонім Чотири = 20;
    синонім Пʼять = 21;
    синонім Шість = 22;
    синонім Сім = 23;
    синонім Вісім = 24;
    синонім Девʼять = 25;
    синонім Відкрита_фігурна_дужка = 26;
    синонім Закрита_фігурна_дужка = 27;
    синонім Відкрита_квадратна_дужка = 28;
    синонім Закрита_квадратна_дужка = 29;
    синонім Відкрита_дужка = 30;
    синонім Закрита_дужка = 31;
    синонім Менше = 32;
    синонім Більше = 33;
    синонім Вище = 34;
    синонім Нижче = 35;
    синонім Твердий = 36;
    синонім Лапка = 37;
    синонім Дволапка = 38;
    синонім Косолапка = 39;
    синонім Міжкрапка = 40;
    синонім Двокрапка = 41;
    синонім Кома = 42;
    синонім Крапкакома = 43;
    синонім Питання = 44;
    синонім Оклик = 45;
    синонім Крапка = 46;
    синонім Похила = 47;
    синонім Обернена_похила = 48;
    синонім Стояча = 49;
    синонім Риска = 50;
    синонім Гачок = 51;
    синонім Підриска = 52;
    синонім Двориска = 53;
    синонім Велика_буква_Ё = 54;
    синонім Велика_буква_Ъ = 55;
    синонім Велика_буква_Ы = 56;
    синонім Велика_буква_Э = 57;
    синонім Мала_буква_ё = 58;
    синонім Мала_буква_ъ = 59;
    синонім Мала_буква_ы = 60;
    синонім Мала_буква_э = 61;
    синонім Велика_буква_Ґ = 62;
    синонім Мала_буква_ґ = 63;
    синонім Велика_буква_А = 64;
    синонім Велика_буква_Б = 65;
    синонім Велика_буква_В = 66;
    синонім Велика_буква_Г = 67;
    синонім Велика_буква_Д = 68;
    синонім Велика_буква_Е = 69;
    синонім Велика_буква_Є = 70;
    синонім Велика_буква_Ж = 71;
    синонім Велика_буква_З = 72;
    синонім Велика_буква_И = 73;
    синонім Велика_буква_І = 74;
    синонім Велика_буква_Ї = 75;
    синонім Велика_буква_Й = 76;
    синонім Велика_буква_К = 77;
    синонім Велика_буква_Л = 78;
    синонім Велика_буква_М = 79;
    синонім Велика_буква_Н = 80;
    синонім Велика_буква_О = 81;
    синонім Велика_буква_П = 82;
    синонім Велика_буква_Р = 83;
    синонім Велика_буква_С = 84;
    синонім Велика_буква_Т = 85;
    синонім Велика_буква_У = 86;
    синонім Велика_буква_Ф = 87;
    синонім Велика_буква_Х = 88;
    синонім Велика_буква_Ц = 89;
    синонім Велика_буква_Ч = 90;
    синонім Велика_буква_Ш = 91;
    синонім Велика_буква_Щ = 92;
    синонім Велика_буква_Ь = 93;
    синонім Велика_буква_Ю = 94;
    синонім Велика_буква_Я = 95;
    синонім Мала_буква_а = 96;
    синонім Мала_буква_б = 97;
    синонім Мала_буква_в = 98;
    синонім Мала_буква_г = 99;
    синонім Мала_буква_д = 100;
    синонім Мала_буква_е = 101;
    синонім Мала_буква_є = 102;
    синонім Мала_буква_ж = 103;
    синонім Мала_буква_з = 104;
    синонім Мала_буква_и = 105;
    синонім Мала_буква_і = 106;
    синонім Мала_буква_ї = 107;
    синонім Мала_буква_й = 108;
    синонім Мала_буква_к = 109;
    синонім Мала_буква_л = 110;
    синонім Мала_буква_м = 111;
    синонім Мала_буква_н = 112;
    синонім Мала_буква_о = 113;
    синонім Мала_буква_п = 114;
    синонім Мала_буква_р = 115;
    синонім Мала_буква_с = 116;
    синонім Мала_буква_т = 117;
    синонім Мала_буква_у = 118;
    синонім Мала_буква_ф = 119;
    синонім Мала_буква_х = 120;
    синонім Мала_буква_ц = 121;
    синонім Мала_буква_ч = 122;
    синонім Мала_буква_ш = 123;
    синонім Мала_буква_щ = 124;
    синонім Мала_буква_ь = 125;
    синонім Мала_буква_ю = 126;
    синонім Мала_буква_я = 127;
  }

  секція відповідні_символи_юнікоду {
    синонім Кінець = 0;
    синонім Початок = 1;
    синонім Передвказівка = 2;
    синонім Розрив = 10;
    синонім Пропуск = 32;
    синонім Хвиляста = 126;
    синонім І = 38;
    синонім Відсоток = 37;
    синонім Секція = 167;
    синонім Мітка = 35;
    синонім Адреса = 64;
    синонім Хрестик_в_кругу = 8853;
    синонім Хрестик = 43;
    синонім Гривня = 8372;
    синонім Дія = 21328;
    синонім Зірочка = 42;
    синонім Нуль = 48;
    синонім Один = 49;
    синонім Два = 50;
    синонім Три = 51;
    синонім Чотири = 52;
    синонім Пʼять = 53;
    синонім Шість = 54;
    синонім Сім = 55;
    синонім Вісім = 56;
    синонім Девʼять = 57;
    синонім Відкрита_фігурна_дужка = 123;
    синонім Закрита_фігурна_дужка = 125;
    синонім Відкрита_квадратна_дужка = 91;
    синонім Закрита_квадратна_дужка = 93;
    синонім Відкрита_дужка = 40;
    синонім Закрита_дужка = 41;
    синонім Менше = 60;
    синонім Більше = 62;
    синонім Вище = 8743;
    синонім Нижче = 8744;
    синонім Твердий = 700;
    синонім Лапка = 39;
    синонім Дволапка = 34;
    синонім Косолапка = 96;
    синонім Міжкрапка = 183;
    синонім Двокрапка = 58;
    синонім Кома = 44;
    синонім Крапкакома = 59;
    синонім Питання = 63;
    синонім Оклик = 33;
    синонім Крапка = 46;
    синонім Похила = 47;
    синонім Обернена_похила = 92;
    синонім Стояча = 124;
    синонім Риска = 45;
    синонім Гачок = 172;
    синонім Підриска = 95;
    синонім Двориска = 61;
    синонім Велика_буква_Ё = 1025;
    синонім Велика_буква_Ъ = 1066;
    синонім Велика_буква_Ы = 1067;
    синонім Велика_буква_Э = 1069;
    синонім Мала_буква_ё = 1105;
    синонім Мала_буква_ъ = 1098;
    синонім Мала_буква_ы = 1099;
    синонім Мала_буква_э = 1101;
    синонім Велика_буква_Ґ = 1168;
    синонім Мала_буква_ґ = 1169;
    синонім Велика_буква_А = 1040;
    синонім Велика_буква_Б = 1041;
    синонім Велика_буква_В = 1042;
    синонім Велика_буква_Г = 1043;
    синонім Велика_буква_Д = 1044;
    синонім Велика_буква_Е = 1045;
    синонім Велика_буква_Є = 1028;
    синонім Велика_буква_Ж = 1046;
    синонім Велика_буква_З = 1047;
    синонім Велика_буква_И = 1048;
    синонім Велика_буква_І = 1030;
    синонім Велика_буква_Ї = 1031;
    синонім Велика_буква_Й = 1049;
    синонім Велика_буква_К = 1050;
    синонім Велика_буква_Л = 1051;
    синонім Велика_буква_М = 1052;
    синонім Велика_буква_Н = 1053;
    синонім Велика_буква_О = 1054;
    синонім Велика_буква_П = 1055;
    синонім Велика_буква_Р = 1056;
    синонім Велика_буква_С = 1057;
    синонім Велика_буква_Т = 1058;
    синонім Велика_буква_У = 1059;
    синонім Велика_буква_Ф = 1060;
    синонім Велика_буква_Х = 1061;
    синонім Велика_буква_Ц = 1062;
    синонім Велика_буква_Ч = 1063;
    синонім Велика_буква_Ш = 1064;
    синонім Велика_буква_Щ = 1065;
    синонім Велика_буква_Ь = 1068;
    синонім Велика_буква_Ю = 1070;
    синонім Велика_буква_Я = 1071;
    синонім Мала_буква_а = 1072;
    синонім Мала_буква_б = 1073;
    синонім Мала_буква_в = 1074;
    синонім Мала_буква_г = 1075;
    синонім Мала_буква_д = 1076;
    синонім Мала_буква_е = 1077;
    синонім Мала_буква_є = 1108;
    синонім Мала_буква_ж = 1078;
    синонім Мала_буква_з = 1079;
    синонім Мала_буква_и = 1080;
    синонім Мала_буква_і = 1110;
    синонім Мала_буква_ї = 1111;
    синонім Мала_буква_й = 1081;
    синонім Мала_буква_к = 1082;
    синонім Мала_буква_л = 1083;
    синонім Мала_буква_м = 1084;
    синонім Мала_буква_н = 1085;
    синонім Мала_буква_о = 1086;
    синонім Мала_буква_п = 1087;
    синонім Мала_буква_р = 1088;
    синонім Мала_буква_с = 1089;
    синонім Мала_буква_т = 1090;
    синонім Мала_буква_у = 1091;
    синонім Мала_буква_ф = 1092;
    синонім Мала_буква_х = 1093;
    синонім Мала_буква_ц = 1094;
    синонім Мала_буква_ч = 1095;
    синонім Мала_буква_ш = 1096;
    синонім Мала_буква_щ = 1097;
    синонім Мала_буква_ь = 1100;
    синонім Мала_буква_ю = 1102;
    синонім Мала_буква_я = 1103;
  }

  структура Місцезнаходження {
    розмір: позитивне;
    дані: памʼять<позитивне>;
    вмісткість: позитивне;
  }

  дія покласти_в_місцезнаходження(система: адреса<Система>, місцезнаходження: адреса<Місцезнаходження>, позиція_місцезнаходження: позитивне) {
    якщо місцезнаходження.розмір == місцезнаходження.вмісткість {
      місцезнаходження.вмісткість += 1;
      місцезнаходження.дані = перевиділити_памʼять<позитивне>(система, місцезнаходження.дані, місцезнаходження.вмісткість);
    }
    місцезнаходження.дані[місцезнаходження.розмір] = позиція_місцезнаходження;
    місцезнаходження.розмір += 1;
  }

  зовнішня дія дізнатись_розмір_символа_т8(перший_байт: п8): п8;
  зовнішня дія дізнатись_розмір_символа_ю8(перший_байт: п8): п8;
  зовнішня дія отримати_символ_т8_з_ю32(символ_Ю32: п32, вихід_першого_байта: адреса<п8>, вихід_другого_байта: адреса<п8>, вихід_третього_байта: адреса<п8>, вихід_четвертого_байта: адреса<п8>, вихід_розміру: адреса<п8>): логічне;
  зовнішня дія отримати_символ_ю8_з_т32(символ_КД: п32, вихід_першого_байта: адреса<п8>, вихід_другого_байта: адреса<п8>, вихід_третього_байта: адреса<п8>, вихід_четвертого_байта: адреса<п8>, вихід_розміру: адреса<п8>): логічне;
  зовнішня дія порахувати_розмір_ю8сі(значення: памʼять<п8>): позитивне;
  зовнішня дія порахувати_розмір_ю32сі(значення: памʼять<п32>): позитивне;
  зовнішня дія порахувати_розмір_т8сі(значення: памʼять<п8>): позитивне;
  зовнішня дія порахувати_розмір_т32сі(значення: памʼять<п32>): позитивне;
  зовнішня дія перевірити_чи_ю8_рівні(а: ю8, б: ю8): логічне;
  зовнішня дія перевірити_чи_ю32_рівні(а: ю32, б: ю32): логічне;
  зовнішня дія перевірити_чи_т8_рівні(а: т8, б: т8): логічне;
  зовнішня дія перевірити_чи_т32_рівні(а: т32, б: т32): логічне;
  зовнішня дія перекодувати_ю8_в_т8(система: адреса<Система>, вхід: ю8, екранувати_невідомі: логічне, з_нульовим_байтом_в_кінці: логічне, вихід: адреса<т8>, вихід_позиції_помилки: адреса<позитивне>): логічне;
  зовнішня дія перекодувати_ю8_в_ю32(система: адреса<Система>, вхід: ю8, з_нульовим_байтом_в_кінці: логічне, вихід: адреса<ю32>, вихід_позиції_помилки: адреса<позитивне>): логічне;
  зовнішня дія перекодувати_ю32_в_ю8(система: адреса<Система>, вхід: ю32, з_нульовим_байтом_в_кінці: логічне, вихід: адреса<ю8>, вихід_позиції_помилки: адреса<позитивне>): логічне;
  зовнішня дія перекодувати_т8_в_ю8(система: адреса<Система>, вхід: т8, з_нульовим_байтом_в_кінці: логічне, вихід: адреса<ю8>, вихід_позиції_помилки: адреса<позитивне>): логічне;
  зовнішня дія перекодувати_ю8_в_т8_з_місцезнаходженнями(система: адреса<Система>, вхід: ю8, екранувати_невідомі: логічне, з_нульовим_байтом_в_кінці: логічне, вихід: адреса<т8>, вихід_місцезнаходжень: адреса<Місцезнаходження>, вихід_позиції_помилки: адреса<позитивне>): логічне;
  зовнішня дія перекодувати_т8_в_ю8_з_місцезнаходженнями(система: адреса<Система>, вхід: т8, з_нульовим_байтом_в_кінці: логічне, вихід: адреса<ю8>, вихід_місцезнаходжень: адреса<Місцезнаходження>, вихід_позиції_помилки: адреса<позитивне>): логічне;

  зовнішня дія обробити_екранізації_в_т8(система: адреса<Система>, вхід: т8, з_нульовим_байтом_в_кінці: логічне, вихід: адреса<т8>): логічне;
  зовнішня дія обробити_екранізації_в_ю8(система: адреса<Система>, вхід: ю8, з_нульовим_байтом_в_кінці: логічне, вихід: адреса<ю8>): логічне;
}