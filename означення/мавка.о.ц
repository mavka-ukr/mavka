/* Мавка 0.123.0 */

простір мавка {
  стала версія = 0;
}

зовнішня дія __надрукувати_ю8(значення: адреса<ю8>) -> ніщо;
зовнішня дія __надрукувати_д64(значення: д64) -> ніщо;

/* Машина Мавки */

простір мавка {
  структура Місцезнаходження;
  структура Притримане;
  структура Притримувач;
  структура КористувацькіДані;
  структура Дійсне;
  структура Послідовність;
  структура Дійсність;
  структура Предмет;
  структура Машина;

  синонім Значення = адреса<Дійсне>;
  синонім ЗначенняАбоСтанПадіння = Значення;

  дія надрукувати_ю8(М: адреса<Машина>, значення: ю8) {
    __надрукувати_ю8(значення::адреса);
  }

  дія надрукувати_д64(М: адреса<Машина>, значення: д64) {
    __надрукувати_д64(значення);
  }

  стала ВПокластиНедійсне = 0; // []() -> [недійсне]
  стала ВПокластиДійсне = 1; // []() -> [дійсне]
  стала ВПокластиПредмет = 2; // []() -> [предмет]
  стала ВПокластиПослідовність = 3; // []() -> [послідовність]
  стала ВПокластиЯ = 4; // []() -> [значення_я]
  стала ВПокластиКонстанту = 5; // [](позиція_константи) -> [константа]
  стала ВСтворитиПослідовність = 6; // [...](кількість_елементів) -> [значення_послідовності]
  стала ВСтворитиДію = 7; // [назва, ..., код](кількість_параметрів) -> [предмет_дії]
  стала ВСтворитиСтруктуру = 8; // [назва, предок, ...](кількість_параметрів) -> [предмет_структури]
  стала ВСтворитиМодуль = 9; // [назва]() -> [предмет_модуля]
  стала ВСтворитиСписок = 10; // [...](кількість_елементів) -> [предмет_списку]
  стала ВСтворитиСловник = 11; // [...](кількість_елементів) -> [предмет_словника]
  стала ВСтворитиДіапазон = 12; // [від, до](включно) -> [предмет_діапазону]
  стала ВЗаписатиМетод = 13; // [значення_власна, предмет_структури, назва, предмет_дії]() -> [предмет_дії]
  // 17-19
  стала ВВизначити = 20; // [назва, значення]() -> []
  стала ВЗвернутись = 21; // [назва]() -> [предмет]
  стала ВЗдійснити = 23; // [предмет_дії, ..., ...](кількість_аргументів, кількість_іменованих_аргументів) -> [результат]
  стала ВОтриматиВластивість = 24; // [предмет, назва]() -> [предмет_властивості]
  стала ВЗмінитиВластивість = 25; // [предмет, назва, значення]() -> []
  стала ВЗдійснитиВластивість = 26; // [предмет, назва, ..., ...](кількість_аргументів, кількість_іменованих_аргументів) -> [результат]
  стала ВОтриматиЕлемент = 28; // [предмет, ключ]() -> [елемент]
  стала ВЗмінитиЕлемент = 29; // [предмет, ключ, значення]() -> []
  стала ВОтриматиПеребір = 30; // [предмет]() -> [предмет_перебору]
  стала ВЗдійснитиЗПредка = 33; //  [назва, ..., ...](кількість_аргументів, кількість_іменованих_аргументів) -> [результат]
  // 37-49
  стала ВДодати = 50; // [а, б]() -> [результат]
  стала ВВідняти = 51; // [а, б]() -> [результат]
  стала ВПомножити = 52; // [а, б]() -> [результат]
  стала ВПоділити = 53; // [а, б]() -> [результат]
  стала ВОтриматиОстачуДілення = 54; // [а, б]() -> [результат]
  стала ВОтриматиНеповнуЧасткуДілення = 55; // [а, б]() -> [результат]
  стала ВПіднестиДоСтепеня = 56; // [а, б]() -> [результат]
  стала ВЗсунутиВліво = 57; // [а, б]() -> [результат]
  стала ВЗсунутиВправо = 58; // [а, б]() -> [результат]
  стала ВЗсунутиВправоЗіЗаповненням = 59; // [а, б]() -> [результат]
  стала ВДвійковеІ = 60; // [а, б]() -> [результат]
  стала ВДвійковеАБО = 61; // [а, б]() -> [результат]
  стала ВДвійковеВиключнеАБО = 62; // [а, б]() -> [результат]
  стала ВДвійковеНЕ = 63; // [а]() -> [результат]
  стала ВМенше = 70; // [а, б]() -> [результат]
  стала ВБільше = 71; // [а, б]() -> [результат]
  стала ВНеБільше = 72; // [а, б]() -> [результат]
  стала ВНеМенше = 73; // [а, б]() -> [результат]
  стала ВРівно = 74; // [а, б]() -> [результат]
  стала ВНеРівно = 75; // [а, б]() -> [результат]
  стала ВМістить = 76; // [а, б]() -> [результат]
  стала ВНеМістить = 77; // [а, б]() -> [результат]
  стала ВЄ = 78; // [а, б]() -> [результат]
  стала ВНеЄ = 79; // [а, б]() -> [результат]
  стала ВВідʼємне = 80; // [а]() -> [результат]
  стала ВЧислове = 81; // [а]() -> [результат]
  стала ВЗаперечити = 82; // [а]() -> [результат]
  // 86-99
  стала ВПочатиСпробу = 100; // [назва](позиція_вказівки_зловити) -> []
  стала ВВпасти = 101; // [предмет_помилки]() -> []
  стала ВЗакінчитиСпробу = 102; // [](позиція_вказівки_виходу) -> []
  стала ВВзяти = 103; // [назва, ...](кількість_назв) -> [предмет_модуля]
  стала ВДати = 104; // [предмет, назва]() -> []
  стала ВПеребратиДалі = 106; // [предмет_перебору]() -> [предмет_перебору, результат_виконання]
  стала ВЗбитиТекст = 107; // [...](кількість_предметів) -> [збитий_текст]
  // 109-129
  стала ВСтворитиПараметр = 133; // [назва, дія_значення]() -> [параметр]
  // 137-199
  стала ВСтрибнути = 200; // [](позиція_вказівки) -> []
  стала ВСтрибнутиЯкщоНі = 201; // [предмет](позиція_вказівки) -> []
  стала ВЗабрати = 202; // [предмет]() -> []
  стала ВВернути = 203; // [предмет]() -> []
  стала ВСтрибнутиЯкщоНіЗалишивши = 204; // [предмет](позиція_вказівки) -> [предмет]
  стала ВСтрибнутиЯкщоТак = 205; // [предмет](позиція_вказівки) -> [предмет]
  стала ВСтрибнутиЯкщоТакЗалишивши = 206; // [предмет](позиція_вказівки) -> [предмет]
  стала ВДублювати = 207; // [предмет]() -> [предмет, предмет]
  стала ВДублюватиПопереднє = 208; // [предмет, предмет2]() -> [предмет, предмет2, предмет]

  структура Місцезнаходження {
    значення: Значення;
    рядок: природне;
  }

  структура Притримане {
    попереднє: адреса<Притримане>;
    наступне: адреса<Притримане>;
    значення: Значення;
  }

  структура Притримувач {
    перше: адреса<Притримане>;
    останнє: адреса<Притримане>;
  }

  структура КористувацькіДані {
    значення: невідома_адреса;
    притримувач: адреса<Притримувач>;
    дія_перед_знищенням: (М: адреса<Машина>, користувацькі_дані: адреса<КористувацькіДані>) -> ніщо;
  }

  структура Дійсне {
    попереднє: Значення;
    позначено: логічне;
    тип: Значення;
    користувацькі_дані: адреса<КористувацькіДані>;
  }

  структура Послідовність {
    попереднє: Значення;
    позначено: логічне;
    тип: Значення;
    користувацькі_дані: адреса<КористувацькіДані>;
    розмір: природне;
    дані: памʼять<Значення>;
  }

  структура Діяч {
    назва: Значення;
    значення: Значення;
  }

  структура Спроба {
    назва_зловити: адреса<Дійсне>;
    позиція_вказівки_зловити: природне;
    розмір_історії_здійснення: природне;
    розмір_накопичувача_значень: природне;
  }

  структура Спроби {
    розмір: природне;
    дані: памʼять<Спроба>;
  }

  структура Дійсність {
    попереднє: Значення;
    позначено: логічне;
    тип: Значення;
    зовні: адреса<Дійсність>;
    здійснювач: Значення;
    кількість_діячів: природне;
    діячі: памʼять<Діяч>;
    спроби: Спроби;
    значення_модуля: Значення;
  }

  структура Властивості {
    розмір: природне;
    ключі: памʼять<Значення>;
    значення: памʼять<Значення>;
    вмісткість: природне;
  }

  структура ВластивостіСтруктури {
    заборонити_наслідування: логічне;
    назва: Значення;
    предок: Значення;
    параметри: адреса<Послідовність>;
  }

  структура ВластивостіКоду {
    константи: адреса<Послідовність>;
    вказівки: Значення; // Дані
  }

  структура ІменованіЗадіяні;

  синонім РіднаДія = (М: адреса<Машина>,
                      здійснювач: Значення,
                      значення: Значення,
                      кількість_задіяних: природне, 
                      задіяні: памʼять<Значення>,
                      іменовано_задіяні: адреса<ІменованіЗадіяні>) -> Значення;

  структура ВластивостіДії {
    рідна: логічне;
    назва: Значення;
    параметри: адреса<Послідовність>;
    код: Значення | РіднаДія;
    дійсність_створення: адреса<Дійсність>;
  }

  структура ВластивостіЧисла {
    значення: д64;
  }

  структура ВластивостіТексту {
    значення: кд;
  }

  структура ВластивостіСписку {
    розмір: природне;
    елементи: памʼять<Значення>;
    вмісткість: природне;
  }

  структура ВластивостіСловника {
    розмір: природне;
    ключі: памʼять<Значення>;
    значення: памʼять<Значення>;
    вмісткість: природне;
  }

  структура ВластивостіДаних {
    розмір: природне;
    дані: памʼять<п8>;
  }

  структура ВластивостіЗміннихДаних {
    розмір: природне;
    дані: памʼять<п8>;
    вмісткість: природне;
  }

  структура ВластивостіПараметра {
    назва: Значення;
  }

  структура Предмет {
    попереднє: Значення;
    позначено: логічне;
    тип: Значення;
    користувацькі_дані: адреса<КористувацькіДані>;
    властивості: Властивості
               | ВластивостіСтруктури
               | ВластивостіКоду
               | ВластивостіДії
               | ВластивостіЧисла
               | ВластивостіТексту
               | ВластивостіСписку
               | ВластивостіСловника
               | ВластивостіДаних
               | ВластивостіЗміннихДаних
               | ВластивостіПараметра;
  }

  структура Налаштування {
    виділити_сиру_памʼять: (М: адреса<Машина>, розмір: природне) -> памʼять<п8>;
    перевиділити_сиру_памʼять: (М: адреса<Машина>, значення: памʼять<п8>, новий_розмір: природне) -> памʼять<п8>;
    звільнити_сиру_памʼять: (М: адреса<Машина>, значення: памʼять<п8>) -> ніщо;
    запанікувати: (М: адреса<Машина>, повідомлення: кд) -> ніщо;
  }

  структура НакопичувачЗначень {
    розмір: природне;
    дані: памʼять<Значення>;
    вмісткість: природне;
  }

  структура Здійснюване {
    здійснювач: Значення;
    дійсність: Значення;
    значення: Значення;
  }

  структура ІсторіяЗдійснення {
    розмір: природне;
    дані: памʼять<Здійснюване>;
    вмісткість: природне;
  }
  
  структура Машина {
    налаштування: Налаштування;
    перше_дійсне: Значення;
    останнє_дійсне: Значення;
    значення_дійсне: Значення;
    значення_послідовність: Значення;
    значення_дійсність: Значення;
    значення_предмет: Значення;
    значення_структура_Структура: Значення;
    значення_структура_Параметр: Значення;
    значення_структура_Число: Значення;
    значення_структура_Текст: Значення;
    значення_структура_Код: Значення;
    значення_структура_Дія: Значення;
    значення_структура_Список: Значення;
    значення_структура_Словник: Значення;
    значення_структура_Дані: Значення;
    значення_структура_ЗмінніДані: Значення;
    глобальна_дійсність: адреса<Дійсність>;
    накопичувач_значень: НакопичувачЗначень;
    історія_здійснення: ІсторіяЗдійснення;
    стан_падіння: логічне;
    значення_падіння: Значення;
    місцезнаходження_падіння: Місцезнаходження;
  }

  дія запанікувати(М: адреса<Машина>, повідомлення: кд) {
    М.налаштування.запанікувати(М, повідомлення);
  }

  дія увімкнути_стан_падіння(М: адреса<Машина>, значення_падіння: Значення, місцезнаходження_падіння: Місцезнаходження) -> ніщо {
    М.стан_падіння = так;
    М.значення_падіння = значення_падіння;
    М.місцезнаходження_падіння = місцезнаходження_падіння;

    змінна предмет_тексту = значення_падіння як адреса<Предмет>;
    змінна властивості_тексту = предмет_тексту.властивості як ВластивостіТексту;

    запанікувати(М, властивості_тексту.значення);
  }

  дія виділити<Т>(М: адреса<Машина>) -> адреса<Т> {
    вернути М.налаштування.виділити_сиру_памʼять(М, Т.розмір) як адреса<Т>;
  }

  дія виділити_памʼять<Т>(М: адреса<Машина>, кількість: природне) -> памʼять<Т> {
    вернути М.налаштування.виділити_сиру_памʼять(М, кількість * Т.розмір) як памʼять<Т>;
  }

  дія перевиділити_памʼять<Т>(М: адреса<Машина>, значення: невідома_памʼять, нова_кількість: природне) -> памʼять<Т> {
    вернути М.налаштування.перевиділити_сиру_памʼять(М, значення як памʼять<п8>, нова_кількість * Т.розмір) як памʼять<Т>;
  }

  дія звільнити(М: адреса<Машина>, значення: невідома_адреса) -> ніщо {
    М.налаштування.звільнити_сиру_памʼять(М, значення як памʼять<п8>);
  }

  дія звільнити_памʼять(М: адреса<Машина>, значення: невідома_памʼять) -> ніщо {
    М.налаштування.звільнити_сиру_памʼять(М, значення як памʼять<п8>);
  }

  дія виділити_дійсне(М: адреса<Машина>) -> Значення {
    змінна дійсне = виділити<Дійсне>(М);
    якщо М.перше_дійсне == пусто {
      М.перше_дійсне = дійсне;
    }
    дійсне.попереднє = М.останнє_дійсне;
    М.останнє_дійсне = дійсне;
    дійсне.позначено = ні;
    дійсне.тип = М.значення_дійсне;
    дійсне.користувацькі_дані = пусто;
    вернути дійсне;
  }

  дія виділити_послідовність(М: адреса<Машина>) -> адреса<Послідовність> {
    змінна послідовність = виділити<Послідовність>(М);
    якщо М.перше_дійсне == пусто {
      М.перше_дійсне = послідовність як Значення;
    }
    послідовність.попереднє = М.останнє_дійсне;
    М.останнє_дійсне = послідовність як Значення;
    послідовність.позначено = ні;
    послідовність.тип = М.значення_дійсне;
    послідовність.користувацькі_дані = пусто;
    послідовність.розмір = 0;
    послідовність.дані = пусто;
    вернути послідовність;
  }

  дія виділити_дійсність(М: адреса<Машина>) -> адреса<Дійсність> {
    змінна дійсність = виділити<Дійсність>(М);
    якщо М.перше_дійсне == пусто {
      М.перше_дійсне = дійсність як Значення;
    }
    дійсність.попереднє = М.останнє_дійсне;
    М.останнє_дійсне = дійсність як Значення;
    дійсність.позначено = ні;
    дійсність.тип = М.значення_дійсне;
    дійсність.зовні = пусто;
    дійсність.здійснювач = пусто;
    вернути дійсність;
  }

  дія виділити_предмет(М: адреса<Машина>, тип: Значення) -> адреса<Предмет> {
    змінна предмет = виділити<Предмет>(М);
    якщо М.перше_дійсне == пусто {
      М.перше_дійсне = предмет як Значення;
    }
    предмет.попереднє = М.останнє_дійсне;
    М.останнє_дійсне = предмет як Значення;
    предмет.позначено = ні;
    предмет.тип = тип;
    предмет.користувацькі_дані = пусто;
    вернути предмет;
  }

  дія створити_послідовність(М: адреса<Машина>, розмір: природне, дані: памʼять<Значення>) -> адреса<Послідовність> {
    змінна копія_даних = виділити_памʼять<Значення>(М, розмір);
    змінна п: природне = 0;
    поки п < розмір {
      копія_даних[п] = дані[п];
      п += 1;
    }
    змінна послідовність = виділити_послідовність(М);
    послідовність.розмір = розмір;
    послідовність.дані = копія_даних;
    вернути послідовність;
  }

  дія створити_послідовність_без_копіювання(М: адреса<Машина>, розмір: природне, дані: памʼять<Значення>) -> адреса<Послідовність> {
    змінна послідовність = виділити_послідовність(М) як адреса<Послідовність>;
    послідовність.розмір = розмір;
    послідовність.дані = дані;
    вернути послідовність;
  }

  дія створити_сиру_послідовність(М: адреса<Машина>, розмір: природне) -> адреса<Послідовність> {
    змінна послідовність = виділити_послідовність(М) як адреса<Послідовність>;
    послідовність.розмір = розмір;
    послідовність.дані = виділити_памʼять<Значення>(М, розмір);
    вернути послідовність;
  }

  дія створити_дійсність(М: адреса<Машина>, зовні: адреса<Дійсність>, здійснювач: Значення) -> адреса<Дійсність> {
    змінна дійсність = виділити_дійсність(М);
    дійсність.зовні = зовні;
    дійсність.здійснювач = здійснювач;
    вернути дійсність;
  }

  дія створити_число(М: адреса<Машина>, значення: д64) -> Значення {
    змінна предмет = виділити_предмет(М, М.значення_структура_Число як Значення);
    предмет.властивості = ВластивостіЧисла { значення };
    вернути предмет як Значення;
  }

  дія створити_текст(М: адреса<Машина>, значення: кд) -> Значення {
    змінна предмет = виділити_предмет(М, М.значення_структура_Текст як Значення);

    змінна копія_тексту = виділити_памʼять<п8>(М, значення.розмір);
    
    змінна п: природне = 0;
    поки п < значення.розмір {
      копія_тексту[п] = значення.дані[п];

      п += 1;
    }
    
    предмет.властивості = ВластивостіТексту { кд { значення.розмір, копія_тексту } };
    вернути предмет як Значення;
  }

  дія створити_структуру(М: адреса<Машина>, 
                        назва: Значення, 
                        предок: Значення, 
                        параметри: адреса<Послідовність>) -> Значення {
    змінна предмет = виділити_предмет(М, М.значення_структура_Структура як Значення);
    предмет.властивості = ВластивостіСтруктури {
      заборонити_наслідування = ні,
      назва = назва,
      предок = предок,
      параметри = параметри
    };
    вернути предмет як Значення;
  }

  дія створити_модуль(М: адреса<Машина>, назва: Значення) -> Значення {
    запанікувати(М, "Створення модуля не втілено.");
  }

  дія створити_дію(М: адреса<Машина>, 
                   дійсність_створення: адреса<Дійсність>,
                   назва: Значення, 
                   параметри: адреса<Послідовність>, 
                   код: Значення) -> Значення {
    змінна предмет = виділити_предмет(М, М.значення_структура_Дія як Значення);
    предмет.властивості = ВластивостіДії {
      рідна = ні,
      назва = назва,
      параметри = параметри,
      код = код,
      дійсність_створення = дійсність_створення
    };
    вернути предмет як Значення;
  }

  дія створити_рідну_дію(М: адреса<Машина>,
                         назва: Значення,
                         параметри: адреса<Послідовність>,
                         рідна_дія: РіднаДія) -> Значення {
    змінна предмет = виділити_предмет(М, М.значення_структура_Дія як Значення);
    предмет.властивості = ВластивостіДії {
      рідна = так,
      назва = назва,
      параметри = параметри,
      код = рідна_дія,
      дійсність_створення = пусто
    };
    вернути предмет як Значення;
  }

  дія створити_дані(М: адреса<Машина>, розмір: природне, дані: памʼять<п8>) -> Значення {
    змінна предмет = виділити_предмет(М, М.значення_структура_Дані як Значення);
    змінна копія_даних = виділити_памʼять<п8>(М, розмір);
    змінна п: природне = 0;
    поки п < розмір {
      копія_даних[п] = дані[п];
      п += 1;
    }
    предмет.властивості = ВластивостіДаних { розмір, копія_даних };
    вернути предмет як Значення;
  }

  дія створити_дані_без_копіювання(М: адреса<Машина>, розмір: природне, дані: памʼять<п8>) -> Значення {
    змінна предмет = виділити_предмет(М, М.значення_структура_Дані як Значення);
    предмет.властивості = ВластивостіДаних { розмір, дані };
    вернути предмет як Значення;
  }

  дія створити_код(М: адреса<Машина>, константи: адреса<Послідовність>, вказівки: Значення) -> Значення {
    змінна предмет = виділити_предмет(М, М.значення_структура_Код як Значення);
    предмет.властивості = ВластивостіКоду { константи, вказівки };
    вернути предмет як Значення;
  }

  дія створити_список_без_копіювання(М: адреса<Машина>, розмір: природне, елементи: памʼять<Значення>) -> Значення {
    змінна предмет = виділити_предмет(М, М.значення_структура_Список як Значення);
    предмет.властивості = ВластивостіСписку { розмір, елементи, розмір };
    вернути предмет як Значення;
  }

  дія створити_словник(М: адреса<Машина>) -> Значення {
    змінна предмет = виділити_предмет(М, М.значення_структура_Словник як Значення);
    предмет.властивості = ВластивостіСловника { 0, пусто, пусто, 0 };
    вернути предмет як Значення;
  }

  дія записати_в_словник(М: адреса<Машина>, словник: Значення, ключ: Значення, значення: Значення) {
    запанікувати(М, "Запис у словник не втілено.");
  }

  дія отримати_діапазон(М: адреса<Машина>, від: Значення, до: Значення, включно: логічне) -> Значення {
    запанікувати(М, "Отримання діапазону не втілено.");
  }

  дія записати_метод_структури(М: адреса<Машина>, значення_власна: Значення, предмет_структури: Значення, назва: Значення, предмет_дії: Значення) {
    запанікувати(М, "Запис методу структури не втілено.");
  }

  дія створити_визначення(М: адреса<Машина>, назва: Значення, значення: Значення) -> Значення {
    запанікувати(М, "Створення визначення не втілено.");
  }

  дія отримати_властивість(М: адреса<Машина>, предмет: Значення, назва: Значення) -> Значення {
    запанікувати(М, "Отримання властивості не втілено.");
  }

  дія змінити_властивість(М: адреса<Машина>, предмет: Значення, назва: Значення, значення: Значення) {
    запанікувати(М, "Зміна властивості не втілено.");
  }

  дія здійснити_властивість(М: адреса<Машина>, предмет: Значення, назва: Значення, кількість_аргументів: природне, аргументи: памʼять<Значення>, іменовано_аргументи: адреса<ІменованіЗадіяні>) -> Значення {
    запанікувати(М, "Здійснення властивості не втілено.");
  }

  дія отримати_елемент(М: адреса<Машина>, предмет: Значення, ключ: Значення) -> Значення {
    запанікувати(М, "Отримання елемента не втілено.");
  }

  дія змінити_елемент(М: адреса<Машина>, предмет: Значення, ключ: Значення, значення: Значення) {
    запанікувати(М, "Зміна елемента не втілено.");
  }

  дія отримати_перебір(М: адреса<Машина>, предмет: Значення) -> Значення {
    запанікувати(М, "Отримання перебору не втілено.");
  }

  дія створити_іменовано_задіяні(М: адреса<Машина>) -> адреса<ІменованіЗадіяні> {
    запанікувати(М, "Створення іменованих задіяних не втілено.");
  }

  дія покласти_іменовано_задіяне(М: адреса<Машина>, назва: Значення, значення: Значення) {
    запанікувати(М, "Покладання іменованого задіяного не втілено.");
  }

  дія покласти_в_накопичувач_значень(М: адреса<Машина>, значення: Значення) {
    якщо М.накопичувач_значень.розмір == М.накопичувач_значень.вмісткість {
      запанікувати(М, "Накопичувач значень заповнено!");
      вернути;
    }

    М.накопичувач_значень.дані[М.накопичувач_значень.розмір] = значення;
    М.накопичувач_значень.розмір += 1;
  }

  дія забрати_з_накопичувача_значень(М: адреса<Машина>) -> Значення {
    якщо М.накопичувач_значень.розмір == 0 {
      запанікувати(М, "Накопичувач значень порожній!");
    }

    М.накопичувач_значень.розмір -= 1;
    вернути М.накопичувач_значень.дані[М.накопичувач_значень.розмір];
  }

  дія взяти_з_накопичувача_значень(М: адреса<Машина>, позиція: природне) -> Значення {
    якщо М.накопичувач_значень.розмір == 0 {
      запанікувати(М, "Накопичувач значень порожній!");
    }

    вернути М.накопичувач_значень.дані[М.накопичувач_значень.розмір - 1 - позиція];
  }

  дія видалити_з_накопичувача_значень(М: адреса<Машина>, кількість: природне) {
    якщо М.накопичувач_значень.розмір == 0 {
      запанікувати(М, "Накопичувач значень порожній!");
    }
    
    М.накопичувач_значень.розмір -= кількість;
  }

  дія отримати_текстове_зображення_значення(М: адреса<Машина>, значення: Значення) -> Значення {
    запанікувати(М, "Отримання текстового зображення значення не втілено.");
  }

  дія перевірити_чи_значення_рівні(М: адреса<Машина>, а: Значення, б: Значення) -> логічне {
    якщо а == б {
      вернути так;
    }

    якщо а == пусто або б == пусто {
      вернути ні;
    }
    
    якщо а.тип == б.тип {
      якщо а.тип == М.значення_структура_Число {
        змінна предмет_числа_а = а як адреса<Предмет>;
        змінна властивості_числа_а = предмет_числа_а.властивості як ВластивостіЧисла;

        змінна предмет_числа_б = б як адреса<Предмет>;
        змінна властивості_числа_б = предмет_числа_б.властивості як ВластивостіЧисла;

        якщо властивості_числа_а.значення == властивості_числа_б.значення {
          вернути так;
        }

        вернути ні;
      }

      якщо а.тип == М.значення_структура_Текст {
        змінна предмет_тексту_а = а як адреса<Предмет>;
        змінна властивості_тексту_а = предмет_тексту_а.властивості як ВластивостіТексту;

        змінна предмет_тексту_б = б як адреса<Предмет>;
        змінна властивості_тексту_б = предмет_тексту_б.властивості як ВластивостіТексту;

        якщо властивості_тексту_а.значення.розмір != властивості_тексту_б.значення.розмір {
          вернути ні;
        }

        змінна п: природне = 0;
        поки п < властивості_тексту_а.значення.розмір {
          якщо властивості_тексту_а.значення.дані[п] != властивості_тексту_б.значення.дані[п] {
            вернути ні;
          }

          п += 1;
        }

        вернути так;
      }
    }
    
    вернути ні;
  }

  дія визначити_діяча(М: адреса<Машина>, дійсність: адреса<Дійсність>, назва: Значення, значення: Значення) {
    змінна знайдений_діяч: адреса<Діяч> = пусто;

    змінна п: природне = 0;
    поки п < дійсність.кількість_діячів {
      змінна діяч = дійсність.діячі[п];

      якщо перевірити_чи_значення_рівні(М, діяч.назва, назва) {
        дійсність.діячі[п].значення = значення;
        
        вернути;
      }

      п += 1;
    }

    дійсність.діячі = перевиділити_памʼять<Діяч>(М, дійсність.діячі, дійсність.кількість_діячів + 1);
    дійсність.діячі[дійсність.кількість_діячів] = Діяч { назва, значення };
    дійсність.кількість_діячів += 1;
  }
  
  дія звернутись_до_діяча(М: адреса<Машина>, дійсність: адреса<Дійсність>, назва: Значення, вихід_значення: адреса<Значення>) -> логічне {
    змінна п: природне = 0;

    поки п < дійсність.кількість_діячів {
      змінна діяч = дійсність.діячі[п];

      якщо перевірити_чи_значення_рівні(М, діяч.назва, назва) {
        вихід_значення::вміст = діяч.значення;
        
        вернути так;
      }

      п += 1;
    }

    якщо дійсність.зовні != пусто {
      вернути звернутись_до_діяча(М, дійсність.зовні, назва, вихід_значення);
    }

    вернути ні;
  }

  дія налаштувати_машину(М: адреса<Машина>, налаштування: Налаштування) {
    М.налаштування = налаштування;
    М.значення_дійсне = виділити_дійсне(М);
    М.значення_дійсне.тип = М.значення_дійсне;
    М.значення_дійсність = виділити_дійсне(М);
    М.значення_послідовність = виділити_дійсне(М);
    М.значення_предмет = виділити_дійсне(М);
    
    змінна значення_структура_Структура = виділити_предмет(М, пусто);
    значення_структура_Структура.тип = М.значення_структура_Структура;
    М.значення_структура_Структура = значення_структура_Структура як Значення;

    змінна значення_структура_Параметр = виділити_предмет(М, М.значення_структура_Структура);
    М.значення_структура_Параметр = значення_структура_Параметр як Значення;

    змінна значення_структура_Число = виділити_предмет(М, М.значення_структура_Структура);
    М.значення_структура_Число = значення_структура_Число як Значення;

    змінна значення_структура_Текст = виділити_предмет(М, М.значення_структура_Структура);
    М.значення_структура_Текст = значення_структура_Текст як Значення;

    змінна значення_структура_Код = виділити_предмет(М, М.значення_структура_Структура);
    М.значення_структура_Код = значення_структура_Код як Значення;

    змінна значення_структура_Дія = виділити_предмет(М, М.значення_структура_Структура);
    М.значення_структура_Дія = значення_структура_Дія як Значення;

    змінна значення_структура_Список = виділити_предмет(М, М.значення_структура_Структура);
    М.значення_структура_Список = значення_структура_Список як Значення;

    змінна значення_структура_Словник = виділити_предмет(М, М.значення_структура_Структура);
    М.значення_структура_Словник = значення_структура_Словник як Значення;

    змінна значення_структура_Дані = виділити_предмет(М, М.значення_структура_Структура);
    М.значення_структура_Дані = значення_структура_Дані як Значення;

    змінна значення_структура_ЗмінніДані = виділити_предмет(М, М.значення_структура_Структура);
    М.значення_структура_ЗмінніДані = значення_структура_ЗмінніДані як Значення;

    значення_структура_Структура.властивості = ВластивостіСтруктури {
      заборонити_наслідування = так,
      назва = створити_текст(М, "Структура"),
      предок = М.значення_предмет,
      параметри = пусто,
    };

    значення_структура_Параметр.властивості = ВластивостіСтруктури {
      заборонити_наслідування = так,
      назва = створити_текст(М, "Параметр"),
      предок = М.значення_предмет,
      параметри = пусто,
    };

    значення_структура_Текст.властивості = ВластивостіСтруктури {
      заборонити_наслідування = так,
      назва = створити_текст(М, "Текст"),
      предок = М.значення_предмет,
      параметри = пусто,
    };

    значення_структура_Число.властивості = ВластивостіСтруктури {
      заборонити_наслідування = так,
      назва = створити_текст(М, "Число"),
      предок = М.значення_предмет,
      параметри = пусто,
    };

    значення_структура_Код.властивості = ВластивостіСтруктури {
      заборонити_наслідування = так,
      назва = створити_текст(М, "Код"),
      предок = М.значення_предмет,
      параметри = пусто,
    };

    значення_структура_Дія.властивості = ВластивостіСтруктури {
      заборонити_наслідування = так,
      назва = створити_текст(М, "Дія"),
      предок = М.значення_предмет,
      параметри = пусто,
    };

    значення_структура_Список.властивості = ВластивостіСтруктури {
      заборонити_наслідування = так,
      назва = створити_текст(М, "Список"),
      предок = М.значення_предмет,
      параметри = пусто,
    };

    значення_структура_Словник.властивості = ВластивостіСтруктури {
      заборонити_наслідування = так,
      назва = створити_текст(М, "Словник"),
      предок = М.значення_предмет,
      параметри = пусто,
    };

    значення_структура_Дані.властивості = ВластивостіСтруктури {
      заборонити_наслідування = так,
      назва = створити_текст(М, "Дані"),
      предок = М.значення_предмет,
      параметри = пусто,
    };

    значення_структура_ЗмінніДані.властивості = ВластивостіСтруктури {
      заборонити_наслідування = так,
      назва = створити_текст(М, "ЗмінніДані"),
      предок = М.значення_предмет,
      параметри = пусто,
    };

    М.глобальна_дійсність = створити_дійсність(М, пусто, пусто);

    стала вмісткість_накопичувача_значень = 1024;
    М.накопичувач_значень = НакопичувачЗначень {
      розмір = 0,
      дані = виділити_памʼять<Значення>(М, вмісткість_накопичувача_значень),
      вмісткість = вмісткість_накопичувача_значень
    };

    стала вмісткість_історії_здійснення = 1024;
    М.історія_здійснення = ІсторіяЗдійснення {
      розмір = 0,
      дані = виділити_памʼять<Здійснюване>(М, вмісткість_історії_здійснення),
      вмісткість = вмісткість_історії_здійснення
    };

    М.стан_падіння = ні;
    М.значення_падіння = пусто;
    М.місцезнаходження_падіння = Місцезнаходження { пусто, 0 };
  }

  дія покласти_спробу(М: адреса<Машина>, спроби: адреса<Спроби>, спроба: Спроба) {
    спроби.дані = перевиділити_памʼять<Спроба>(М, спроби.дані, спроби.розмір + 1);
    спроби.дані[спроби.розмір] = спроба;
    спроби.розмір += 1;
  }

  дія видалити_останню_спробу(М: адреса<Машина>, спроби: адреса<Спроби>) {
    якщо спроби.розмір == 0 {
      запанікувати(М, "Немає спроб для видалення.");
      вернути;
    }

    спроби.розмір -= 1;
  }

  структура НакопичувачТексту {
    розмір: природне;
    дані: памʼять<п8>;
    вмісткість: природне;
  }

  дія зробити_накопичувач_тексту(М: адреса<Машина>, вмісткість: природне) -> НакопичувачТексту {
    змінна дані: памʼять<п8> = пусто;

    якщо вмісткість > 0 {
      дані = виділити_памʼять<п8>(М, вмісткість);
    }
    
    вернути НакопичувачТексту {
      розмір = 0,
      дані = дані,
      вмісткість = вмісткість
    };
  }

  дія покласти_в_накопичувач_тексту(М: адреса<Машина>, накопичувач: адреса<НакопичувачТексту>, значення: кд) {
    змінна новий_розмір = накопичувач.розмір + значення.розмір;

    накопичувач.дані = перевиділити_памʼять<п8>(М, накопичувач.дані, новий_розмір);

    змінна п: природне = 0;
    поки п < значення.розмір {
      накопичувач.дані[накопичувач.розмір + п] = значення.дані[п];
      п += 1;
    }

    накопичувач.розмір = новий_розмір;
  }
  
  місцева дія виконати_додавання(М: адреса<Машина>, 
                                 ліво: Значення, 
                                 право: Значення) -> Значення;
  місцева дія виконати_відімання(М: адреса<Машина>, 
                                 ліво: Значення, 
                                 право: Значення) -> Значення;
  місцева дія виконати_множення(М: адреса<Машина>, 
                                ліво: Значення, 
                                право: Значення) -> Значення;
  місцева дія виконати_ділення(М: адреса<Машина>, 
                               ліво: Значення, 
                               право: Значення) -> Значення;
  місцева дія виконати_остача(М: адреса<Машина>, 
                               ліво: Значення, 
                               право: Значення) -> Значення;
  місцева дія виконати_неповна_частка(М: адреса<Машина>, 
                               ліво: Значення, 
                               право: Значення) -> Значення;
  місцева дія виконати_степінь(М: адреса<Машина>, 
                               ліво: Значення, 
                               право: Значення) -> Значення;
  місцева дія виконати_вліво(М: адреса<Машина>, 
                               ліво: Значення, 
                               право: Значення) -> Значення;
  місцева дія виконати_вправо(М: адреса<Машина>, 
                               ліво: Значення, 
                               право: Значення) -> Значення;
  місцева дія виконати_вправо_2(М: адреса<Машина>, 
                               ліво: Значення, 
                               право: Значення) -> Значення;
  місцева дія виконати_двійкове_і(М: адреса<Машина>, 
                               ліво: Значення, 
                               право: Значення) -> Значення;
  місцева дія виконати_двійкове_або(М: адреса<Машина>, 
                               ліво: Значення, 
                               право: Значення) -> Значення;
  місцева дія виконати_двійкове_вабо(М: адреса<Машина>, 
                               ліво: Значення, 
                               право: Значення) -> Значення;
  місцева дія виконати_менше(М: адреса<Машина>, 
                               ліво: Значення, 
                               право: Значення) -> Значення;
  місцева дія виконати_не_менше(М: адреса<Машина>, 
                               ліво: Значення, 
                               право: Значення) -> Значення;
  місцева дія виконати_більше(М: адреса<Машина>, 
                               ліво: Значення, 
                               право: Значення) -> Значення;
  місцева дія виконати_не_більше(М: адреса<Машина>, 
                               ліво: Значення, 
                               право: Значення) -> Значення;
  місцева дія виконати_рівно(М: адреса<Машина>, 
                               ліво: Значення, 
                               право: Значення) -> Значення;
  місцева дія виконати_не_рівно(М: адреса<Машина>, 
                               ліво: Значення, 
                               право: Значення) -> Значення;
  місцева дія виконати_містить(М: адреса<Машина>, 
                               ліво: Значення, 
                               право: Значення) -> Значення;
  місцева дія виконати_не_містить(М: адреса<Машина>, 
                               ліво: Значення, 
                               право: Значення) -> Значення;
  місцева дія виконати_є(М: адреса<Машина>, 
                               ліво: Значення, 
                               право: Значення) -> Значення;
  місцева дія виконати_не_є(М: адреса<Машина>, 
                               ліво: Значення, 
                               право: Значення) -> Значення;
  місцева дія виконати_двійкове_не(М: адреса<Машина>, значення: Значення) -> Значення;
  місцева дія виконати_відʼємне(М: адреса<Машина>, значення: Значення) -> Значення;
  місцева дія виконати_числове(М: адреса<Машина>, значення: Значення) -> Значення;
  місцева дія виконати_заперечення(М: адреса<Машина>, значення: Значення) -> Значення;

  місцева дія виконати_взяти(М: адреса<Машина>,
                             дійсність: адреса<Дійсність>,
                             звідки: Значення,
                             довжина_шляху: природне, 
                             шлях: памʼять<Значення>) -> Значення;
}

/* КД-Б */

простір КД {
  структура Система;

  структура Система {
    дані: невідома_адреса;
    виділити_сиру_памʼять: (система: адреса<Система>, розмір: природне) -> памʼять<п8>;
    перевиділити_сиру_памʼять: (система: адреса<Система>, значення: памʼять<п8>, новий_розмір: природне) -> памʼять<п8>;
    звільнити_сиру_памʼять: (система: адреса<Система>, значення: невідома_памʼять) -> ніщо;
  }

  дія виділити<Т>(система: адреса<Система>) -> адреса<Т>;
  дія перевиділити<Т>(система: адреса<Система>, значення: адреса<Т>, кількість: природне) -> памʼять<Т>;
  дія звільнити(система: адреса<Система>, значення: невідома_адреса);
  дія виділити_памʼять<Т>(система: адреса<Система>, кількість: природне) -> памʼять<Т>;
  дія перевиділити_памʼять<Т>(система: адреса<Система>, значення: памʼять<Т>, кількість: природне) -> памʼять<Т>;
  дія звільнити_памʼять(система: адреса<Система>, значення: невідома_памʼять);

  дія виділити<Т>(система: адреса<Система>) -> адреса<Т> {
    вернути система.виділити_сиру_памʼять(система, Т.розмір) як адреса<Т>;
  }

  дія перевиділити<Т>(система: адреса<Система>, значення: адреса<Т>, кількість: природне) -> памʼять<Т> {
    вернути система.перевиділити_сиру_памʼять(система, значення як невідома_адреса, кількість * Т.розмір) як памʼять<Т>;
  }

  дія звільнити(система: адреса<Система>, значення: невідома_адреса) {
    система.звільнити_сиру_памʼять(система, значення як невідома_памʼять);
  }

  дія виділити_памʼять<Т>(система: адреса<Система>, кількість: природне) -> памʼять<Т> {
    вернути система.виділити_сиру_памʼять(система, кількість * Т.розмір) як памʼять<Т>;
  }

  дія перевиділити_памʼять<Т>(система: адреса<Система>, значення: памʼять<Т>, кількість: природне) -> памʼять<Т> {
    вернути система.перевиділити_сиру_памʼять(система, значення як памʼять<п8>, кількість * Т.розмір) як памʼять<Т>;
  }

  дія звільнити_памʼять(система: адреса<Система>, значення: невідома_памʼять) {
    система.звільнити_сиру_памʼять(система, значення);
  }

  простір символи {
    стала Нуль = 0;
    стала Один = 1;
    стала Два = 2;
    стала Три = 3;
    стала Чотири = 4;
    стала Пʼять = 5;
    стала Шість = 6;
    стала Сім = 7;
    стала Вісім = 8;
    стала Девʼять = 9;
    стала Велика_буква_А = 10;
    стала Велика_буква_Б = 11;
    стала Велика_буква_В = 12;
    стала Велика_буква_Г = 13;
    стала Велика_буква_Д = 14;
    стала Велика_буква_Е = 15;
    стала Велика_буква_Є = 16;
    стала Велика_буква_Ж = 17;
    стала Велика_буква_З = 18;
    стала Велика_буква_И = 19;
    стала Велика_буква_І = 20;
    стала Велика_буква_Ї = 21;
    стала Велика_буква_Й = 22;
    стала Велика_буква_К = 23;
    стала Велика_буква_Л = 24;
    стала Велика_буква_М = 25;
    стала Велика_буква_Н = 26;
    стала Велика_буква_О = 27;
    стала Велика_буква_П = 28;
    стала Велика_буква_Р = 29;
    стала Велика_буква_С = 30;
    стала Велика_буква_Т = 31;
    стала Велика_буква_У = 32;
    стала Велика_буква_Ф = 33;
    стала Велика_буква_Х = 34;
    стала Велика_буква_Ц = 35;
    стала Велика_буква_Ч = 36;
    стала Велика_буква_Ш = 37;
    стала Велика_буква_Щ = 38;
    стала Велика_буква_Ь = 39;
    стала Велика_буква_Ю = 40;
    стала Велика_буква_Я = 41;
    стала Мала_буква_а = 42;
    стала Мала_буква_б = 43;
    стала Мала_буква_в = 44;
    стала Мала_буква_г = 45;
    стала Мала_буква_д = 46;
    стала Мала_буква_е = 47;
    стала Мала_буква_є = 48;
    стала Мала_буква_ж = 49;
    стала Мала_буква_з = 50;
    стала Мала_буква_и = 51;
    стала Мала_буква_і = 52;
    стала Мала_буква_ї = 53;
    стала Мала_буква_й = 54;
    стала Мала_буква_к = 55;
    стала Мала_буква_л = 56;
    стала Мала_буква_м = 57;
    стала Мала_буква_н = 58;
    стала Мала_буква_о = 59;
    стала Мала_буква_п = 60;
    стала Мала_буква_р = 61;
    стала Мала_буква_с = 62;
    стала Мала_буква_т = 63;
    стала Мала_буква_у = 64;
    стала Мала_буква_ф = 65;
    стала Мала_буква_х = 66;
    стала Мала_буква_ц = 67;
    стала Мала_буква_ч = 68;
    стала Мала_буква_ш = 69;
    стала Мала_буква_щ = 70;
    стала Мала_буква_ь = 71;
    стала Мала_буква_ю = 72;
    стала Мала_буква_я = 73;
    стала Велика_буква_Ґ = 74;
    стала Велика_буква_Ё = 75;
    стала Велика_буква_Ъ = 76;
    стала Велика_буква_Ы = 77;
    стала Велика_буква_Э = 78;
    стала Мала_буква_ґ = 79;
    стала Мала_буква_ё = 80;
    стала Мала_буква_ъ = 81;
    стала Мала_буква_ы = 82;
    стала Мала_буква_э = 83;
    стала Апостроф = 84;
    стала Дволапка = 85;
    стала Лапка = 86;
    стала Косолапка = 87;
    стала І = 88;
    стала Міжкрапка = 89;
    стала Відсоток = 90;
    стала Гривня = 91;
    стала Мітка = 92;
    стала Адреса = 93;
    стала Секція = 94;
    стала Відкрита_квадратна_дужка = 95;
    стала Хрестик = 96;
    стала Закрита_квадратна_дужка = 97;
    стала Відкрита_дужка = 98;
    стала Риска = 99;
    стала Закрита_дужка = 100;
    стала Відкрита_фігурна_дужка = 101;
    стала Зірочка = 102;
    стала Закрита_фігурна_дужка = 103;
    стала Похила = 104;
    стала Стояча = 105;
    стала Обернена_похила = 106;
    стала Менше = 107;
    стала Двориска = 108;
    стала Більше = 109;
    стала Вище = 110;
    стала Гачок = 111;
    стала Нижче = 112;
    стала Надриска = 113;
    стала Хвиляста = 114;
    стала Підриска = 115;
    стала Кома = 116;
    стала Крапка = 117;
    стала Двокрапка = 118;
    стала Крапкакома = 119;
    стала Питання = 120;
    стала Оклик = 121;
    стала Нескінченність = 122;
    стала Інтеграл = 123;
    стала Серце = 124;
    стала Пропуск = 125;
    стала Міжряд = 126;
    стала Дія = 127;
  }

  простір відповідні_символи_юнікоду {
    стала Нуль = 48;
    стала Один = 49;
    стала Два = 50;
    стала Три = 51;
    стала Чотири = 52;
    стала Пʼять = 53;
    стала Шість = 54;
    стала Сім = 55;
    стала Вісім = 56;
    стала Девʼять = 57;
    стала Велика_буква_А = 1040;
    стала Велика_буква_Б = 1041;
    стала Велика_буква_В = 1042;
    стала Велика_буква_Г = 1043;
    стала Велика_буква_Д = 1044;
    стала Велика_буква_Е = 1045;
    стала Велика_буква_Є = 1028;
    стала Велика_буква_Ж = 1046;
    стала Велика_буква_З = 1047;
    стала Велика_буква_И = 1048;
    стала Велика_буква_І = 1030;
    стала Велика_буква_Ї = 1031;
    стала Велика_буква_Й = 1049;
    стала Велика_буква_К = 1050;
    стала Велика_буква_Л = 1051;
    стала Велика_буква_М = 1052;
    стала Велика_буква_Н = 1053;
    стала Велика_буква_О = 1054;
    стала Велика_буква_П = 1055;
    стала Велика_буква_Р = 1056;
    стала Велика_буква_С = 1057;
    стала Велика_буква_Т = 1058;
    стала Велика_буква_У = 1059;
    стала Велика_буква_Ф = 1060;
    стала Велика_буква_Х = 1061;
    стала Велика_буква_Ц = 1062;
    стала Велика_буква_Ч = 1063;
    стала Велика_буква_Ш = 1064;
    стала Велика_буква_Щ = 1065;
    стала Велика_буква_Ь = 1068;
    стала Велика_буква_Ю = 1070;
    стала Велика_буква_Я = 1071;
    стала Мала_буква_а = 1072;
    стала Мала_буква_б = 1073;
    стала Мала_буква_в = 1074;
    стала Мала_буква_г = 1075;
    стала Мала_буква_д = 1076;
    стала Мала_буква_е = 1077;
    стала Мала_буква_є = 1108;
    стала Мала_буква_ж = 1078;
    стала Мала_буква_з = 1079;
    стала Мала_буква_и = 1080;
    стала Мала_буква_і = 1110;
    стала Мала_буква_ї = 1111;
    стала Мала_буква_й = 1081;
    стала Мала_буква_к = 1082;
    стала Мала_буква_л = 1083;
    стала Мала_буква_м = 1084;
    стала Мала_буква_н = 1085;
    стала Мала_буква_о = 1086;
    стала Мала_буква_п = 1087;
    стала Мала_буква_р = 1088;
    стала Мала_буква_с = 1089;
    стала Мала_буква_т = 1090;
    стала Мала_буква_у = 1091;
    стала Мала_буква_ф = 1092;
    стала Мала_буква_х = 1093;
    стала Мала_буква_ц = 1094;
    стала Мала_буква_ч = 1095;
    стала Мала_буква_ш = 1096;
    стала Мала_буква_щ = 1097;
    стала Мала_буква_ь = 1100;
    стала Мала_буква_ю = 1102;
    стала Мала_буква_я = 1103;
    стала Велика_буква_Ґ = 1168;
    стала Велика_буква_Ё = 1025;
    стала Велика_буква_Ъ = 1066;
    стала Велика_буква_Ы = 1067;
    стала Велика_буква_Э = 1069;
    стала Мала_буква_ґ = 1169;
    стала Мала_буква_ё = 1105;
    стала Мала_буква_ъ = 1098;
    стала Мала_буква_ы = 1099;
    стала Мала_буква_э = 1101;
    стала Апостроф = 700;
    стала Дволапка = 34;
    стала Лапка = 39;
    стала Косолапка = 96;
    стала І = 38;
    стала Міжкрапка = 183;
    стала Відсоток = 37;
    стала Гривня = 8372;
    стала Мітка = 35;
    стала Адреса = 64;
    стала Секція = 167;
    стала Відкрита_квадратна_дужка = 91;
    стала Хрестик = 43;
    стала Закрита_квадратна_дужка = 93;
    стала Відкрита_дужка = 40;
    стала Риска = 45;
    стала Закрита_дужка = 41;
    стала Відкрита_фігурна_дужка = 123;
    стала Зірочка = 42;
    стала Закрита_фігурна_дужка = 125;
    стала Похила = 47;
    стала Стояча = 124;
    стала Обернена_похила = 92;
    стала Менше = 60;
    стала Двориска = 61;
    стала Більше = 62;
    стала Вище = 8743;
    стала Гачок = 172;
    стала Нижче = 8744;
    стала Надриска = 175;
    стала Хвиляста = 126;
    стала Підриска = 95;
    стала Кома = 44;
    стала Крапка = 46;
    стала Двокрапка = 58;
    стала Крапкакома = 59;
    стала Питання = 63;
    стала Оклик = 33;
    стала Нескінченність = 8734;
    стала Інтеграл = 8747;
    стала Серце = 10084;
    стала Пропуск = 32;
    стала Міжряд = 10;
    стала Дія = 19;
  }

  структура Місцезнаходження {
    розмір: природне;
    дані: памʼять<п32>;
    вмісткість: природне;
  }

  дія покласти_в_місцезнаходження(система: адреса<Система>, місцезнаходження: адреса<Місцезнаходження>, позиція_місцезнаходження: п32) {
    якщо місцезнаходження.розмір == місцезнаходження.вмісткість {
      місцезнаходження.вмісткість += 1;
      місцезнаходження.дані = перевиділити_памʼять<п32>(система, місцезнаходження.дані, місцезнаходження.вмісткість);
    }
    місцезнаходження.дані[місцезнаходження.розмір] = позиція_місцезнаходження;
    місцезнаходження.розмір += 1;
  }

  місцева дія дізнатись_розмір_символа_кд(перший_байт: п8) -> п8;
  місцева дія дізнатись_розмір_символа_ю8(перший_байт: п8) -> п8;
  місцева дія отримати_символ_кд_з_ю32(символ_Ю32: п32, вихід_першого_байта: адреса<п8>, вихід_другого_байта: адреса<п8>, вихід_третього_байта: адреса<п8>, вихід_четвертого_байта: адреса<п8>, вихід_розміру: адреса<п8>) -> логічне;
  місцева дія отримати_символ_ю8_з_т32(символ_КД: п32, вихід_першого_байта: адреса<п8>, вихід_другого_байта: адреса<п8>, вихід_третього_байта: адреса<п8>, вихід_четвертого_байта: адреса<п8>, вихід_розміру: адреса<п8>) -> логічне;
  місцева дія порахувати_розмір_ю8сі(значення: памʼять<п8>) -> природне;
  місцева дія порахувати_розмір_ю32сі(значення: памʼять<п32>) -> природне;
  місцева дія перевірити_чи_ю8_рівні(а: ю8, б: ю8) -> логічне;
  місцева дія перевірити_чи_ю32_рівні(а: ю32, б: ю32) -> логічне;
  місцева дія перевірити_чи_кд_рівні(а: кд, б: кд) -> логічне;
  місцева дія перекодувати_з_ю8(система: адреса<Система>, вхід: ю8, екранувати_невідомі: логічне, з_нульовим_байтом_в_кінці: логічне, вихід: адреса<кд>, вихід_позиції_помилки: адреса<природне>) -> логічне;
  місцева дія перекодувати_ю8_в_ю32(система: адреса<Система>, вхід: ю8, з_нульовим_байтом_в_кінці: логічне, вихід: адреса<ю32>, вихід_позиції_помилки: адреса<природне>) -> логічне;
  місцева дія перекодувати_ю32_в_ю8(система: адреса<Система>, вхід: ю32, з_нульовим_байтом_в_кінці: логічне, вихід: адреса<ю8>, вихід_позиції_помилки: адреса<природне>) -> логічне;
  місцева дія перекодувати_в_ю8(система: адреса<Система>, вхід: кд, з_нульовим_байтом_в_кінці: логічне, вихід: адреса<ю8>, вихід_позиції_помилки: адреса<природне>) -> логічне;
  місцева дія перекодувати_з_ю8_з_місцезнаходженнями(система: адреса<Система>, вхід: ю8, екранувати_невідомі: логічне, з_нульовим_байтом_в_кінці: логічне, вихід: адреса<кд>, вихід_місцезнаходжень: адреса<Місцезнаходження>, вихід_позиції_помилки: адреса<природне>) -> логічне;
  місцева дія перекодувати_в_ю8_з_місцезнаходженнями(система: адреса<Система>, вхід: кд, з_нульовим_байтом_в_кінці: логічне, вихід: адреса<ю8>, вихід_місцезнаходжень: адреса<Місцезнаходження>, вихід_позиції_помилки: адреса<природне>) -> логічне;

  місцева дія обробити_екранізації_в_кд(система: адреса<Система>, вхід: кд, з_нульовим_байтом_в_кінці: логічне, вихід: адреса<кд>) -> логічне;
  місцева дія обробити_екранізації_в_ю8(система: адреса<Система>, вхід: ю8, з_нульовим_байтом_в_кінці: логічне, вихід: адреса<ю8>) -> логічне;
}

/* Розбирач Мавки */

простір мавка {
  простір розбирач {
    структура можливо<Т>;
  
    структура можливо<Т> {
      заповнено: логічне;
      значення: Т;
    }
  
    структура ПомилкаРозборуНаСлова {
      позиція_в_тексті: природне;
      рядок: природне;
      стовпець: природне;
    }
  
    структура ПомилкаРозборуНаСполуки {
      позиція_слова: природне;
      рядок: природне;
      стовпець: природне;
    }
  
    стала ВидСловаАбо = 0;
    стала ВидСловаБільше = 1;
    стала ВидСловаВзяти = 2;
    стала ВидСловаВласна = 3;
    стала ВидСловаВпасти = 4;
    стала ВидСловаВидалити = 5;
    стала ВидСловаВнутрішня = 6;
    стала ВидСловаВластивість = 7;
    стала ВидСловаВернути = 8;
    стала ВидСловаДія = 9;
    стала ВидСловаДати = 10;
    стала ВидСловаЄ = 11;
    стала ВидСловаЗовнішня = 12;
    стала ВидСловаЗловити = 13;
    стала ВидСловаІ = 14;
    стала ВидСловаІнакше = 15;
    стала ВидСловаКомпозиція = 16;
    стала ВидСловаКінець = 17;
    стала ВидСловаМодуль = 18;
    стала ВидСловаМенше = 19;
    стала ВидСловаМістить = 20;
    стала ВидСловаМісцева = 21;
    стала ВидСловаНе = 22;
    стала ВидСловаПоки = 23;
    стала ВидСловаПерелік = 24;
    стала ВидСловаПеребрати = 26;
    стала ВидСловаРівно = 27;
    стала ВидСловаСтруктура = 28;
    стала ВидСловаСпробувати = 29;
    стала ВидСловаСпец = 30;
    стала ВидСловаТривала = 31;
    стала ВидСловаЦикл = 32;
    стала ВидСловаЦе = 33;
    стала ВидСловаЧекати = 34;
    стала ВидСловаЯк = 35;
    стала ВидСловаЯкщо = 36;
  
    стала ВидСловаСимволРівно = 37;
    стала ВидСловаСимволБільше = 38;
    стала ВидСловаСимволМенше = 39;
    стала ВидСловаСимволКрапка = 40;
    стала ВидСловаСимволПлюс = 41;
    стала ВидСловаСимволМінус = 42;
    стала ВидСловаСимволПомножити = 43;
    стала ВидСловаСимволПоділити = 44;
    стала ВидСловаСимволЗалишку = 45;
    стала ВидСловаСимволВиключнеАбо = 46;
    стала ВидСловаСимволІ = 47;
    стала ВидСловаСимволАбо = 48;
    стала ВидСловаСимволВідкритаДужка = 49;
    стала ВидСловаСимволЗакритаДужка = 50;
    стала ВидСловаСимволКвадратнаВідкритаДужка = 51;
    стала ВидСловаСимволКвадратнаЗакритаДужка = 52;
    стала ВидСловаСимволЗнакПитання = 53;
    стала ВидСловаСимволДвокрапка = 54;
    стала ВидСловаСимволДвійковеНе = 55;
    стала ВидСловаСимволОднолапка = 56;
    стала ВидСловаСимволДволапка = 57;
    стала ВидСловаСимволЗнакОклику = 58;
    стала ВидСловаСимволКома = 59;
    стала ВидСловаСимволМіжряд = 60;
  
    стала ВидСловаЧисло = 61;
    стала ВидСловаСимвол = 63;
    стала ВидСловаТекст = 64;
    стала ВидСловаКоментар = 66;
    стала ВидСловаБагаторядковийКоментар = 67;
    стала ВидСловаІдентифікатор = 68;
  
    стала ВидСловаПочатокЗбитогоТексту = 69;
    стала ВидСловаРоздільникЗбитогоТексту = 70;
    стала ВидСловаКінецьЗбитогоТексту = 71;
    стала ВидСловаЧастинаЗбитогоТексту = 72;
    стала ВидСловаСимволФігурнаВідкритаДужка = 73;
    стала ВидСловаСимволФігурнаЗакритаДужка = 74;
  
    стала ВидСловаКІНЕЦЬСЛІВ = 100;
  
    стала КД_РОЗРИВ = КД::символи::Міжряд;
    стала КД_ПРОПУСК = КД::символи::Пропуск;
    стала КД_ДВОЛАПКА = КД::символи::Дволапка;
    стала КД_ВІДСОТОК = КД::символи::Відсоток;
    стала КД_ЛАПКА = КД::символи::Лапка;
    стала КД_ВІДКРИТА_ДУЖКА = КД::символи::Відкрита_дужка;
    стала КД_ЗАКРИТА_ДУЖКА = КД::символи::Закрита_дужка;
    стала КД_КРАПКА = КД::символи::Крапка;
    стала КД_0 = КД::символи::Нуль;
    стала КД_1 = КД::символи::Один;
    стала КД_2 = КД::символи::Два;
    стала КД_3 = КД::символи::Три;
    стала КД_4 = КД::символи::Чотири;
    стала КД_5 = КД::символи::Пʼять;
    стала КД_6 = КД::символи::Шість;
    стала КД_7 = КД::символи::Сім;
    стала КД_8 = КД::символи::Вісім;
    стала КД_9 = КД::символи::Девʼять;
    стала КД_ОБЕРНЕНА_ПОХИЛА = КД::символи::Обернена_похила;
    стала КД_ПІДРИСКА = КД::символи::Підриска;
    стала КД_р = КД::символи::Мала_буква_р;
  
    структура ПозиціяСлова {
      позиція_в_тексті: природне;
      рядок: природне;
      стовпець: природне;
    }
  
    структура Слово {
      вид: природне;
      позиція_початку: ПозиціяСлова;
      позиція_кінця: ПозиціяСлова;
    }
  
    структура Слова {
      розмір: природне;
      дані: памʼять<Слово>;
    }
  
    стала ВидСполукиНіщо = 0;
    стала ВидСполукиВизначити = 1;
    стала ВидСполукиЗвернутись = 2;
    стала ВидСполукиОтриматиВластивість = 3;
    стала ВидСполукиОтриматиЕлемент = 5;
    стала ВидСполукиЗмінитиВластивість = 6;
    стала ВидСполукиЗмінитиЕлемент = 8;
    стала ВидСполукиВиконати = 9;
    стала ВидСполукиДія = 12;
    стала ВидСполукиСтруктура = 13;
    стала ВидСполукиЧисло = 18;
    стала ВидСполукиТекст = 19;
    стала ВидСполукиОперація = 21;
    стала ВидСполукиЯкщо = 22;
    стала ВидСполукиПоки = 23;
    стала ВидСполукиВернути = 24;
    стала ВидСполукиЗначенняЯкщо = 27;
    стала ВидСполукиСамоОперація = 29;
    стала ВидСполукиВзяти = 33;
    стала ВидСполукиСпробувати = 34;
    стала ВидСполукиВпасти = 35;
    стала ВидСполукиДати = 36;
    стала ВидСполукиМодуль = 37;
    стала ВидСполукиСписок = 38;
    стала ВидСполукиСловник = 39;
    стала ВидСполукиСимвол = 40;
    стала ВидСполукиПеребрати = 41;
    стала ВидСполукиЦикл = 42;
    стала ВидСполукиВизначитиЗзовні = 43;
    стала ВидСполукиВічнийЦикл = 45;
    стала ВидСполукиВидалити = 46;
    стала ВидСполукиВидалитиВластивість = 47;
    стала ВидСполукиВидалитиЕлемент = 48;
    стала ВидСполукиЧекати = 49;
    стала ВидСполукиДіапазон = 50;
    стала ВидСполукиЗбитийТекст = 51; // 51
  
    стала ВидОпераціїМноження = 1;
    стала ВидОпераціїДілення = 2;
    стала ВидОпераціїМодуль = 3;
    стала ВидОпераціїДодавання = 4;
    стала ВидОпераціїВіднімання = 5;
    стала ВидОпераціїЗсувВліво = 6;
    стала ВидОпераціїЗсувВправо = 7;
    стала ВидОпераціїЗсувВправоЗнаковий = 8;
    стала ВидОпераціїМенше = 9;
    стала ВидОпераціїБільше = 10;
    стала ВидОпераціїМеншеРівне = 11;
    стала ВидОпераціїБільшеРівне = 12;
    стала ВидОпераціїРівне = 13;
    стала ВидОпераціїНерівне = 14;
    стала ВидОпераціїДІ = 15;
    стала ВидОпераціїВАБО = 16;
    стала ВидОпераціїДАБО = 17;
    стала ВидОпераціїІ = 18;
    стала ВидОпераціїАБО = 19;
    стала ВидОпераціїДіленняНаціло = 20;
    стала ВидОпераціїПіднесенняДоСтепеня = 21;
    стала ВидОпераціїМістить = 22;
    стала ВидОпераціїНеМістить = 23;
    стала ВидОпераціїЄ = 24;
    стала ВидОпераціїНеЄ = 25;
  
    стала ВидСамоОпераціїЛогічнеНі = 1;
    стала ВидСамоОпераціїДвійковеНі = 2;
    стала ВидСамоОпераціїПлюс = 3;
    стала ВидСамоОпераціїМінус = 4;
  
    структура Місцезнаходження;
    структура Сполука;
    структура Сполуки;
  
    структура Ідентифікатор;
    структура Параметр;
    структура Аргумент;
    структура ЕлементДати;
    структура ЕлементВзяти;
    структура ЕлементСловника;
  
    структура ДаніСполукиВизначити;
    структура ДаніСполукиЗвернутись;
    структура ДаніСполукиОтриматиВластивість;
    структура ДаніСполукиОтриматиЕлемент;
    структура ДаніСполукиЗмінитиВластивість;
    структура ДаніСполукиЗмінитиЕлемент;
    структура ДаніСполукиВиконати;
    структура ДаніСполукиДія;
    структура ДаніСполукиСтруктура;
    структура ДаніСполукиЧисло;
    структура ДаніСполукиТекст;
    структура ДаніСполукиСимвол;
    структура ДаніСполукиОперація;
    структура ДаніСполукиЯкщо;
    структура ДаніСполукиПоки;
    структура ДаніСполукиПеребрати;
    структура ДаніСполукиЦикл;
    структура ДаніСполукиВічнийЦикл;
    структура ДаніСполукиВернути;
    структура ДаніСполукиЗначенняЯкщо;
    структура ДаніСполукиСамоОперація;
    структура ДаніСполукиВзяти;
    структура ДаніСполукиСпробувати;
    структура ДаніСполукиВпасти;
    структура ДаніСполукиДати;
    структура ДаніСполукиМодуль;
    структура ДаніСполукиСписок;
    структура ДаніСполукиСловник;
    структура ДаніСполукиВизначитиЗзовні;
    структура ДаніСполукиВидалити;
    структура ДаніСполукиВидалитиВластивість;
    структура ДаніСполукиВидалитиЕлемент;
    структура ДаніСполукиЧекати;
    структура ДаніСполукиДіапазон;
    структура ДаніСполукиЗбитийТекст;
  
    структура Сполуки {
      розмір: природне;
      дані: памʼять<адреса<Сполука>>;
    }
  
    структура Місцезнаходження {
      позиція_слова: природне;
    }
  
    структура Ідентифікатор {
      позиція_слова: природне;
    }
  
    структура Тип {
      кількість_гілок: природне;
      сполуки: памʼять<адреса<Сполука>>;
    }
  
    структура Параметр {
      ідентифікатор: Ідентифікатор;
      тип: можливо<Тип>;
      значення: адреса<Сполука>;
      місцезнаходження: Місцезнаходження;
    }
  
    структура Аргумент {
      ідентифікатор: можливо<Ідентифікатор>;
      значення: адреса<Сполука>;
      місцезнаходження: Місцезнаходження;
    }
  
    структура ЕлементДати {
      ідентифікатор: Ідентифікатор;
      ідентифікатор_як: можливо<Ідентифікатор>;
      місцезнаходження: Місцезнаходження;
    }
  
    структура ЕлементВзяти {
      ідентифікатор: Ідентифікатор;
      ідентифікатор_як: можливо<Ідентифікатор>;
      місцезнаходження: Місцезнаходження;
    }
  
    структура ЕлементСловника {
      ключ: адреса<Сполука>;
      значення: адреса<Сполука>;
      місцезнаходження: Місцезнаходження;
    }
  
    структура ДаніСполукиВизначити {
      ідентифікатор: Ідентифікатор;
      значення: адреса<Сполука>;
    }
  
    структура ДаніСполукиЗвернутись {
      ідентифікатор: Ідентифікатор;
    }
  
    структура ДаніСполукиОтриматиВластивість {
      предмет: адреса<Сполука>;
      ідентифікатор: Ідентифікатор;
    }
  
    структура ДаніСполукиОтриматиЕлемент {
      предмет: адреса<Сполука>;
      ключ: адреса<Сполука>;
    }
  
    структура ДаніСполукиЗмінитиВластивість {
      предмет: адреса<Сполука>;
      ідентифікатор: Ідентифікатор;
      значення: адреса<Сполука>;
    }
  
    структура ДаніСполукиЗмінитиЕлемент {
      предмет: адреса<Сполука>;
      ключ: адреса<Сполука>;
      значення: адреса<Сполука>;
    }
  
    структура ДаніСполукиВиконати {
      предмет: адреса<Сполука>;
      кількість_аргументів: природне;
      аргументи: памʼять<Аргумент>;
    }
  
    структура ДаніСполукиДія {
      тривала: логічне;
      власна: логічне;
      структура_: адреса<Сполука>;
      ідентифікатор: можливо<Ідентифікатор>;
      кількість_параметрів: природне;
      параметри: памʼять<Параметр>;
      тип_результату: можливо<Тип>;
      тіло: Сполуки;
    }
  
    структура ДаніСполукиСтруктура {
      ідентифікатор: можливо<Ідентифікатор>;
      предок: адреса<Сполука>;
      кількість_параметрів: природне;
      параметри: памʼять<Параметр>;
    }
  
    структура ДаніСполукиЧисло {
      позиція_слова: природне;
    }
  
    структура ДаніСполукиТекст {
      ідентифікатор: можливо<Ідентифікатор>;
      позиція_слова: природне;
    }
  
    структура ДаніСполукиСимвол {
      ідентифікатор: можливо<Ідентифікатор>;
      позиція_слова: природне;
    }
  
    структура ДаніСполукиОперація {
      ліво: адреса<Сполука>;
      операція: природне;
      право: адреса<Сполука>;
    }
  
    структура ДаніСполукиЯкщо {
      умова: адреса<Сполука>;
      тіло: Сполуки;
      тіло_інакше: Сполуки;
    }
  
    структура ДаніСполукиПоки {
      умова: адреса<Сполука>;
      тіло: Сполуки;
    }
  
    структура ДаніСполукиПеребрати {
      предмет: адреса<Сполука>;
      ідентифікатор: можливо<Ідентифікатор>;
      тіло: Сполуки;
    }
  
    структура ДаніСполукиЦикл {
      старт: Сполуки;
      умова: адреса<Сполука>;
      тіло: Сполуки;
      ітерація: Сполуки;
    }
  
    структура ДаніСполукиВічнийЦикл {
      тіло: Сполуки;
    }
  
    структура ДаніСполукиВернути {
      значення: адреса<Сполука>;
    }
  
    структура ДаніСполукиЗначенняЯкщо {
      умова: адреса<Сполука>;
      значення_так: адреса<Сполука>;
      значення_ні: адреса<Сполука>;
    }
  
    структура ДаніСполукиСамоОперація {
      операція: природне;
      предмет: адреса<Сполука>;
    }
  
    структура ДаніСполукиВзяти {
      тип: можливо<Ідентифікатор>;
      довжина_шляху: природне;
      шлях: памʼять<Ідентифікатор>;
      ідентифікатор_як: можливо<Ідентифікатор>;
      кількість_елементів: природне;
      елементи: памʼять<ЕлементВзяти>;
    }
  
    структура ДаніСполукиСпробувати {
      тіло: Сполуки;
      ідентифікатор_зловити: можливо<Ідентифікатор>;
      тіло_зловити: Сполуки;
    }
  
    структура ДаніСполукиВпасти {
      значення: адреса<Сполука>;
    }
  
    структура ДаніСполукиДати {
      кількість_елементів: природне;
      елементи: памʼять<ЕлементДати>;
    }
  
    структура ДаніСполукиМодуль {
      ідентифікатор: можливо<Ідентифікатор>;
      тіло: Сполуки;
    }
  
    структура ДаніСполукиСписок {
      кількість_елементів: природне;
      елементи: памʼять<адреса<Сполука>>;
    }
  
    структура ДаніСполукиСловник {
      кількість_елементів: природне;
      елементи: памʼять<ЕлементСловника>;
    }
  
    структура ДаніСполукиВизначитиЗзовні {
      ідентифікатор: Ідентифікатор;
      значення: адреса<Сполука>;
    }
  
    структура ДаніСполукиВидалити {
      ідентифікатор: Ідентифікатор;
    }
  
    структура ДаніСполукиВидалитиВластивість {
      предмет: адреса<Сполука>;
      ідентифікатор: Ідентифікатор;
    }
  
    структура ДаніСполукиВидалитиЕлемент {
      предмет: адреса<Сполука>;
      ключ: адреса<Сполука>;
    }
  
    структура ДаніСполукиЧекати {
      значення: адреса<Сполука>;
    }
  
    структура ДаніСполукиДіапазон {
      від: адреса<Сполука>;
      до: адреса<Сполука>;
      включно: логічне;
    }
  
    структура ДаніСполукиЗбитийТекст {
      ідентифікатор: можливо<Ідентифікатор>;
      кількість_гілок: природне;
      сполуки: памʼять<адреса<Сполука>>;
    }
  
    структура Сполука {
      вид: природне;
      дані: ДаніСполукиВизначити 
          | ДаніСполукиЗвернутись 
          | ДаніСполукиОтриматиВластивість 
          | ДаніСполукиОтриматиЕлемент 
          | ДаніСполукиЗмінитиВластивість 
          | ДаніСполукиЗмінитиЕлемент 
          | ДаніСполукиВиконати 
          | ДаніСполукиДія 
          | ДаніСполукиСтруктура 
          | ДаніСполукиЧисло 
          | ДаніСполукиТекст 
          | ДаніСполукиСимвол 
          | ДаніСполукиОперація 
          | ДаніСполукиЯкщо 
          | ДаніСполукиПоки 
          | ДаніСполукиПеребрати 
          | ДаніСполукиЦикл 
          | ДаніСполукиВічнийЦикл 
          | ДаніСполукиВернути 
          | ДаніСполукиЗначенняЯкщо 
          | ДаніСполукиСамоОперація 
          | ДаніСполукиВзяти 
          | ДаніСполукиСпробувати 
          | ДаніСполукиВпасти 
          | ДаніСполукиДати 
          | ДаніСполукиМодуль 
          | ДаніСполукиСписок 
          | ДаніСполукиСловник 
          | ДаніСполукиВизначитиЗзовні 
          | ДаніСполукиВидалити 
          | ДаніСполукиВидалитиВластивість 
          | ДаніСполукиВидалитиЕлемент 
          | ДаніСполукиЧекати 
          | ДаніСполукиДіапазон 
          | ДаніСполукиЗбитийТекст;
      місцезнаходження: Місцезнаходження;
    }
  
    // потім:
    //   - обрахунок стовпця
    //   - виправити місцезнаходження гілок
    
    місцева дія розібрати_на_слова(М: адреса<Машина>, 
                                   значення_кд: кд, 
                                   вихід: адреса<Слова>, 
                                   вихід_помилки: адреса<ПомилкаРозборуНаСлова>): логічне;
    місцева дія звільнити_слова(М: адреса<Машина>, 
                                слова: Слова);
    місцева дія звільнити_помилку_розбору_на_слова(М: адреса<Машина>, 
                                                   помилка: ПомилкаРозборуНаСлова);
    місцева дія отримати_помилку_розбору_на_слова(М: адреса<Машина>, 
                                                  помилка: ПомилкаРозборуНаСлова, вихід: адреса<кд>): логічне;
    місцева дія отримати_рядок_помилки_розбору_на_слова(М: адреса<Машина>, 
                                                        помилка: ПомилкаРозборуНаСлова): природне;
    місцева дія отримати_стовпець_помилки_розбору_на_слова(М: адреса<Машина>, 
                                                           помилка: ПомилкаРозборуНаСлова): природне;
  
    місцева дія отримати_значення_ідентифікатора(значення_кд: кд, 
                                                 слова: Слова, 
                                                 ідентифікатор: Ідентифікатор): кд;
    місцева дія отримати_значення_слова(значення_кд: кд, 
                                        слова: Слова, 
                                        слово: Слово): кд;
    місцева дія отримати_значення_тексту(значення_кд: кд, 
                                         слова: Слова, 
                                         сполука_тексту: адреса<Сполука>): кд;
    місцева дія отримати_значення_символу(значення_кд: кд, 
                                          слова: Слова, 
                                          сполука_символу: адреса<Сполука>): кд;
    місцева дія отримати_рядок_з_місцезнаходження(значення_кд: кд, 
                                                  слова: Слова, 
                                                  місцезнаходження: Місцезнаходження): природне;
    місцева дія отримати_стовпець_з_місцезнаходження(значення_кд: кд, 
                                                     слова: Слова, 
                                                     місцезнаходження: Місцезнаходження): природне;
  
    місцева дія розібрати_слова_на_сполуки(М: адреса<Машина>, 
                                           значення_кд: кд, 
                                           слова: Слова, 
                                           вихід: адреса<Сполуки>, 
                                           вихід_помилки: адреса<ПомилкаРозборуНаСполуки>): логічне;
    місцева дія звільнити_сполуки(М: адреса<Машина>, 
                                  сполуки: Сполуки);
    місцева дія звільнити_помилку_розбору_на_сполуки(М: адреса<Машина>, 
                                                     помилка: ПомилкаРозборуНаСполуки);
    місцева дія отримати_помилку_розбору_на_сполуки(М: адреса<Машина>, 
                                                    помилка: ПомилкаРозборуНаСполуки, 
                                                    вихід: адреса<кд>): логічне;
    місцева дія отримати_рядок_помилки_розбору_на_сполуки(М: адреса<Машина>, 
                                                          помилка: ПомилкаРозборуНаСполуки): природне;
    місцева дія отримати_стовпець_помилки_розбору_на_сполуки(М: адреса<Машина>, 
                                                             помилка: ПомилкаРозборуНаСполуки): природне;
  }
}

/* Перекладач Мавки */

простір мавка {
  простір перекладач {
    структура ПомилкаПерекладу {
      позиція_в_тексті: природне;
      рядок: природне;
      стовпець: природне;
      повідомлення: кд; // має звільнити той хто оброляє помилку
    }

    синонім ДіяСтворитиКод = (М: адреса<Машина>) -> невідома_адреса;
    синонім ДіяПокластиКонстантуЧисла = (М: адреса<Машина>, код: невідома_адреса, значення: д64) -> п32;
    синонім ДіяПокластиКонстантуТексту = (М: адреса<Машина>, код: невідома_адреса, значення: кд) -> п32;
    синонім ДіяПокластиКонстантуКоду = (М: адреса<Машина>, код: невідома_адреса, значення: невідома_адреса) -> п32;
    синонім ДіяПокластиВказівку = (М: адреса<Машина>, код: невідома_адреса, рядок: п32, вид: п8) -> п32;
    синонім ДіяПокластиВказівкуЗАргументом = (М: адреса<Машина>, код: невідома_адреса, рядок: п32, вид: п8, аргумент: п32) -> п32;
    синонім ДіяПокластиВказівкуЗДвомаАргументами = (М: адреса<Машина>, код: невідома_адреса, рядок: п32, вид: п8, аргумент1: п32, аргумент2: п32) -> п32;
    синонім ДіяЗмінитиАргументВказівки = (М: адреса<Машина>, код: невідома_адреса, позиція_виду_вказівки: п32, позиція_аргумента_вказівки: п32, новий_аргумент: п32) -> ніщо;
    синонім ДіяОтриматиРозмірВказівок = (М: адреса<Машина>, код: невідома_адреса) -> п32;

    структура Дії {
      створити_код: ДіяСтворитиКод;
      покласти_константу_числа: ДіяПокластиКонстантуЧисла;
      покласти_константу_тексту: ДіяПокластиКонстантуТексту;
      покласти_константу_коду: ДіяПокластиКонстантуКоду;
      покласти_вказівку: ДіяПокластиВказівку;
      покласти_вказівку_з_аргументом: ДіяПокластиВказівкуЗАргументом;
      покласти_вказівку_з_двома_аргументами: ДіяПокластиВказівкуЗДвомаАргументами;
      змінити_аргумент_вказівки: ДіяЗмінитиАргументВказівки;
      отримати_розмір_вказівок: ДіяОтриматиРозмірВказівок;
    }
  
    місцева дія перекласти(М: адреса<Машина>,
                           сирий_текст: кд,
                           слова: розбирач::Слова,
                           здійснимі: розбирач::Сполуки,
                           дії: Дії,
                           вихід_коду: адреса<невідома_адреса>,
                           вихід_помилки: адреса<ПомилкаПерекладу>) -> логічне;  
  }

  місцева дія перекласти_в_код(М: адреса<Машина>,
                               сирий_текст: кд,
                               слова: розбирач::Слова,
                               здійснимі: розбирач::Сполуки,
                               вихід_коду: адреса<Значення>,
                               вихід_помилки: адреса<перекладач::ПомилкаПерекладу>) -> логічне;

  місцева дія перекласти_у_файл_коду(М: адреса<Машина>,
                                     сирий_текст: кд,
                                     слова: розбирач::Слова,
                                     здійснимі: розбирач::Сполуки,
                                     вихід_розміру: адреса<природне>,
                                     вихід_даних: адреса<памʼять<п8>>,
                                     вихід_помилки: адреса<перекладач::ПомилкаПерекладу>) -> логічне;

  місцева дія здійснити(М: адреса<Машина>,
                        здійснювач: Значення,
                        значення: Значення,
                        кількість_задіяних: природне, 
                        задіяні: памʼять<Значення>,
                        іменовано_задіяні: адреса<ІменованіЗадіяні>) -> Значення;
}