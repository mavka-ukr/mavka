взяти означення мавка;

простір мавка {
  місцева дія створити_предмет(М: адреса<Машина>, значення_структури: Значення) -> Значення {
    змінна предмет = виділити_предмет(М, значення_структури);
    
    предмет.властивості = Властивості { 0, пусто };
    
    вернути предмет як Значення;
  }

  // позначка: прохід по типах предметів
  місцева дія отримати_діапазон(М: адреса<Машина>, від: Значення, до: Значення, включно: логічне, місцезнаходження: Місцезнаходження) -> Значення {
    якщо від == пусто {
      вернути пусто;
    }

    якщо від.тип == М.значення_дійсне {
      вернути пусто;
    }
    
    якщо від.тип == М.значення_послідовність {
      вернути пусто;
    }
    
    якщо від.тип == М.значення_дійсність {
      вернути пусто;
    }
    
    якщо від.тип == М.значення_предмет {
      вернути пусто;
    }
    
    якщо від.тип == М.значення_структура_Структура {
      вернути пусто;
    }
    
    якщо від.тип == М.значення_структура_Модуль {
      вернути пусто;
    }
    
    якщо від.тип == М.значення_структура_Параметр {
      вернути пусто;
    }
    
    якщо від.тип == М.значення_структура_Число {
      вернути пусто;
    }
    
    якщо від.тип == М.значення_структура_Ціле {
      якщо до.тип == М.значення_структура_Ціле {
        вернути створити_діапазон_цілих(М, від, до, включно);
      } інакше {
        увімкнути_стан_падіння(
          М,
          створити_текст(М, "Неможливо створити діапазон цілих чисел з різнорідних типів."),
          місцезнаходження
        );

        вернути пусто;
      }
    }
    
    якщо від.тип == М.значення_структура_Дробове {
      якщо до.тип == М.значення_структура_Дробове {
        вернути створити_діапазон_дробових(М, від, до, включно);
      } інакше {
        увімкнути_стан_падіння(
          М,
          створити_текст(М, "Неможливо створити діапазон дробових чисел з різнорідних типів."),
          місцезнаходження
        );

        вернути пусто;
      }
    }
    
    якщо від.тип == М.значення_структура_Текст {
      вернути пусто;
    }
    
    якщо від.тип == М.значення_структура_Код {
      вернути пусто;
    }
    
    якщо від.тип == М.значення_структура_Дія {
      вернути пусто;
    }
    
    якщо від.тип == М.значення_структура_Список {
      вернути пусто;
    }
    
    якщо від.тип == М.значення_структура_Словник {
      вернути пусто;
    }
    
    якщо від.тип == М.значення_структура_Дані {
      вернути пусто;
    }
    
    якщо від.тип == М.значення_структура_ЗмінніДані {
      вернути пусто;
    }
    
    якщо від.тип == М.значення_структура_ДіапазонЦілих {
      вернути пусто;
    }
    
    якщо від.тип == М.значення_структура_ДіапазонДробових {
      вернути пусто;
    }
    
    якщо від.тип == М.значення_структура_ПеребірДіапазонуЦілих {
      вернути пусто;
    }
    
    якщо від.тип == М.значення_структура_ПеребірДіапазонуДробових {
      вернути пусто;
    }

    змінна кількість_задіяних: природне = 2;
    змінна задіяні = виділити_памʼять<Значення>(М, кількість_задіяних);
    задіяні[0] = до;
    якщо включно {
      задіяні[1] = М.значення_дійсне;
    } інакше {
      задіяні[1] = пусто як Значення;
    }

    вернути здійснити_властивість(
      М,
      від,
      створити_текст(М, "чародія_діапазон"),
      кількість_задіяних,
      задіяні,
      пусто,
      місцезнаходження
    );
  }

  // позначка: прохід по типах предметів
  місцева дія отримати_властивість(М: адреса<Машина>, предмет: Значення, назва: Значення, місцезнаходження: Місцезнаходження) -> Значення {
    якщо предмет == пусто {
      вернути пусто;
    }

    якщо предмет.тип == М.значення_дійсне {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_послідовність {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_дійсність {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_предмет {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Структура {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Модуль {
      змінна властивості_модуля = (предмет як адреса<Предмет>).властивості як ВластивостіМодуля;
      змінна властивості = властивості_модуля.властивості;
      
      змінна п: природне = 0;
      поки п < властивості.розмір {
        змінна властивість = властивості.дані[п];
  
        якщо перевірити_чи_значення_рівні(М, властивість.назва, назва) {
          вернути властивість.значення;
        }
  
        п += 1;
      }

      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Параметр {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Число {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Ціле {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Дробове {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Текст {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Код {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Дія {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Список {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Словник {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Дані {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_ЗмінніДані {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_ДіапазонЦілих {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_ДіапазонДробових {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_ПеребірДіапазонуЦілих {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_ПеребірДіапазонуДробових {
      вернути пусто;
    }

    змінна властивості = (предмет як адреса<Предмет>).властивості як Властивості;
    
    змінна п: природне = 0;
    поки п < властивості.розмір {
      змінна властивість = властивості.дані[п];

      якщо перевірити_чи_значення_рівні(М, властивість.назва, назва) {
        вернути властивість.значення;
      }

      п += 1;
    }

    якщо предмет.тип.тип == М.значення_структура_Структура {
      вернути знайти_метод_в_структурі(М, предмет.тип, назва);
    }

    вернути пусто;
  }

  // позначка: прохід по типах предметів
  місцева дія змінити_властивість(М: адреса<Машина>, предмет: Значення, назва: Значення, значення: Значення, місцезнаходження: Місцезнаходження) {
    якщо предмет == пусто {
      вернути;
    }

    якщо предмет.тип == М.значення_дійсне {
      вернути;
    }
    
    якщо предмет.тип == М.значення_послідовність {
      вернути;
    }
    
    якщо предмет.тип == М.значення_дійсність {
      вернути;
    }
    
    якщо предмет.тип == М.значення_предмет {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_Структура {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_Модуль {
      змінна властивості_модуля = ((предмет як адреса<Предмет>).властивості як ВластивостіМодуля)::адреса;
      змінна властивості = властивості_модуля.властивості::адреса;
      
      змінна п: природне = 0;
      поки п < властивості.розмір {
        змінна властивість = властивості.дані[п]::адреса;
  
        якщо перевірити_чи_значення_рівні(М, властивість.назва, назва) {
          властивість.значення = значення;
  
          вернути;
        }
  
        п += 1;
      }
  
      властивості.дані = перевиділити_памʼять<Властивість>(М, властивості.дані, властивості.розмір + 1);
      властивості.дані[властивості.розмір] = Властивість { назва, значення };
      властивості.розмір += 1;
  
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_Параметр {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_Число {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_Ціле {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_Дробове {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_Текст {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_Код {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_Дія {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_Список {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_Словник {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_Дані {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_ЗмінніДані {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_ДіапазонЦілих {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_ДіапазонДробових {
      вернути;
    }

    змінна властивості = ((предмет як адреса<Предмет>).властивості як Властивості)::адреса;
    
    змінна п: природне = 0;
    поки п < властивості.розмір {
      змінна властивість = властивості.дані[п]::адреса;

      якщо перевірити_чи_значення_рівні(М, властивість.назва, назва) {
        властивість.значення = значення;

        вернути;
      }

      п += 1;
    }

    властивості.дані = перевиділити_памʼять<Властивість>(М, властивості.дані, властивості.розмір + 1);
    властивості.дані[властивості.розмір] = Властивість { назва, значення };
    властивості.розмір += 1;

    вернути;
  }

  місцева дія здійснити_властивість(М: адреса<Машина>, предмет: Значення, назва: Значення, кількість_задіяних: природне, задіяні: памʼять<Значення>, іменовано_задіяні: адреса<ІменованіЗадіяні>, місцезнаходження: Місцезнаходження) -> Значення {
    змінна значення_властивості = отримати_властивість(М, предмет, назва, місцезнаходження);
    якщо М.стан_падіння {
      // звільнити_памʼять(М, задіяні);
      // якщо іменовано_задіяні != пусто {
      //   знищити_іменовано_задіяні(М, іменовано_задіяні);
      // }
      вернути пусто;
    }

    якщо значення_властивості == пусто {
      увімкнути_стан_падіння(
        М, 
        створити_текст(М, "Не влалось здійснити властивість."), 
        місцезнаходження
      );
      // звільнити_памʼять(М, задіяні);
      // якщо іменовано_задіяні != пусто {
      //   знищити_іменовано_задіяні(М, іменовано_задіяні);
      // }
      вернути пусто;
    }

    вернути здійснити(
      М,
      предмет,
      значення_властивості,
      кількість_задіяних,
      задіяні,
      іменовано_задіяні,
      місцезнаходження
    );
  }

  // позначка: прохід по типах предметів
  місцева дія отримати_елемент(М: адреса<Машина>, предмет: Значення, ключ: Значення, місцезнаходження: Місцезнаходження) -> Значення {
    якщо предмет == пусто {
      вернути пусто;
    }

    якщо предмет.тип == М.значення_дійсне {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_послідовність {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_дійсність {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_предмет {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Структура {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Модуль {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Параметр {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Число {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Ціле {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Дробове {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Текст {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Код {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Дія {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Список {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Словник {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Дані {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_ЗмінніДані {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_ДіапазонЦілих {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_ДіапазонДробових {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_ПеребірДіапазонуЦілих {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_ПеребірДіапазонуДробових {
      вернути пусто;
    }

    вернути пусто;
  }

  // позначка: прохід по типах предметів
  місцева дія змінити_елемент(М: адреса<Машина>, предмет: Значення, ключ: Значення, значення: Значення, місцезнаходження: Місцезнаходження) {
    якщо предмет == пусто {
      вернути;
    }

    якщо предмет.тип == М.значення_дійсне {
      вернути;
    }
    
    якщо предмет.тип == М.значення_послідовність {
      вернути;
    }
    
    якщо предмет.тип == М.значення_дійсність {
      вернути;
    }
    
    якщо предмет.тип == М.значення_предмет {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_Структура {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_Модуль {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_Параметр {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_Число {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_Ціле {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_Дробове {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_Текст {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_Код {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_Дія {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_Список {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_Словник {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_Дані {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_ЗмінніДані {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_ДіапазонЦілих {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_ДіапазонДробових {
      вернути;
    }
    
    якщо предмет.тип == М.значення_структура_ПеребірДіапазонуЦілих {
      вернути;
    }

    якщо предмет.тип == М.значення_структура_ПеребірДіапазонуДробових {
      вернути;
    }

    вернути;
  }

  // позначка: прохід по типах предметів
  місцева дія отримати_перебір(М: адреса<Машина>, предмет: Значення, місцезнаходження: Місцезнаходження) -> Значення {
    якщо предмет == пусто {
      вернути пусто;
    }

    якщо предмет.тип == М.значення_дійсне {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_послідовність {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_дійсність {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_предмет {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Структура {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Модуль {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Параметр {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Число {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Ціле {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Дробове {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Текст {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Код {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Дія {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Список {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Словник {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_Дані {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_ЗмінніДані {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_ДіапазонЦілих {
      вернути створити_перебір_діапазону_цілих(М, предмет);
    }
    
    якщо предмет.тип == М.значення_структура_ДіапазонДробових {
      вернути створити_перебір_діапазону_дробових(М, предмет);
    }

    якщо предмет.тип == М.значення_структура_ПеребірДіапазонуЦілих {
      вернути пусто;
    }
    
    якщо предмет.тип == М.значення_структура_ПеребірДіапазонуДробових {
      вернути пусто;
    }

    вернути здійснити_властивість(
      М,
      предмет,
      створити_текст(М, "чародія_перебір"),
      0,
      пусто,
      пусто,
      місцезнаходження
    );
  }

  // позначка: прохід по типах предметів
  місцева дія виконати_текст(М: адреса<Машина>, значення: Значення, місцезнаходження: Місцезнаходження) -> Значення {
    якщо значення == пусто {
      вернути створити_текст(М, "недійсне");
    }

    якщо значення.тип == М.значення_дійсне {
      вернути створити_текст(М, "дійсне");
    }
    
    якщо значення.тип == М.значення_послідовність {
      вернути створити_текст(М, "послідовність");
    }
    
    якщо значення.тип == М.значення_дійсність {
      вернути створити_текст(М, "дійсність");
    }
    
    якщо значення.тип == М.значення_предмет {
      вернути створити_текст(М, "предмет");
    }
    
    якщо значення.тип == М.значення_структура_Структура {
      вернути створити_текст(М, "<Структура>");
    }
    
    якщо значення.тип == М.значення_структура_Модуль {
      вернути створити_текст(М, "<Модуль>");
    }
    
    якщо значення.тип == М.значення_структура_Параметр {
      вернути створити_текст(М, "<Параметр>");
    }
    
    якщо значення.тип == М.значення_структура_Число {
      вернути створити_текст(М, "<Число>");
    }
    
    якщо значення.тип == М.значення_структура_Ціле {
      вернути створити_текст(М, "<Ціле>");
    }
    
    якщо значення.тип == М.значення_структура_Дробове {
      вернути створити_текст(М, "<Дробове>");
    }
    
    якщо значення.тип == М.значення_структура_Текст {
      вернути значення;
    }
    
    якщо значення.тип == М.значення_структура_Код {
      вернути створити_текст(М, "<Код>");
    }
    
    якщо значення.тип == М.значення_структура_Дія {
      вернути створити_текст(М, "<Дія>");
    }
    
    якщо значення.тип == М.значення_структура_Список {
      вернути створити_текст(М, "<Список>");
    }
    
    якщо значення.тип == М.значення_структура_Словник {
      вернути створити_текст(М, "<Словник>");
    }
    
    якщо значення.тип == М.значення_структура_Дані {
      вернути створити_текст(М, "<Дані>");
    }
    
    якщо значення.тип == М.значення_структура_ЗмінніДані {
      вернути створити_текст(М, "<ЗмінніДані>");
    }
    
    якщо значення.тип == М.значення_структура_ДіапазонЦілих {
      вернути створити_текст(М, "<ДіапазонЦілих>");
    }
    
    якщо значення.тип == М.значення_структура_ДіапазонДробових {
      вернути створити_текст(М, "<ДіапазонДробових>");
    }
    
    якщо значення.тип == М.значення_структура_ПеребірДіапазонуЦілих {
      вернути створити_текст(М, "<ПеребірДіапазонуЦілих>");
    }
    
    якщо значення.тип == М.значення_структура_ПеребірДіапазонуДробових {
      вернути створити_текст(М, "<ПеребірДіапазонуДробових>");
    }
    
    вернути пусто;
  }
}