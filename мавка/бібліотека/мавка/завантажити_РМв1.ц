взяти визначення РМв1;
взяти визначення мавка;
взяти визначення мавка/бібліотека;

зовнішня дія мавка_система_відкрити_поширену_бібліотеку(шлях: адреса<ю8>): невідома_адреса;
зовнішня дія мавка_система_закрити_поширену_бібліотеку(поширена_бібліотека: невідома_адреса);
зовнішня дія мавка_система_отримати_символ_поширеної_бібліотеки(поширена_бібліотека: невідома_адреса, назва: адреса<ю8>): невідома_адреса;
зовнішня дія мавка_система_отримати_абсолютний_шлях(шлях: адреса<ю8>, вихід: адреса<ю8>): логічне;

секція мавка {
  секція розширення {
    дія РМв1_вивести_ю8(Р: адреса<РМв1::Розширення>, значення: адреса<ю8>) {
      змінна М = Р.М як адреса<Машина>;
      вивести_ю8(М, значення::вміст);
    }

    дія РМв1_надрукувати_ю8(Р: адреса<РМв1::Розширення>, значення: адреса<ю8>) {
      змінна М = Р.М як адреса<Машина>;
      надрукувати_ю8(М, значення::вміст);
    }

    дія відклик_перед_знищенням_предмета_розширення(М: адреса<Машина>, предмет_розширення: адреса<ПредметРозширення>) {
      змінна Р = предмет_розширення.Р як адреса<РМв1::Розширення>;
      якщо Р.відклик_перед_знищенням != пусто {
        Р.відклик_перед_знищенням(Р);
      }
      знищити_притримувач(М, Р.основний_притримувач як адреса<Накопичувач<адреса<Предмет>>>);
      звільнити(М, Р);
    }

    дія РМв1_почати_спробу(Р: адреса<РМв1::Розширення>): адреса<РМв1::Спроба> {
      вернути почати_спробу(Р.М як адреса<Машина>) як адреса<РМв1::Спроба>;
    }

    дія РМв1_перевірити_чи_стан_падіння(Р: адреса<РМв1::Розширення>): логічне {
      вернути перевірити_чи_стан_падіння(Р.М як адреса<Машина>);
    }

    дія РМв1_увімкнути_стан_падіння(Р: адреса<РМв1::Розширення>, місцезнаходження: адреса<РМв1::Місцезнаходження>) {
      увімкнути_стан_падіння(Р.М як адреса<Машина>, Місцезнаходження { місцезнаходження.шлях як адреса<ПредметТексту>, місцезнаходження.рядок }, пусто);
    }

    дія РМв1_вимкнути_стан_падіння(Р: адреса<РМв1::Розширення>, спроба: адреса<РМв1::Спроба>) {
      вимкнути_стан_падіння(Р.М як адреса<Машина>);
    }

    дія РМв1_отримати_інформацію_падіння(Р: адреса<РМв1::Розширення>, вихід: адреса<адреса<РМв1::ІнформаціяПадіння>>): логічне {
      вихід::вміст = отримати_інформацію_падіння(Р.М як адреса<Машина>) як адреса<РМв1::ІнформаціяПадіння>;
      вернути так;
    }

    дія РМв1_знищити_інформацію_падіння(Р: адреса<РМв1::Розширення>, інформація_падіння: адреса<РМв1::ІнформаціяПадіння>) {
      знищити_інформацію_падіння(Р.М як адреса<Машина>, інформація_падіння як адреса<ІнформаціяПадіння>);
    }

    структура ДаніРідноїДіїРозширення {
      Р: адреса<РМв1::Розширення>;
      рідна_дія: РМв1::РіднаДія;
      дані: невідома_адреса;
      зробити_копію_даних: РМв1::ЗробитиКопіюДанихДії;
      відклик_перед_знищенням: РМв1::ВідкликПередЗнищеннямДії;
    }

    дія рідна_дія_розширення(М: адреса<Машина>, предмет_дії: адреса<ПредметДії>, предмет_я: адреса<Предмет>, кількість_аргументів: позитивне, аргументи: памʼять<адреса<Предмет>>, іменовані_аргументи: адреса<ІменованіАргументи>): адреса<Предмет> {
      змінна дані_рідної_дії_розширення = предмет_дії.дані як адреса<ДаніРідноїДіїРозширення>;
      змінна Р = дані_рідної_дії_розширення.Р;
      змінна результат = дані_рідної_дії_розширення.рідна_дія(Р, предмет_дії як адреса<РМв1::Предмет>, предмет_я як адреса<РМв1::Предмет>, кількість_аргументів, аргументи як памʼять<адреса<РМв1::Предмет>>, іменовані_аргументи як адреса<РМв1::ІменованіАргументи>);
      вернути результат як адреса<Предмет>;
    }

    дія зробити_копію_даних_рідної_дії_розширення(М: адреса<Машина>, предмет_дії: адреса<ПредметДії>): невідома_адреса {
      змінна дані_рідної_дії_розширення = предмет_дії.дані як адреса<ДаніРідноїДіїРозширення>;
      змінна Р = дані_рідної_дії_розширення.Р;
      змінна копія_даних_рідної_дії_розширення = виділити<ДаніРідноїДіїРозширення>(М);
      копія_даних_рідної_дії_розширення.Р = дані_рідної_дії_розширення.Р;
      копія_даних_рідної_дії_розширення.рідна_дія = дані_рідної_дії_розширення.рідна_дія;
      якщо дані_рідної_дії_розширення.зробити_копію_даних == пусто {
        копія_даних_рідної_дії_розширення.дані = дані_рідної_дії_розширення.дані;
      } інакше {
        копія_даних_рідної_дії_розширення.дані = дані_рідної_дії_розширення.зробити_копію_даних(Р, предмет_дії як адреса<РМв1::Предмет>);
      }
      копія_даних_рідної_дії_розширення.зробити_копію_даних = дані_рідної_дії_розширення.зробити_копію_даних;
      копія_даних_рідної_дії_розширення.відклик_перед_знищенням = дані_рідної_дії_розширення.відклик_перед_знищенням;
      вернути копія_даних_рідної_дії_розширення;
    }

    дія відклик_перед_знищенням_рідної_дії_розширення(М: адреса<Машина>, предмет_дії: адреса<ПредметДії>) {
      змінна дані_рідної_дії_розширення = предмет_дії.дані як адреса<ДаніРідноїДіїРозширення>;
      змінна Р = дані_рідної_дії_розширення.Р;
      якщо дані_рідної_дії_розширення.відклик_перед_знищенням != пусто {
        дані_рідної_дії_розширення.відклик_перед_знищенням(Р, предмет_дії як адреса<РМв1::Предмет>);
      }
      звільнити(М, дані_рідної_дії_розширення);
    }

    дія РМв1_створити_рідну_дію(Р: адреса<РМв1::Розширення>, назва: адреса<РМв1::Предмет>, кількість_параметрів: позитивне, параметри: памʼять<адреса<РМв1::Предмет>>, тип_результату: адреса<РМв1::Предмет>, рідна_дія: РМв1::РіднаДія): РМв1::ПредметАбоСтанПадіння {
      змінна М = Р.М як адреса<Машина>;

      змінна дані_рідної_дії_розширення = виділити<ДаніРідноїДіїРозширення>(М);
      дані_рідної_дії_розширення.Р = Р;
      дані_рідної_дії_розширення.рідна_дія = рідна_дія;
      дані_рідної_дії_розширення.дані = пусто;
      дані_рідної_дії_розширення.зробити_копію_даних = пусто;
      дані_рідної_дії_розширення.відклик_перед_знищенням = пусто;

      вернути створити_предмет_рідної_дії(
        М,
        назва як адреса<ПредметТексту>,
        кількість_параметрів,
        параметри як памʼять<адреса<ПредметПараметра>>,
        рідна_дія_розширення,
        дані_рідної_дії_розширення,
        зробити_копію_даних_рідної_дії_розширення,
        відклик_перед_знищенням_рідної_дії_розширення
      ) як адреса<РМв1::Предмет>;
    }

    дія РМв1_отримати_дані_рідної_дії(Р: адреса<РМв1::Розширення>, предмет_дії: адреса<РМв1::Предмет>): невідома_адреса {
      вернути пусто;
    }

    дія РМв1_створити_число(Р: адреса<РМв1::Розширення>, значення: д64): РМв1::ПредметАбоСтанПадіння {
      вернути створити_предмет_числа(Р.М як адреса<Машина>, значення) як адреса<РМв1::Предмет>;
    }

    дія РМв1_створити_текст(Р: адреса<РМв1::Розширення>, значення: адреса<т8>): РМв1::ПредметАбоСтанПадіння {
      вернути створити_предмет_тексту(Р.М як адреса<Машина>, значення::вміст) як адреса<РМв1::Предмет>;
    }

    дія РМв1_створити_текст_без_копіювання(Р: адреса<РМв1::Розширення>, значення: адреса<т8>): РМв1::ПредметАбоСтанПадіння {
      вернути створити_предмет_тексту_без_копіювання(Р.М як адреса<Машина>, значення::вміст) як адреса<РМв1::Предмет>;
    }

    дія РМв1_створити_список(Р: адреса<РМв1::Розширення>, кількість_елементів: позитивне, елементи: памʼять<адреса<РМв1::Предмет>>): РМв1::ПредметАбоСтанПадіння {
      вернути створити_предмет_списку(Р.М як адреса<Машина>, кількість_елементів, /* елементи як памʼять<адреса<Предмет>> */) як адреса<РМв1::Предмет>;
    }

    дія РМв1_створити_словник(Р: адреса<РМв1::Розширення>, кількість_елементів: позитивне, елементи: памʼять<РМв1::ЕлементСловника>): РМв1::ПредметАбоСтанПадіння {
      вернути створити_предмет_словника(Р.М як адреса<Машина>, кількість_елементів, /* елементи як памʼять<ЕлементСловника> */) як адреса<РМв1::Предмет>;
    }

    дія РМв1_створити_байти(Р: адреса<РМв1::Розширення>, розмір: позитивне, дані: памʼять<п8>): РМв1::ПредметАбоСтанПадіння {
      вернути створити_предмет_байтів(Р.М як адреса<Машина>, розмір, дані) як адреса<РМв1::Предмет>;
    }

    дія РМв1_створити_байти_без_копіювання(Р: адреса<РМв1::Розширення>, розмір: позитивне, дані: памʼять<п8>): РМв1::ПредметАбоСтанПадіння {
      вернути створити_предмет_байтів_без_копіювання(Р.М як адреса<Машина>, розмір, дані) як адреса<РМв1::Предмет>;
    }

    дія РМв1_створити_модуль(Р: адреса<РМв1::Розширення>, назва: адреса<РМв1::Предмет>, кількість_елементів: позитивне, елементи: памʼять<РМв1::ЕлементМодуля>): РМв1::ПредметАбоСтанПадіння {
      вернути створити_предмет_модуля(Р.М як адреса<Машина>, назва як адреса<ПредметТексту>, /* кількість_елементів, елементи як памʼять<ЕлементМодуля> */) як адреса<РМв1::Предмет>;
    }

    дія РМв1_створити_параметр(Р: адреса<РМв1::Розширення>, назва: адреса<РМв1::Предмет>, тип: адреса<РМв1::Предмет>): РМв1::ПредметАбоСтанПадіння {
      вернути створити_предмет_параметра(Р.М як адреса<Машина>, назва як адреса<ПредметТексту>, пусто) як адреса<РМв1::Предмет>;
    }

    дія РМв1_предмет_додати(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>, значення: адреса<РМв1::Предмет>, місцезнаходження: адреса<РМв1::Місцезнаходження>): РМв1::ПредметАбоСтанПадіння {
      вернути предмет_додати(Р.М як адреса<Машина>, предмет як адреса<Предмет>, значення як адреса<Предмет>, Місцезнаходження { місцезнаходження.шлях як адреса<ПредметТексту>, місцезнаходження.рядок }) як адреса<РМв1::Предмет>;
    }

    дія РМв1_предмет_відняти(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>, значення: адреса<РМв1::Предмет>, місцезнаходження: адреса<РМв1::Місцезнаходження>): РМв1::ПредметАбоСтанПадіння {
      вернути предмет_відняти(Р.М як адреса<Машина>, предмет як адреса<Предмет>, значення як адреса<Предмет>, Місцезнаходження { місцезнаходження.шлях як адреса<ПредметТексту>, місцезнаходження.рядок }) як адреса<РМв1::Предмет>;
    }

    дія РМв1_предмет_помножити(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>, значення: адреса<РМв1::Предмет>, місцезнаходження: адреса<РМв1::Місцезнаходження>): РМв1::ПредметАбоСтанПадіння {
      вернути предмет_помножити(Р.М як адреса<Машина>, предмет як адреса<Предмет>, значення як адреса<Предмет>, Місцезнаходження { місцезнаходження.шлях як адреса<ПредметТексту>, місцезнаходження.рядок }) як адреса<РМв1::Предмет>;
    }

    дія РМв1_предмет_поділити(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>, значення: адреса<РМв1::Предмет>, місцезнаходження: адреса<РМв1::Місцезнаходження>): РМв1::ПредметАбоСтанПадіння {
      вернути предмет_поділити(Р.М як адреса<Машина>, предмет як адреса<Предмет>, значення як адреса<Предмет>, Місцезнаходження { місцезнаходження.шлях як адреса<ПредметТексту>, місцезнаходження.рядок }) як адреса<РМв1::Предмет>;
    }

    дія РМв1_предмет_остача(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>, значення: адреса<РМв1::Предмет>, місцезнаходження: адреса<РМв1::Місцезнаходження>): РМв1::ПредметАбоСтанПадіння {
      вернути предмет_остача(Р.М як адреса<Машина>, предмет як адреса<Предмет>, значення як адреса<Предмет>, Місцезнаходження { місцезнаходження.шлях як адреса<ПредметТексту>, місцезнаходження.рядок }) як адреса<РМв1::Предмет>;
    }

    дія РМв1_предмет_неповна_частка(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>, значення: адреса<РМв1::Предмет>, місцезнаходження: адреса<РМв1::Місцезнаходження>): РМв1::ПредметАбоСтанПадіння {
      вернути предмет_неповна_частка(Р.М як адреса<Машина>, предмет як адреса<Предмет>, значення як адреса<Предмет>, Місцезнаходження { місцезнаходження.шлях як адреса<ПредметТексту>, місцезнаходження.рядок }) як адреса<РМв1::Предмет>;
    }

    дія РМв1_предмет_степінь(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>, значення: адреса<РМв1::Предмет>, місцезнаходження: адреса<РМв1::Місцезнаходження>): РМв1::ПредметАбоСтанПадіння {
      вернути предмет_степінь(Р.М як адреса<Машина>, предмет як адреса<Предмет>, значення як адреса<Предмет>, Місцезнаходження { місцезнаходження.шлях як адреса<ПредметТексту>, місцезнаходження.рядок }) як адреса<РМв1::Предмет>;
    }

    дія РМв1_предмет_зсунути_вліво(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>, значення: адреса<РМв1::Предмет>, місцезнаходження: адреса<РМв1::Місцезнаходження>): РМв1::ПредметАбоСтанПадіння {
      вернути предмет_зсунути_вліво(Р.М як адреса<Машина>, предмет як адреса<Предмет>, значення як адреса<Предмет>, Місцезнаходження { місцезнаходження.шлях як адреса<ПредметТексту>, місцезнаходження.рядок }) як адреса<РМв1::Предмет>;
    }

    дія РМв1_предмет_зсунути_вправо(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>, значення: адреса<РМв1::Предмет>, місцезнаходження: адреса<РМв1::Місцезнаходження>): РМв1::ПредметАбоСтанПадіння {
      вернути предмет_зсунути_вправо(Р.М як адреса<Машина>, предмет як адреса<Предмет>, значення як адреса<Предмет>, Місцезнаходження { місцезнаходження.шлях як адреса<ПредметТексту>, місцезнаходження.рядок }) як адреса<РМв1::Предмет>;
    }

    дія РМв1_предмет_зсунути_вправо_2(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>, значення: адреса<РМв1::Предмет>, місцезнаходження: адреса<РМв1::Місцезнаходження>): РМв1::ПредметАбоСтанПадіння {
      вернути предмет_зсунути_вправо_2(Р.М як адреса<Машина>, предмет як адреса<Предмет>, значення як адреса<Предмет>, Місцезнаходження { місцезнаходження.шлях як адреса<ПредметТексту>, місцезнаходження.рядок }) як адреса<РМв1::Предмет>;
    }

    дія РМв1_предмет_двійкове_і(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>, значення: адреса<РМв1::Предмет>, місцезнаходження: адреса<РМв1::Місцезнаходження>): РМв1::ПредметАбоСтанПадіння {
      вернути предмет_двійкове_і(Р.М як адреса<Машина>, предмет як адреса<Предмет>, значення як адреса<Предмет>, Місцезнаходження { місцезнаходження.шлях як адреса<ПредметТексту>, місцезнаходження.рядок }) як адреса<РМв1::Предмет>;
    }

    дія РМв1_предмет_двійкове_або(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>, значення: адреса<РМв1::Предмет>, місцезнаходження: адреса<РМв1::Місцезнаходження>): РМв1::ПредметАбоСтанПадіння {
      вернути предмет_двійкове_або(Р.М як адреса<Машина>, предмет як адреса<Предмет>, значення як адреса<Предмет>, Місцезнаходження { місцезнаходження.шлях як адреса<ПредметТексту>, місцезнаходження.рядок }) як адреса<РМв1::Предмет>;
    }

    дія РМв1_предмет_двійкове_виключне_або(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>, значення: адреса<РМв1::Предмет>, місцезнаходження: адреса<РМв1::Місцезнаходження>): РМв1::ПредметАбоСтанПадіння {
      вернути предмет_двійкове_виключне_або(Р.М як адреса<Машина>, предмет як адреса<Предмет>, значення як адреса<Предмет>, Місцезнаходження { місцезнаходження.шлях як адреса<ПредметТексту>, місцезнаходження.рядок }) як адреса<РМв1::Предмет>;
    }

    дія РМв1_предмет_двійкове_заперечення(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>, місцезнаходження: адреса<РМв1::Місцезнаходження>): РМв1::ПредметАбоСтанПадіння {
      вернути предмет_двійкове_заперечення(Р.М як адреса<Машина>, предмет як адреса<Предмет>, Місцезнаходження { місцезнаходження.шлях як адреса<ПредметТексту>, місцезнаходження.рядок }) як адреса<РМв1::Предмет>;
    }

    дія РМв1_предмет_менше(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>, значення: адреса<РМв1::Предмет>, місцезнаходження: адреса<РМв1::Місцезнаходження>): РМв1::ПредметАбоСтанПадіння {
      вернути предмет_менше(Р.М як адреса<Машина>, предмет як адреса<Предмет>, значення як адреса<Предмет>, Місцезнаходження { місцезнаходження.шлях як адреса<ПредметТексту>, місцезнаходження.рядок }) як адреса<РМв1::Предмет>;
    }

    дія РМв1_предмет_більше(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>, значення: адреса<РМв1::Предмет>, місцезнаходження: адреса<РМв1::Місцезнаходження>): РМв1::ПредметАбоСтанПадіння {
      вернути предмет_більше(Р.М як адреса<Машина>, предмет як адреса<Предмет>, значення як адреса<Предмет>, Місцезнаходження { місцезнаходження.шлях як адреса<ПредметТексту>, місцезнаходження.рядок }) як адреса<РМв1::Предмет>;
    }

    дія РМв1_предмет_містить(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>, значення: адреса<РМв1::Предмет>, місцезнаходження: адреса<РМв1::Місцезнаходження>): РМв1::ПредметАбоСтанПадіння {
      вернути предмет_містить(Р.М як адреса<Машина>, предмет як адреса<Предмет>, значення як адреса<Предмет>, Місцезнаходження { місцезнаходження.шлях як адреса<ПредметТексту>, місцезнаходження.рядок }) як адреса<РМв1::Предмет>;
    }

    дія РМв1_предмет_числова_негація(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>, місцезнаходження: адреса<РМв1::Місцезнаходження>): РМв1::ПредметАбоСтанПадіння {
      вернути предмет_числова_негація(Р.М як адреса<Машина>, предмет як адреса<Предмет>, Місцезнаходження { місцезнаходження.шлях як адреса<ПредметТексту>, місцезнаходження.рядок }) як адреса<РМв1::Предмет>;
    }

    дія РМв1_предмет_отримати_число(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>, місцезнаходження: адреса<РМв1::Місцезнаходження>): РМв1::ПредметАбоСтанПадіння {
      вернути предмет_отримати_число(Р.М як адреса<Машина>, предмет як адреса<Предмет>, Місцезнаходження { місцезнаходження.шлях як адреса<ПредметТексту>, місцезнаходження.рядок }) як адреса<РМв1::Предмет>;
    }

    дія РМв1_предмет_отримати_текст(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>, місцезнаходження: адреса<РМв1::Місцезнаходження>): РМв1::ПредметАбоСтанПадіння {
      вернути предмет_отримати_текст(Р.М як адреса<Машина>, предмет як адреса<Предмет>, Місцезнаходження { місцезнаходження.шлях як адреса<ПредметТексту>, місцезнаходження.рядок }) як адреса<РМв1::Предмет>;
    }

    дія РМв1_предмет_отримати_перебір(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>, місцезнаходження: адреса<РМв1::Місцезнаходження>): РМв1::ПредметАбоСтанПадіння {
      вернути предмет_отримати_перебір(Р.М як адреса<Машина>, предмет як адреса<Предмет>, Місцезнаходження { місцезнаходження.шлях як адреса<ПредметТексту>, місцезнаходження.рядок }) як адреса<РМв1::Предмет>;
    }

    дія РМв1_предмет_отримати_діапазон(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>, включно: логічне, до: адреса<РМв1::Предмет>, місцезнаходження: адреса<РМв1::Місцезнаходження>): РМв1::ПредметАбоСтанПадіння {
      вернути предмет_отримати_діапазон(Р.М як адреса<Машина>, предмет як адреса<Предмет>, включно, до як адреса<Предмет>, Місцезнаходження { місцезнаходження.шлях як адреса<ПредметТексту>, місцезнаходження.рядок }) як адреса<РМв1::Предмет>;
    }

    дія РМв1_перевірити_чи_предмет_є_дією(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>): логічне {
      вернути перевірити_чи_предмет_є_дією(Р.М як адреса<Машина>, предмет як адреса<Предмет>);
    }

    дія РМв1_перевірити_чи_предмет_є_числом(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>): логічне {
      вернути перевірити_чи_предмет_є_числом(Р.М як адреса<Машина>, предмет як адреса<Предмет>);
    }

    дія РМв1_перевірити_чи_предмет_є_текстом(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>): логічне {
      вернути перевірити_чи_предмет_є_текстом(Р.М як адреса<Машина>, предмет як адреса<Предмет>);
    }

    дія РМв1_перевірити_чи_предмет_є_списком(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>): логічне {
      вернути перевірити_чи_предмет_є_списком(Р.М як адреса<Машина>, предмет як адреса<Предмет>);
    }

    дія РМв1_перевірити_чи_предмет_є_словником(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>): логічне {
      вернути перевірити_чи_предмет_є_словником(Р.М як адреса<Машина>, предмет як адреса<Предмет>);
    }

    дія РМв1_перевірити_чи_предмет_є_байтами(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>): логічне {
      вернути перевірити_чи_предмет_є_байтами(Р.М як адреса<Машина>, предмет як адреса<Предмет>);
    }

    дія РМв1_перевірити_чи_предмет_є_модулем(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>): логічне {
      вернути перевірити_чи_предмет_є_модулем(Р.М як адреса<Машина>, предмет як адреса<Предмет>);
    }

    дія РМв1_перевірити_чи_предмет_є_параметром(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>): логічне {
      вернути перевірити_чи_предмет_є_параметром(Р.М як адреса<Машина>, предмет як адреса<Предмет>);
    }

    дія РМв1_отримати_значення_числа(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>): д64 {
      вернути отримати_значення_числа(Р.М як адреса<Машина>, предмет як адреса<ПредметЧисла>);
    }

    дія РМв1_отримати_значення_тексту(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>, вихід: адреса<т8>) {
      вихід::вміст = отримати_значення_тексту(Р.М як адреса<Машина>, предмет як адреса<ПредметТексту>);
    }

    дія РМв1_отримати_копію_значення_тексту(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>, вихід: адреса<т8>): логічне {
      вернути отримати_копію_значення_тексту(Р.М як адреса<Машина>, предмет як адреса<ПредметТексту>, вихід);
    }

    дія РМв1_отримати_копію_елементів_списку(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>, вихід: адреса<РМв1::ЕлементиСписку>): логічне {
      вернути отримати_копію_елементів_списку(Р.М як адреса<Машина>, предмет як адреса<ПредметСписку>, вихід як адреса<ЕлементиСписку>);
    }

    дія РМв1_отримати_копію_елементів_словника(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>, вихід: адреса<РМв1::ЕлементиСловника>): логічне {
      вернути отримати_копію_елементів_словника(Р.М як адреса<Машина>, предмет як адреса<ПредметСловника>, вихід як адреса<ЕлементиСловника>);
    }

    дія РМв1_отримати_значення_байтів(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>, вихід: адреса<РМв1::Байти>) {
      змінна байти = отримати_значення_байтів(Р.М як адреса<Машина>, предмет як адреса<ПредметБайтів>);
      вихід::вміст = РМв1::Байти { байти.розмір, байти.дані };
    }

    дія РМв1_отримати_копію_значення_байтів(Р: адреса<РМв1::Розширення>, предмет: адреса<РМв1::Предмет>, вихід: адреса<РМв1::Байти>): логічне {
      вернути отримати_копію_значення_байтів(Р.М як адреса<Машина>, предмет як адреса<ПредметБайтів>, вихід як адреса<Байти>);
    }

    дія РМв1_покласти_притримувач(Р: адреса<РМв1::Розширення>): адреса<РМв1::ПритримувачПредметів> {
      вернути покласти_притримувач(Р.М як адреса<Машина>) як адреса<РМв1::ПритримувачПредметів>;
    }

    дія РМв1_притримати(Р: адреса<РМв1::Розширення>, притримувач: адреса<РМв1::ПритримувачПредметів>, предмет: адреса<РМв1::Предмет>) {
      притримати(Р.М як адреса<Машина>, притримувач як адреса<Накопичувач<адреса<Предмет>>>, предмет як адреса<Предмет>);
    }

    дія РМв1_відпустити(Р: адреса<РМв1::Розширення>, притримувач: адреса<РМв1::ПритримувачПредметів>) {
      відпустити(Р.М як адреса<Машина>, притримувач як адреса<Накопичувач<адреса<Предмет>>>);
    }

    дія РМв1_забрати_притримувач(Р: адреса<РМв1::Розширення>) {
      забрати_притримувач(Р як адреса<Машина>);
    }

    дія РМв1_назва(Р: адреса<РМв1::Розширення>, значення: адреса<т8>): адреса<РМв1::Предмет> {
      змінна М = Р.М як адреса<Машина>;

      вернути створити_назву(М, значення::вміст) як адреса<РМв1::Предмет>;
    }

    місцева дія виконати_завантаження_РМв1(М: адреса<Машина>, дія_завантаження_РМв1: (Р: адреса<РМв1::Розширення>) -> РМв1::ПредметАбоСтанПадіння) -> ПредметАбоСтанПадіння<Предмет> {
      змінна Р = виділити<РМв1::Розширення>(М);
      Р.М = М;
      Р.основний_притримувач = створити_притримувач(М) як адреса<РМв1::ПритримувачПредметів>;
      Р.дані = пусто;
      Р.відклик_перед_знищенням = пусто;
      Р.вивести_ю8 = РМв1_вивести_ю8;
      Р.надрукувати_ю8 = РМв1_надрукувати_ю8;
      Р.почати_спробу = РМв1_почати_спробу;
      Р.перевірити_чи_стан_падіння = РМв1_перевірити_чи_стан_падіння;
      Р.увімкнути_стан_падіння = РМв1_увімкнути_стан_падіння;
      Р.вимкнути_стан_падіння = РМв1_вимкнути_стан_падіння;
      Р.отримати_інформацію_падіння = РМв1_отримати_інформацію_падіння;
      Р.знищити_інформацію_падіння = РМв1_знищити_інформацію_падіння;
      Р.предмет_логічного_так = М.предмет_логічного_так як адреса<РМв1::Предмет>;
      Р.предмет_логічного_ні = М.предмет_логічного_ні як адреса<РМв1::Предмет>;
      Р.створити_рідну_дію = РМв1_створити_рідну_дію;
      Р.отримати_дані_рідної_дії = РМв1_отримати_дані_рідної_дії;
      Р.створити_число = РМв1_створити_число;
      Р.створити_текст = РМв1_створити_текст;
      Р.створити_текст_без_копіювання = РМв1_створити_текст_без_копіювання;
      Р.створити_список = РМв1_створити_список;
      Р.створити_словник = РМв1_створити_словник;
      Р.створити_байти = РМв1_створити_байти;
      Р.створити_байти_без_копіювання = РМв1_створити_байти_без_копіювання;
      Р.створити_модуль = РМв1_створити_модуль;
      Р.створити_параметр = РМв1_створити_параметр;
      Р.предмет_додати = РМв1_предмет_додати;
      Р.предмет_відняти = РМв1_предмет_відняти;
      Р.предмет_помножити = РМв1_предмет_помножити;
      Р.предмет_поділити = РМв1_предмет_поділити;
      Р.предмет_остача = РМв1_предмет_остача;
      Р.предмет_неповна_частка = РМв1_предмет_неповна_частка;
      Р.предмет_степінь = РМв1_предмет_степінь;
      Р.предмет_зсунути_вліво = РМв1_предмет_зсунути_вліво;
      Р.предмет_зсунути_вправо = РМв1_предмет_зсунути_вправо;
      Р.предмет_зсунути_вправо_2 = РМв1_предмет_зсунути_вправо_2;
      Р.предмет_двійкове_і = РМв1_предмет_двійкове_і;
      Р.предмет_двійкове_або = РМв1_предмет_двійкове_або;
      Р.предмет_двійкове_виключне_або = РМв1_предмет_двійкове_виключне_або;
      Р.предмет_двійкове_заперечення = РМв1_предмет_двійкове_заперечення;
      Р.предмет_менше = РМв1_предмет_менше;
      Р.предмет_більше = РМв1_предмет_більше;
      Р.предмет_містить = РМв1_предмет_містить;
      Р.предмет_числова_негація = РМв1_предмет_числова_негація;
      Р.предмет_отримати_число = РМв1_предмет_отримати_число;
      Р.предмет_отримати_текст = РМв1_предмет_отримати_текст;
      Р.предмет_отримати_перебір = РМв1_предмет_отримати_перебір;
      Р.предмет_отримати_діапазон = РМв1_предмет_отримати_діапазон;
      Р.перевірити_чи_предмет_є_дією = РМв1_перевірити_чи_предмет_є_дією;
      Р.перевірити_чи_предмет_є_числом = РМв1_перевірити_чи_предмет_є_числом;
      Р.перевірити_чи_предмет_є_текстом = РМв1_перевірити_чи_предмет_є_текстом;
      Р.перевірити_чи_предмет_є_списком = РМв1_перевірити_чи_предмет_є_списком;
      Р.перевірити_чи_предмет_є_словником = РМв1_перевірити_чи_предмет_є_словником;
      Р.перевірити_чи_предмет_є_байтами = РМв1_перевірити_чи_предмет_є_байтами;
      Р.перевірити_чи_предмет_є_модулем = РМв1_перевірити_чи_предмет_є_модулем;
      Р.перевірити_чи_предмет_є_параметром = РМв1_перевірити_чи_предмет_є_параметром;
      Р.отримати_значення_числа = РМв1_отримати_значення_числа;
      Р.отримати_значення_тексту = РМв1_отримати_значення_тексту;
      Р.отримати_копію_значення_тексту = РМв1_отримати_копію_значення_тексту;
      Р.отримати_копію_елементів_списку = РМв1_отримати_копію_елементів_списку;
      Р.отримати_копію_елементів_словника = РМв1_отримати_копію_елементів_словника;
      Р.отримати_значення_байтів = РМв1_отримати_значення_байтів;
      Р.отримати_копію_значення_байтів = РМв1_отримати_копію_значення_байтів;
      Р.покласти_притримувач = РМв1_покласти_притримувач;
      Р.притримати = РМв1_притримати;
      Р.відпустити = РМв1_відпустити;
      Р.забрати_притримувач = РМв1_забрати_притримувач;
      Р.назва = РМв1_назва;
      змінна результат = дія_завантаження_РМв1(Р);
      якщо перевірити_чи_стан_падіння(М) {
        вернути пусто;
      }
      змінна результат_створення_розширення = створити_предмет_розширення(
        М,
        Р,
        результат як адреса<Предмет>,
        відклик_перед_знищенням_предмета_розширення,
        Р.основний_притримувач як адреса<Накопичувач<адреса<Предмет>>>
      ) як адреса<Предмет>;
      якщо перевірити_чи_стан_падіння(М) {
        звільнити(М, Р);
      }
      вернути результат_створення_розширення;
    }
  }

  секція бібліотека {
    дія завантажити_РМв1_шлях_ю8(М: адреса<Машина>, шлях_ю8: ю8) -> ПредметАбоСтанПадіння<Предмет> {
      змінна шлях_до_файлу = ю8 { 0, пусто };
      мавка_система_отримати_абсолютний_шлях(шлях_ю8::адреса, шлях_до_файлу::адреса);
      змінна взятий_предмет: адреса<Предмет> = пусто;
      якщо отримати_взятий_предмет(М, створити_предмет_шляху(М, створити_предмет_байтів(М, шлях_до_файлу.розмір, шлях_до_файлу.дані)) як адреса<Предмет>, взятий_предмет::адреса) {
        звільнити_памʼять(М, шлях_до_файлу.дані);
        вернути взятий_предмет;
      }
      змінна поширена_бібліотека = мавка_система_відкрити_поширену_бібліотеку(шлях_до_файлу::адреса);
      якщо поширена_бібліотека == пусто {
        звільнити_памʼять(М, шлях_до_файлу.дані);
        вернути результат_стан_падіння(М, Місцезнаходження { пусто як адреса<ПредметТексту>, 0 }, створити_предмет_тексту(М, "Не вдалось відкрити поширену бібліотеку") як адреса<Предмет>);
      }
      змінна назва_символа = ю8"завантажити_РМв1";
      змінна символ_завантажити_РМв1 = мавка_система_отримати_символ_поширеної_бібліотеки(поширена_бібліотека, назва_символа::адреса);
      якщо символ_завантажити_РМв1 == пусто {
        звільнити_памʼять(М, шлях_до_файлу.дані);
        мавка_система_закрити_поширену_бібліотеку(поширена_бібліотека);
        вернути результат_стан_падіння(М, Місцезнаходження { пусто як адреса<ПредметТексту>, 0 }, створити_предмет_тексту(М, "Не вдалось отримати символ поширеної бібліотеки") як адреса<Предмет>);
      }
      змінна дія_завантаження_РМв1 = символ_завантажити_РМв1 як (Р: адреса<РМв1::Розширення>) -> РМв1::ПредметАбоСтанПадіння;
      змінна результат_РМв1 = розширення::виконати_завантаження_РМв1(М, дія_завантаження_РМв1);
      якщо перевірити_чи_стан_падіння(М) == ні {
        покласти_взятий_предмет(М, створити_предмет_шляху(М, створити_предмет_байтів(М, шлях_до_файлу.розмір, шлях_до_файлу.дані)) як адреса<Предмет>, результат_РМв1 як адреса<Предмет>);
      }
      звільнити_памʼять(М, шлях_до_файлу.дані);
      вернути результат_РМв1 як адреса<Предмет>;
    }

    дія рідна_дія_завантажити_РМв1(М: адреса<Машина>, предмет_дії: адреса<ПредметДії>, предмет_я: адреса<Предмет>, кількість_аргументів: позитивне, аргументи: памʼять<адреса<Предмет>>, іменовані_аргументи: адреса<ІменованіАргументи>) -> ПредметАбоСтанПадіння<Предмет> {
      змінна аргумент_шлях: адреса<Предмет> = пусто;
      змінна знайдено_аргумент_шлях = ні;
      якщо іменовані_аргументи != пусто {
        знайдено_аргумент_шлях = знайти_іменований_аргумент(М, іменовані_аргументи, створити_назву(М, "шлях"), аргумент_шлях::адреса);
      }
      якщо кількість_аргументів > 0 {
        якщо знайдено_аргумент_шлях == ні {
          аргумент_шлях = аргументи[0];
          знайдено_аргумент_шлях = так;
        }
      }
      якщо знайдено_аргумент_шлях == ні {
        вернути результат_стан_падіння(М, Місцезнаходження { пусто як адреса<ПредметШляху>, 0 }, створити_предмет_тексту(М, "Пропущено аргумент \"шлях\"") як адреса<Предмет>);
      }
      змінна шлях_ю8 = ю8 { 0, пусто };
      якщо аргумент_шлях.тип == М.предмет_структури_текст {
        змінна шлях_текст = аргумент_шлях як адреса<ПредметТексту>;
        якщо перекодувати_т8_в_ю8(М, ОпціїПерекодуванняТ8вЮ8 { з_кінцем = ні }, шлях_текст.значення, шлях_ю8::адреса, пусто, пусто) == ні {
          вернути результат_стан_падіння(М, Місцезнаходження { пусто як адреса<ПредметШляху>, 0 }, створити_предмет_тексту(М, "Не вдалось отримати ю8 з шляху") як адреса<Предмет>);
        }
      } інакше {
        вернути результат_стан_падіння(М, Місцезнаходження { пусто як адреса<ПредметШляху>, 0 }, створити_предмет_тексту(М, "Аргумент \"шлях\" може містити лише текст") як адреса<Предмет>);
      }
      змінна результат = завантажити_РМв1_шлях_ю8(М, шлях_ю8);
      звільнити_памʼять(М, шлях_ю8.дані);
      вернути результат;
    }

    місцева дія створити_рідну_дію_бібліотеки_мавка_завантажити_РМв1(М: адреса<Машина>, предмет_модуля: адреса<Предмет>) -> ПредметАбоСтанПадіння<Предмет> {

      змінна параметр_шлях = створити_предмет_параметра(М, створити_назву(М, "шлях"), пусто);
      змінна дані_параметрів_метода_завантажити_РМв1 = виділити_памʼять<адреса<ПредметПараметра>>(М, 1);
      дані_параметрів_метода_завантажити_РМв1[0] = параметр_шлях;
      змінна предмет_дії_метода_завантажити_РМв1 = створити_предмет_рідної_дії(М, створити_назву(М, "завантажити_РМв1"), 1, дані_параметрів_метода_завантажити_РМв1, рідна_дія_завантажити_РМв1, пусто, пусто, пусто) як адреса<Предмет>;
      вернути предмет_дії_метода_завантажити_РМв1 як адреса<Предмет>;
    }
  }
}