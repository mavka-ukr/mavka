# Мавка

Сучасна українська мова програмування.

## Будування

Треба:

- GNU/Linux
- Ціль _0.49.0_
- Clang
- Zig (для "крос-компіляції" для AArch64/Windows/MacOS)

```shell
sh scripts/build.sh debug linux-x86_64

./будування/{ВЕРСІЯ}/лінукс-ікс86_64/готове/мавка
```

Будування відбувається лише через GNU/Linux, так як Ціль наразі доступна лише там.
Мавку можна збудувати на різні платформи, але працездатність перевіряється насамперед на `linux-x86_64`.
Можливості на платформах відмінних від `linux-x86_64` можуть бути обмеженими.

Доступні режими будування:

- `debug`
- `release`

Доступні платформи будування:

- `linux-x86_64`
- `linux-aarch64`
- `windows-x86_64`
- `windows-aarch64`
- `macos-x86_64`
- `macos-aarch64`

## Пакування

Після будування можна зробити файли для випуску:

```shell
sh scripts/package.sh linux-x86_64
```

## Розробка

Мавку написано мовою Ціль. Але.
Деякі частини, такі як взаємодія з операційною системою (Linux/MacOS/Windows), написані мовою _C (eng)_ (інакше робити немає сенсу).
Тому під час розробки це треба мати наувазі - використання _C (eng)_ лише для крайньої необхідності.

Усі файли, що написані мовою _C (eng)_, розташовуються в папці `external` та підпапках відповідно до ОС.

Мавка, як і Ціль, майже не використовує Unicode - лише у випадках, де без нього не обійтись.
До прикладу, Машина Мавки взагалі не використовує Unicode.
Натомість використовується [КД (Дієкод)](https://xn--80aqreid0b.xn--80aaf6ah.xn--j1amh/2025-01-03-%D0%B4%D1%96%D1%94%D0%BA%D0%BE%D0%B4.html).

По причині того, що всі редактори і ОС за замовчуванням зберігають текстові файли використовуючи Unicode,
у Мавці на вхід передаються саме Unicode-файли (UTF-8),
але вони надалі перекодовуються в КД. І вже під час розбору (і далі) Unicode не використовується.
По-суті, Unicode використовується лише для входу і виходу в ОС. Цього позбутись, щонайменше на Linux/MacOS/Windows, не вийде.

ДУЖЕ ВАЖЛИВО: так як Ціль ще не має досконалої підтримки зовнішніх дій для взаємодії з _C (eng)_, усі значення які передаються через аргументи
мають бути не менше 64 біт! Тобто, якщо є потреба передати `логічне`, то його треба передавати як `природне`. Також це стосується адреси на `логічне` - не `логічне*`, а `природне*`. Приклад: `пристрій_мавки_читати_кд`.
В загальному: усі значення, окрім адреси, треба передавати як `природне`, `ціле` або `д64`. Але, якщо передається буфер, типу `памʼять<п8>`, тоді це нормально передавати його як `п8*`. Саме це є причиною, чому розширення зараз стабільними зробити не вийде.
