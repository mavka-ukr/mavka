взяти визначення МаМа/Вказівки/В1;
взяти визначення біб/Виділяч;
взяти визначення біб/Друк;

дія система_МаМа_Вказівки_В1_виділити_сиру_памʼять(система: адреса<МаМа::Вказівки::В1::Система>, розмір: натуральне) -> памʼять<н8> {
  змінна виділяч = система.дані як адреса<біб::Виділяч>;
  вернути біб::виділити_памʼять<н8>(виділяч, розмір);
}

дія система_МаМа_Вказівки_В1_перевиділити_сиру_памʼять(система: адреса<МаМа::Вказівки::В1::Система>, значення: памʼять<н8>, новий_розмір: натуральне) -> памʼять<н8> {
  змінна виділяч = система.дані як адреса<біб::Виділяч>;
  вернути біб::перевиділити_памʼять<н8>(виділяч, значення, новий_розмір);
}

дія система_МаМа_Вказівки_В1_звільнити_сиру_памʼять(система: адреса<МаМа::Вказівки::В1::Система>, значення: памʼять<н8>) {
  змінна виділяч = система.дані як адреса<біб::Виділяч>;
  біб::звільнити_памʼять(виділяч, значення як невідома_памʼять);
}

дія потік_виводу_вивести(потік_виводу: адреса<МаМа::Вказівки::В1::ПотікВиводу>, значення: т8) {
  біб::вивести(значення);
}

дія потік_виводу_вивести_ю8(потік_виводу: адреса<МаМа::Вказівки::В1::ПотікВиводу>, значення: ю8) {
  біб::вивести_ю8(значення);
}

дія потік_виводу_вивести_ц64(потік_виводу: адреса<МаМа::Вказівки::В1::ПотікВиводу>, значення: ц64) {
  біб::вивести_позитивне(натуральне(значення));
}

дія потік_виводу_вивести_н64(потік_виводу: адреса<МаМа::Вказівки::В1::ПотікВиводу>, значення: н64) {
  біб::вивести_позитивне(натуральне(значення));
}

дія потік_виводу_вивести_р64(потік_виводу: адреса<МаМа::Вказівки::В1::ПотікВиводу>, значення: р64) {
  біб::вивести_позитивне(натуральне(значення));
}

зовнішня дія запустити_мавку(кількість_аргументів: ц32, аргументи: памʼять<ю8>): ц32 {
  змінна системний_виділяч = біб::отримати_системний_виділяч();

  змінна система = МаМа::Вказівки::В1::Система {
    дані = системний_виділяч,
    виділити_сиру_памʼять = система_МаМа_Вказівки_В1_виділити_сиру_памʼять,
    перевиділити_сиру_памʼять = система_МаМа_Вказівки_В1_перевиділити_сиру_памʼять,
    звільнити_сиру_памʼять = система_МаМа_Вказівки_В1_звільнити_сиру_памʼять,
  };
  змінна код1 = МаМа::Вказівки::В1::створити_код(система::адреса);
  МаМа::Вказівки::В1::покласти_вказівку_ПокластиКонстанту(код1, 0, 1123312121);

  змінна код0 = МаМа::Вказівки::В1::створити_код(система::адреса);
  МаМа::Вказівки::В1::покласти_константу_числа(код0, 111.111);
  МаМа::Вказівки::В1::покласти_константу_юнікоду(код0, ю8"124991119");
  МаМа::Вказівки::В1::покласти_константу_тексту(код0, "ааа");
  МаМа::Вказівки::В1::покласти_константу_коду(код0, код1);
  МаМа::Вказівки::В1::покласти_константу_числа(код0, 43820);

  змінна код = МаМа::Вказівки::В1::створити_код(система::адреса);
  МаМа::Вказівки::В1::покласти_константу_числа(код, 12.3);
  МаМа::Вказівки::В1::покласти_константу_числа(код, р64(444.0));
  МаМа::Вказівки::В1::покласти_константу_тексту(код, "привіт");
  МаМа::Вказівки::В1::покласти_константу_юнікоду(код, ю8"#");
  МаМа::Вказівки::В1::покласти_константу_коду(код, код0);
  МаМа::Вказівки::В1::покласти_константу_юнікоду(код, ю8"пдловпдва");

  МаМа::Вказівки::В1::покласти_вказівку_ПокластиПусто(код, 0);
  МаМа::Вказівки::В1::покласти_вказівку_ПокластиПусто(код, 0);
  МаМа::Вказівки::В1::покласти_вказівку_Додати(код, 0);
  МаМа::Вказівки::В1::покласти_вказівку_ПокластиПусто(код, 0);
  МаМа::Вказівки::В1::покласти_вказівку_Відняти(код, 0);
  МаМа::Вказівки::В1::покласти_вказівку_Виконати(код, 32, 1, 2);

  змінна пок = МаМа::Вказівки::В1::ПереноснийОбразКоду { 0, пусто };
  МаМа::Вказівки::В1::зробити_переносний_образ_коду(система::адреса, код, пок::адреса);


  змінна потік_виводу = МаМа::Вказівки::В1::ПотікВиводу {
    дані = системний_виділяч,
    вивести = потік_виводу_вивести,
    вивести_ю8 = потік_виводу_вивести_ю8,
    вивести_ц64 = потік_виводу_вивести_ц64,
    вивести_н64 = потік_виводу_вивести_н64,
    вивести_р64 = потік_виводу_вивести_р64,
  };

  МаМа::Вказівки::В1::вивести_переносний_образ_коду(потік_виводу::адреса, пок);

  вернути 0;
}