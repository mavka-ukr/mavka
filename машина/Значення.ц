взяти означення мавка;
взяти означення КД;

простір мавка {
  місцева дія здійснити(
    М: адреса<Машина>,
    здійснювач: Значення,
    значення: Значення,
    задіяні: Задіяні,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо значення.вид == ЗНедійсне {
      увімкнути_стан_падіння(
        М,
        значення_предмет(створити_текст(М, "Неможливо здійснити значення \"недійсне\".")),
        місцезнаходження
      );
      вернути значення_недійсне();
    }

    якщо значення.вид == ЗДійсне {
      увімкнути_стан_падіння(
        М,
        значення_предмет(створити_текст(М, "Неможливо здійснити значення \"дійсне\".")),
        місцезнаходження
      );
      вернути значення_недійсне();
    }

    якщо значення.вид == ЗЦіле {
      увімкнути_стан_падіння(
        М,
        значення_предмет(створити_текст(М, "Неможливо здійснити ціле.")),
        місцезнаходження
      );
      вернути значення_недійсне();
    }

    якщо значення.вид == ЗДробове {
      увімкнути_стан_падіння(
        М,
        значення_предмет(створити_текст(М, "Неможливо здійснити дробове.")),
        місцезнаходження
      );
      вернути значення_недійсне();
    }

    змінна дійсне = значення.дані як адреса<ПредметДаних> як адреса<Дійсне>;

    якщо дійсне.тип == М.предмет_структури_Дія {
      вернути предмет_дії_здійснити(
        М,
        здійснювач,
        дійсне як адреса<ПредметДії>,
        задіяні,
        місцезнаходження
      );
    }

    якщо дійсне.тип == М.предмет_структури_Структура {
      вернути предмет_структури_здійснити(
        М,
        дійсне як адреса<ПредметСтруктури>,
        задіяні,
        місцезнаходження
      );
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Виконати дію можна лише над діями.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  // позначка: прохід по типах предметів
  місцева дія отримати_властивість(
    М: адреса<Машина>,
    значення: Значення,
    назва: адреса<ПредметТексту>,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо значення.вид == ЗНедійсне {
      увімкнути_стан_падіння(
        М,
        значення_предмет(створити_текст(М, "Неможливо отримати властивість значення \"недійсне\".")),
        місцезнаходження
      );
      вернути значення_недійсне();
    }

    якщо значення.вид == ЗДійсне {
      увімкнути_стан_падіння(
        М,
        значення_предмет(створити_текст(М, "Неможливо отримати властивість значення \"дійсне\".")),
        місцезнаходження
      );
      вернути значення_недійсне();
    }

    якщо значення.вид == ЗЦіле {
      увімкнути_стан_падіння(
        М,
        значення_предмет(створити_текст(М, "Неможливо отримати властивість цілого.")),
        місцезнаходження
      );
      вернути значення_недійсне();
    }

    якщо значення.вид == ЗДробове {
      увімкнути_стан_падіння(
        М,
        значення_предмет(створити_текст(М, "Неможливо отримати властивість дробового.")),
        місцезнаходження
      );
      вернути значення_недійсне();
    }

    змінна дійсне = значення.дані як адреса<ПредметДаних> як адреса<Дійсне>;

    якщо дійсне.тип == М.предмет_структури_Предмет {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_Структура {
      вернути предмет_структури_отримати_властивість(
        М,
        дійсне як адреса<ПредметСтруктури>,
        назва,
        місцезнаходження
      );
    }

    якщо дійсне.тип == М.предмет_структури_Модуль {
      вернути предмет_модуля_отримати_властивість(
        М,
        дійсне як адреса<ПредметМодуля>,
        назва,
        місцезнаходження
      );
    }

    якщо дійсне.тип == М.предмет_структури_Параметр {
      вернути предмет_параметра_отримати_властивість(
        М,
        дійсне як адреса<ПредметПараметра>,
        назва,
        місцезнаходження
      );
    }

    якщо дійсне.тип == М.предмет_структури_Число {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_Текст {
      вернути предмет_тексту_отримати_властивість(
        М,
        дійсне як адреса<ПредметТексту>,
        назва,
        місцезнаходження
      );
    }

    якщо дійсне.тип == М.предмет_структури_Код {
      вернути предмет_коду_отримати_властивість(
        М,
        дійсне як адреса<ПредметКоду>,
        назва,
        місцезнаходження
      );
    }

    якщо дійсне.тип == М.предмет_структури_Дія {
      вернути предмет_дії_отримати_властивість(
        М,
        дійсне як адреса<ПредметДії>,
        назва,
        місцезнаходження
      );
    }

    якщо дійсне.тип == М.предмет_структури_Список {
      вернути предмет_списку_отримати_властивість(
        М,
        дійсне як адреса<ПредметСписку>,
        назва,
        місцезнаходження
      );
    }

    якщо дійсне.тип == М.предмет_структури_Словник {
      вернути предмет_словника_отримати_властивість(
        М,
        дійсне як адреса<ПредметСловника>,
        назва,
        місцезнаходження
      );
    }

    якщо дійсне.тип == М.предмет_структури_Дані {
      вернути предмет_даних_отримати_властивість(
        М,
        дійсне як адреса<ПредметДаних>,
        назва,
        місцезнаходження
      );
    }

    якщо дійсне.тип == М.предмет_структури_ЗмінніДані {
      вернути предмет_змінних_даних_отримати_властивість(
        М,
        дійсне як адреса<ПредметЗміннихДаних>,
        назва,
        місцезнаходження
      );
    }

    якщо дійсне.тип == М.предмет_структури_ДіапазонЦілих {
      вернути предмет_діапазону_цілих_отримати_властивість(
        М,
        дійсне як адреса<ПредметДіапазонуЦілих>,
        назва,
        місцезнаходження
      );
    }

    якщо дійсне.тип == М.предмет_структури_ДіапазонДробових {
      вернути предмет_діапазону_дробових_отримати_властивість(
        М,
        дійсне як адреса<ПредметДіапазонуДробових>,
        назва,
        місцезнаходження
      );
    }

    якщо дійсне.тип == М.предмет_структури_ПеребірДіапазонуЦілих {
      вернути предмет_перебору_діапазону_цілих_отримати_властивість(
        М,
        дійсне як адреса<ПредметПереборуДіапазонуЦілих>,
        назва,
        місцезнаходження
      );
    }

    якщо дійсне.тип == М.предмет_структури_ПеребірДіапазонуДробових {
      вернути предмет_перебору_діапазону_дробових_отримати_властивість(
        М,
        дійсне як адреса<ПредметПереборуДіапазонуДробових>,
        назва,
        місцезнаходження
      );
    }

    якщо дійсне.тип == М.предмет_структури_ПеребірСписку {
      вернути предмет_перебору_списку_отримати_властивість(
        М,
        дійсне як адреса<ПредметПереборуСписку>,
        назва,
        місцезнаходження
      );
    }

    якщо дійсне.тип == М.предмет_структури_Послідовність {
      вернути значення_недійсне();
    }

    змінна результат: Значення;

    якщо знайти_властивість(
      М,
      (дійсне як адреса<СкладенийПредмет>).властивості,
      назва,
      результат::адреса
    ) {
      вернути результат;
    }

    якщо дійсне.тип.тип == М.предмет_структури_Структура {
      змінна предмет_дії = знайти_метод_в_структурі(
        М,
        дійсне.тип як адреса<ПредметСтруктури>,
        назва
      );

      якщо предмет_дії == пусто {
        вернути значення_недійсне();
      }

      вернути значення_предмет(предмет_дії);
    }

    вернути значення_недійсне();
  }

  // позначка: прохід по типах предметів
  місцева дія змінити_властивість(
    М: адреса<Машина>,
    значення: Значення,
    назва: адреса<ПредметТексту>,
    значення: Значення,
    місцезнаходження: Місцезнаходження
  ) {
    якщо значення.вид == ЗНедійсне {
      вернути;
    }

    якщо значення.вид == ЗДійсне {
      вернути;
    }

    якщо значення.вид == ЗЦіле {
      вернути;
    }

    якщо значення.вид == ЗДробове {
      вернути;
    }

    змінна дійсне = значення.дані як адреса<ПредметДаних> як адреса<Дійсне>;

    якщо дійсне.тип == М.предмет_структури_Предмет {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_Структура {
      предмет_структури_змінити_властивість(
        М,
        дійсне як адреса<ПредметСтруктури>,
        назва,
        значення,
        місцезнаходження
      );
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_Модуль {
      предмет_модуля_змінити_властивість(
        М,
        дійсне як адреса<ПредметМодуля>,
        назва,
        значення,
        місцезнаходження
      );
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_Параметр {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_Число {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_Ціле {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_Дробове {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_Текст {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_Код {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_Дія {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_Список {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_Словник {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_Дані {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_ЗмінніДані {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_ДіапазонЦілих {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_ДіапазонДробових {
      вернути;
    }

    записати_властивість(
      М,
      (дійсне як адреса<СкладенийПредмет>).властивості::адреса,
      назва,
      значення
    );
  }

  місцева дія здійснити_властивість(
    М: адреса<Машина>,
    предмет: Значення,
    назва: адреса<ПредметТексту>,
    задіяні: Задіяні,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    змінна значення_властивості = отримати_властивість(
      М,
      предмет,
      назва,
      місцезнаходження
    );

    якщо М.стан_падіння {
      звільнити_задіяні(М, задіяні);
      вернути значення_недійсне();
    }

    якщо значення_властивості.вид == ЗНедійсне {
      увімкнути_стан_падіння(
        М,
        значення_предмет(створити_текст(М, "Не влалось здійснити властивість.")),
        місцезнаходження
      );
      звільнити_задіяні(М, задіяні);
      вернути значення_недійсне();
    }

    вернути здійснити(
      М,
      предмет,
      значення_властивості,
      задіяні,
      місцезнаходження
    );
  }

  // позначка: прохід по типах предметів
  місцева дія отримати_елемент(
    М: адреса<Машина>,
    значення: Значення,
    ключ: Значення,
    місцезнаходження: Місцезнаходження
  ) -> Значення {
    якщо значення.вид == ЗНедійсне {
      увімкнути_стан_падіння(
        М,
        значення_предмет(створити_текст(М, "Неможливо отримати елемент значення \"недійсне\".")),
        місцезнаходження
      );
      вернути значення_недійсне();
    }

    якщо значення.вид == ЗДійсне {
      увімкнути_стан_падіння(
        М,
        значення_предмет(створити_текст(М, "Неможливо отримати елемент значення \"дійсне\".")),
        місцезнаходження
      );
      вернути значення_недійсне();
    }

    якщо значення.вид == ЗЦіле {
      увімкнути_стан_падіння(
        М,
        значення_предмет(створити_текст(М, "Неможливо отримати елемент цілого.")),
        місцезнаходження
      );
      вернути значення_недійсне();
    }

    якщо значення.вид == ЗДробове {
      увімкнути_стан_падіння(
        М,
        значення_предмет(створити_текст(М, "Неможливо отримати елемент дробового.")),
        місцезнаходження
      );
      вернути значення_недійсне();
    }

    змінна дійсне = значення.дані як адреса<ПредметДаних> як адреса<Дійсне>;

    якщо дійсне.тип == М.предмет_структури_Предмет {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_Структура {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_Модуль {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_Параметр {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_Число {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_Ціле {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_Дробове {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_Текст {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_Код {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_Дія {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_Список {
      якщо ключ.вид == ЗЦіле {
        змінна предмет_списку = дійсне як адреса<ПредметСписку>;

        якщо предмет_списку.розмір >= природне(ключ.дані як ц64) {
          вернути предмет_списку.елементи[ключ.дані як ц64];
        }
      }

      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_Словник {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_Дані {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_ЗмінніДані {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_ДіапазонЦілих {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_ДіапазонДробових {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_ПеребірДіапазонуЦілих {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_ПеребірДіапазонуДробових {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_ПеребірСписку {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_Послідовність {
      вернути значення_недійсне();
    }

    вернути значення_недійсне();
  }

  // позначка: прохід по типах предметів
  місцева дія змінити_елемент(
    М: адреса<Машина>,
    значення: Значення,
    ключ: Значення,
    значення: Значення,
    місцезнаходження: Місцезнаходження
  ) {
    якщо значення.вид == ЗНедійсне {
      вернути;
    }

    якщо значення.вид == ЗДійсне {
      вернути;
    }

    якщо значення.вид == ЗЦіле {
      вернути;
    }

    якщо значення.вид == ЗДробове {
      вернути;
    }

    змінна дійсне = значення.дані як адреса<ПредметДаних> як адреса<Дійсне>;

    якщо дійсне.тип == М.предмет_структури_Предмет {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_Структура {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_Модуль {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_Параметр {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_Число {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_Ціле {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_Дробове {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_Текст {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_Код {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_Дія {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_Список {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_Словник {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_Дані {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_ЗмінніДані {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_ДіапазонЦілих {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_ДіапазонДробових {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_ПеребірДіапазонуЦілих {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_ПеребірДіапазонуДробових {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_ПеребірСписку {
      вернути;
    }

    якщо дійсне.тип == М.предмет_структури_Послідовність {
      вернути;
    }

    вернути;
  }

  // позначка: прохід по типах предметів
  місцева дія отримати_текст(
    М: адреса<Машина>,
    значення: Значення,
    місцезнаходження: Місцезнаходження
  ) -> адреса<ПредметТексту> {
    якщо значення.вид == ЗНедійсне {
      вернути створити_текст(М, "недійсне");
    }

    якщо значення.вид == ЗДійсне {
      вернути створити_текст(М, "дійсне");
    }

    якщо значення.вид == ЗЦіле {
      змінна значення_кд: кд;

      якщо перетворити_ц64_в_кд(М, значення.дані як ц64, значення_кд::адреса) {
        вернути створити_текст_без_копіювання(М, значення_кд.розмір, значення_кд.дані);
      }

      увімкнути_стан_падіння(
        М,
        значення_предмет(створити_текст(М, "Неможливо перетворити ціле число в текст.")),
        місцезнаходження
      );
      вернути пусто;
    }

    якщо значення.вид == ЗДробове {
      змінна значення_кд: кд;

      якщо перетворити_д64_в_кд(М, значення.дані як д64, значення_кд::адреса) {
        вернути створити_текст_без_копіювання(М, значення_кд.розмір, значення_кд.дані);
      }

      увімкнути_стан_падіння(
        М,
        значення_предмет(створити_текст(М, "Неможливо перетворити дробове число в текст.")),
        місцезнаходження
      );
      вернути пусто;
    }

    змінна дійсне = значення.дані як адреса<ПредметДаних> як адреса<Дійсне>;

    якщо дійсне.тип == М.предмет_структури_Предмет {
      вернути створити_текст(М, "<Предмет>");
    }

    якщо дійсне.тип == М.предмет_структури_Структура {
      вернути створити_текст(М, "<Структура>");
    }

    якщо дійсне.тип == М.предмет_структури_Модуль {
      вернути створити_текст(М, "<Модуль>");
    }

    якщо дійсне.тип == М.предмет_структури_Параметр {
      вернути створити_текст(М, "<Параметр>");
    }

    якщо дійсне.тип == М.предмет_структури_Число {
      вернути створити_текст(М, "<Число>");
    }

    якщо дійсне.тип == М.предмет_структури_Текст {
      вернути дійсне як адреса<ПредметТексту>;
    }

    якщо дійсне.тип == М.предмет_структури_Код {
      вернути створити_текст(М, "<Код>");
    }

    якщо дійсне.тип == М.предмет_структури_Дія {
      вернути створити_текст(М, "<Дія>");
    }

    якщо дійсне.тип == М.предмет_структури_Список {
      вернути створити_текст(М, "<Список>");
    }

    якщо дійсне.тип == М.предмет_структури_Словник {
      вернути створити_текст(М, "<Словник>");
    }

    якщо дійсне.тип == М.предмет_структури_Дані {
      вернути створити_текст(М, "<Дані>");
    }

    якщо дійсне.тип == М.предмет_структури_ЗмінніДані {
      вернути створити_текст(М, "<ЗмінніДані>");
    }

    якщо дійсне.тип == М.предмет_структури_ДіапазонЦілих {
      вернути створити_текст(М, "<ДіапазонЦілих>");
    }

    якщо дійсне.тип == М.предмет_структури_ДіапазонДробових {
      вернути створити_текст(М, "<ДіапазонДробових>");
    }

    якщо дійсне.тип == М.предмет_структури_ПеребірДіапазонуЦілих {
      вернути створити_текст(М, "<ПеребірДіапазонуЦілих>");
    }

    якщо дійсне.тип == М.предмет_структури_ПеребірДіапазонуДробових {
      вернути створити_текст(М, "<ПеребірДіапазонуДробових>");
    }

    якщо дійсне.тип == М.предмет_структури_ПеребірСписку {
      вернути створити_текст(М, "<ПеребірСписку>");
    }

    якщо дійсне.тип == М.предмет_структури_Послідовність {
      вернути створити_текст(М, "<Послідовність>");
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Не вдалось перетворити на текст.")),
      Місцезнаходження { пусто, 0 }
    );

    вернути пусто;
  }

  // позначка: прохід по типах предметів
  місцева дія отримати_діапазон(
    М: адреса<Машина>,
    від: Значення,
    до: Значення,
    включно: логічне,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо від.вид == ЗНедійсне {
      вернути значення_недійсне();
    }

    якщо від.вид == ЗДійсне {
      вернути значення_недійсне();
    }

    якщо від.вид == ЗЦіле {
      вернути значення_недійсне();
    }

    якщо від.вид == ЗДробове {
      вернути значення_недійсне();
    }

    змінна від_дійсне = від.дані як адреса<ПредметДаних> як адреса<Дійсне>;

    якщо від_дійсне.тип == М.предмет_структури_Предмет {
      вернути значення_недійсне();
    }

    якщо від_дійсне.тип == М.предмет_структури_Структура {
      вернути значення_недійсне();
    }

    якщо від_дійсне.тип == М.предмет_структури_Модуль {
      вернути значення_недійсне();
    }

    якщо від_дійсне.тип == М.предмет_структури_Параметр {
      вернути значення_недійсне();
    }

    якщо від_дійсне.тип == М.предмет_структури_Число {
      вернути значення_недійсне();
    }

    якщо від_дійсне.тип == М.предмет_структури_Текст {
      вернути значення_недійсне();
    }

    якщо від_дійсне.тип == М.предмет_структури_Код {
      вернути значення_недійсне();
    }

    якщо від_дійсне.тип == М.предмет_структури_Дія {
      вернути значення_недійсне();
    }

    якщо від_дійсне.тип == М.предмет_структури_Список {
      вернути значення_недійсне();
    }

    якщо від_дійсне.тип == М.предмет_структури_Словник {
      вернути значення_недійсне();
    }

    якщо від_дійсне.тип == М.предмет_структури_Дані {
      вернути значення_недійсне();
    }

    якщо від_дійсне.тип == М.предмет_структури_ЗмінніДані {
      вернути значення_недійсне();
    }

    якщо від_дійсне.тип == М.предмет_структури_ДіапазонЦілих {
      вернути значення_недійсне();
    }

    якщо від_дійсне.тип == М.предмет_структури_ДіапазонДробових {
      вернути значення_недійсне();
    }

    якщо від_дійсне.тип == М.предмет_структури_ПеребірДіапазонуЦілих {
      вернути значення_недійсне();
    }

    якщо від_дійсне.тип == М.предмет_структури_ПеребірДіапазонуДробових {
      вернути значення_недійсне();
    }

    якщо від_дійсне.тип == М.предмет_структури_ПеребірСписку {
      вернути значення_недійсне();
    }

    якщо від_дійсне.тип == М.предмет_структури_Послідовність {
      вернути значення_недійсне();
    }

    змінна кількість_задіяних: природне = 2;
    змінна дані_задіяних = виділити_памʼять<Значення>(М, кількість_задіяних);
    дані_задіяних[0] = до;
    якщо включно {
      дані_задіяних[1] = значення_дійсне();
    } інакше {
      дані_задіяних[1] = значення_недійсне();
    }

    вернути здійснити_властивість(
      М,
      від,
      створити_текст(М, "чародія_діапазон"),
      Задіяні { кількість_задіяних, дані_задіяних, пусто },
      місцезнаходження
    );
  }

  // позначка: прохід по типах предметів
  місцева дія отримати_перебір(
    М: адреса<Машина>,
    значення: Значення,
    місцезнаходження: Місцезнаходження
  ) -> Значення {
    якщо значення.вид == ЗНедійсне {
      вернути значення_недійсне();
    }

    якщо значення.вид == ЗДійсне {
      вернути значення_недійсне();
    }

    якщо значення.вид == ЗЦіле {
      вернути значення_недійсне();
    }

    якщо значення.вид == ЗДробове {
      вернути значення_недійсне();
    }

    змінна дійсне = значення.дані як адреса<ПредметДаних> як адреса<Дійсне>;

    якщо дійсне.тип == М.предмет_структури_Предмет {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_Структура {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_Модуль {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_Параметр {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_Число {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_Ціле {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_Дробове {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_Текст {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_Код {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_Дія {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_Список {
      вернути значення_предмет(створити_перебір_списку(М, дійсне як адреса<ПредметСписку>));
    }

    якщо дійсне.тип == М.предмет_структури_Словник {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_Дані {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_ЗмінніДані {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_ПеребірДіапазонуЦілих {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_ПеребірДіапазонуДробових {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_ПеребірСписку {
      вернути значення_недійсне();
    }

    якщо дійсне.тип == М.предмет_структури_Послідовність {
      вернути значення_недійсне();
    }

    вернути здійснити_властивість(
      М,
      значення,
      створити_текст(М, "чародія_перебір"),
      Задіяні { 0, пусто, пусто },
      місцезнаходження
    );
  }

  місцева дія виконати_додати(
    М: адреса<Машина>,
    ліво: Значення,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> Значення {
    якщо ліво.вид == ЗЦіле {
      вернути предмет_цілого_додати(М, ліво.дані як ц64, право, місцезнаходження);
    }

    якщо ліво.вид == ЗДробове {
      вернути предмет_дробового_додати(М, ліво.дані як д64, право, місцезнаходження);
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Виконати додавання можна лише між числами.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія виконати_відняти(
    М: адреса<Машина>,
    ліво: Значення,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> Значення {
    якщо ліво.вид == ЗЦіле {
      вернути предмет_цілого_відняти(М, ліво.дані як ц64, право, місцезнаходження);
    }

    якщо ліво.вид == ЗДробове {
      вернути предмет_дробового_відняти(М, ліво.дані як д64, право, місцезнаходження);
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Виконати віднімання можна лише між числами.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія виконати_помножити(
    М: адреса<Машина>,
    ліво: Значення,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> Значення {
    якщо ліво.вид == ЗЦіле {
      вернути предмет_цілого_помножити(М, ліво.дані як ц64, право, місцезнаходження);
    }

    якщо ліво.вид == ЗДробове {
      вернути предмет_дробового_помножити(М, ліво.дані як д64, право, місцезнаходження);
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Виконати множення можна лише між числами.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія виконати_поділити(
    М: адреса<Машина>,
    ліво: Значення,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> Значення {
    якщо ліво.вид == ЗЦіле {
      вернути предмет_цілого_поділити(М, ліво.дані як ц64, право, місцезнаходження);
    }

    якщо ліво.вид == ЗДробове {
      вернути предмет_дробового_поділити(М, ліво.дані як д64, право, місцезнаходження);
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Виконати ділення можна лише між числами.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія виконати_остача(
    М: адреса<Машина>,
    ліво: Значення,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> Значення {
    якщо ліво.вид == ЗЦіле {
      вернути предмет_цілого_остача(М, ліво.дані як ц64, право, місцезнаходження);
    }

    якщо ліво.вид == ЗДробове {
      вернути предмет_дробового_остача(М, ліво.дані як д64, право, місцезнаходження);
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Виконати отримання остачі ділення можна лише між числами.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія виконати_частка(
    М: адреса<Машина>,
    ліво: Значення,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> Значення {
    якщо ліво.вид == ЗЦіле {
      вернути предмет_цілого_частка(М, ліво.дані як ц64, право, місцезнаходження);
    }

    якщо ліво.вид == ЗДробове {
      вернути предмет_дробового_частка(М, ліво.дані як д64, право, місцезнаходження);
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Виконати отримання неповної частки ділення можна лише між числами.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія виконати_степінь(
    М: адреса<Машина>,
    ліво: Значення,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> Значення {
    якщо ліво.вид == ЗЦіле {
      вернути предмет_цілого_степінь(М, ліво.дані як ц64, право, місцезнаходження);
    }

    якщо ліво.вид == ЗДробове {
      вернути предмет_дробового_степінь(М, ліво.дані як д64, право, місцезнаходження);
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Виконати піднесення до степеня можна лише між числами.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія виконати_вліво(
    М: адреса<Машина>,
    ліво: Значення,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> Значення {
    якщо ліво.вид == ЗЦіле {
      вернути предмет_цілого_вліво(М, ліво.дані як ц64, право, місцезнаходження);
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Виконати двійкове зсув вліво можна лише між цілими числами.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія виконати_вправо(
    М: адреса<Машина>,
    ліво: Значення,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> Значення {
    якщо ліво.вид == ЗЦіле {
      вернути предмет_цілого_вправо(М, ліво.дані як ц64, право, місцезнаходження);
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Виконати двійкове зсув вправо можна лише між цілими числами.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія виконати_двійкове_і(
    М: адреса<Машина>,
    ліво: Значення,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> Значення {
    якщо ліво.вид == ЗЦіле {
      вернути предмет_цілого_двійкове_і(М, ліво.дані як ц64, право, місцезнаходження);
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Виконати двійкове І можна лише між цілими числами.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія виконати_двійкове_або(
    М: адреса<Машина>,
    ліво: Значення,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> Значення {
    якщо ліво.вид == ЗЦіле {
      вернути предмет_цілого_двійкове_або(М, ліво.дані як ц64, право, місцезнаходження);
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Виконати двійкове АБО можна лише між цілими числами.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія виконати_двійкове_вабо(
    М: адреса<Машина>,
    ліво: Значення,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> Значення {
    якщо ліво.вид == ЗЦіле {
      вернути предмет_цілого_двійкове_вабо(М, ліво.дані як ц64, право, місцезнаходження);
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Виконати двійкове ВАБО можна лише між цілими числами.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія виконати_менше(
    М: адреса<Машина>,
    ліво: Значення,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> Значення {
    якщо ліво.вид == ЗЦіле {
      вернути предмет_цілого_поділити(М, ліво.дані як ц64, право, місцезнаходження);
    }

    якщо ліво.вид == ЗДробове {
      вернути предмет_дробового_менше(М, ліво.дані як д64, право, місцезнаходження);
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Виконати перевірку чи менше можна лише між числами.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія виконати_більше(
    М: адреса<Машина>,
    ліво: Значення,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> Значення {
    якщо ліво.вид == ЗЦіле {
      вернути предмет_цілого_більше(М, ліво.дані як ц64, право, місцезнаходження);
    }

    якщо ліво.вид == ЗДробове {
      вернути предмет_дробового_більше(М, ліво.дані як д64, право, місцезнаходження);
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Виконати перевірку чи більше можна лише між числами.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія виконати_містить(
    М: адреса<Машина>,
    ліво: Значення,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> Значення {
    вернути значення_недійсне();
  }

  місцева дія виконати_двійкове_не(
    М: адреса<Машина>,
    значення: Значення,
    місцезнаходження: Місцезнаходження
  ) -> Значення {
    якщо значення.вид == ЗЦіле {
      вернути предмет_цілого_двійкове_не(М, значення.дані як ц64, місцезнаходження);
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Виконати двійкове НЕ можна лише для цілого числа.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія виконати_змінити_знак(
    М: адреса<Машина>,
    значення: Значення,
    місцезнаходження: Місцезнаходження
  ) -> Значення {
    якщо значення.вид == ЗЦіле {
      вернути предмет_цілого_змінити_знак(М, значення.дані як ц64, місцезнаходження);
    }

    якщо значення.вид == ЗДробове {
      вернути предмет_дробового_змінити_знак(М, значення.дані як д64, місцезнаходження);
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Виконати зміну знаку можна лише для чисел.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія перевірити_чи_значення_рівні(
    М: адреса<Машина>,
    а: Значення,
    б: Значення
  ) -> логічне {
    якщо а.вид == ЗНедійсне {
      якщо б.вид == ЗНедійсне {
        вернути так;
      }

      вернути ні;
    }

    якщо а.вид == ЗДійсне {
      якщо б.вид == ЗДійсне {
        вернути так;
      }

      вернути ні;
    }

    якщо а.вид == ЗЦіле {
      якщо б.вид == ЗЦіле {
        вернути а.дані як ц64 == б.дані як ц64;
      }

      якщо б.вид == ЗДробове {
        вернути д64(а.дані як ц64) == б.дані як д64;
      }

      вернути ні;
    }

    якщо а.вид == ЗДробове {
      якщо б.вид == ЗЦіле {
        вернути а.дані як д64 == д64(б.дані як ц64);
      }

      якщо б.вид == ЗДробове {
        вернути а.дані як д64 == б.дані як д64;
      }

      вернути ні;
    }

    змінна а_дійсне = а.дані як адреса<ПредметДаних> як адреса<Дійсне>;
    змінна б_дійсне = б.дані як адреса<ПредметДаних> як адреса<Дійсне>;

    якщо а_дійсне == б_дійсне {
      вернути так;
    }

    якщо а_дійсне.тип == б_дійсне.тип {
      якщо а_дійсне.тип == М.предмет_структури_Текст {
        вернути перевірити_чи_предмети_тексту_рівні(
          М,
          а_дійсне як адреса<ПредметТексту>,
          б_дійсне як адреса<ПредметТексту>
        );
      }
    }

    вернути ні;
  }

  місцева дія перевірити_чи_предмет_є(
    М: адреса<Машина>,
    а: адреса<Дійсне>,
    б: адреса<ПредметСтруктури>
  ) -> логічне {
    змінна тип_а = а.тип;

  крок_перевірки_типу_а:
    якщо тип_а == б {
      вернути так;
    }

    якщо тип_а == пусто {
      вернути ні;
    }

    тип_а = тип_а.предок;

    стрибнути крок_перевірки_типу_а;
  }
}