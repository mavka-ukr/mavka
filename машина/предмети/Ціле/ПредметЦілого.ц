взяти означення мавка/машина;

простір мавка {
  місцева дія записати_метод_структури_Ціле__чародія_ціле(М: адреса<Машина>);
  місцева дія записати_метод_структури_Ціле__чародія_дробове(М: адреса<Машина>);
  місцева дія записати_метод_структури_Ціле__чародія_текст(М: адреса<Машина>);

  місцева дія записати_дію_структури_Ціле__з(М: адреса<Машина>);

  місцева дія заповнити_структуру_Ціле(
    М: адреса<Машина>
  ) {
    М.предмет_структури_Ціле.заборонити_наслідування = так;

    записати_метод_структури_Ціле__чародія_ціле(М);
    записати_метод_структури_Ціле__чародія_дробове(М);
    записати_метод_структури_Ціле__чародія_текст(М);

    записати_дію_структури_Ціле__з(М);
  }

  місцева дія створити_ціле_з_ц64(
    М: адреса<Машина>,
    значення: ц64
  ) -> адреса<ПредметЦілого> {
    змінна предмет = виділити_предмет<ПредметЦілого>(М, М.предмет_структури_Ціле);

    предмет.значення = значення;

    вернути предмет;
  }

  місцева дія предмет_цілого_додати(
    М: адреса<Машина>,
    значення: адреса<ПредметЦілого>,
    право: адреса<Предмет>,
    місцезнаходження: Місцезнаходження
  ) -> ПредметАбоСтанПадіння {
    якщо право.тип == М.предмет_структури_Ціле {
      вернути створити_ціле_з_ц64(М, значення.значення + (право як адреса<ПредметЦілого>).значення) як адреса<Предмет>;
    }

    якщо право.тип == М.предмет_структури_Дробове {
      вернути створити_дробове_з_д64(М, д64(значення.значення) + (право як адреса<ПредметДробового>).значення) як адреса<Предмет>;
    }

    увімкнути_стан_падіння(
      М,
      створити_текст(М, "Додати до цілого числа можна лише або ціле або дробове число.") як адреса<Предмет>,
      місцезнаходження
    );
    вернути пусто;
  }

  місцева дія предмет_цілого_відняти(
    М: адреса<Машина>,
    значення: адреса<ПредметЦілого>,
    право: адреса<Предмет>,
    місцезнаходження: Місцезнаходження
  ) -> ПредметАбоСтанПадіння {
    якщо право.тип == М.предмет_структури_Ціле {
      вернути створити_ціле_з_ц64(М, значення.значення - (право як адреса<ПредметЦілого>).значення) як адреса<Предмет>;
    }

    якщо право.тип == М.предмет_структури_Дробове {
      вернути створити_дробове_з_д64(М, д64(значення.значення) - (право як адреса<ПредметДробового>).значення) як адреса<Предмет>;
    }

    увімкнути_стан_падіння(
      М,
      створити_текст(М, "Відняти від цілого числа можна лише або ціле або дробове число.") як адреса<Предмет>,
      місцезнаходження
    );
    вернути пусто;
  }

  місцева дія предмет_цілого_помножити(
    М: адреса<Машина>,
    значення: адреса<ПредметЦілого>,
    право: адреса<Предмет>,
    місцезнаходження: Місцезнаходження
  ) -> ПредметАбоСтанПадіння {
    якщо право.тип == М.предмет_структури_Ціле {
      вернути створити_ціле_з_ц64(М, значення.значення * (право як адреса<ПредметЦілого>).значення) як адреса<Предмет>;
    }

    якщо право.тип == М.предмет_структури_Дробове {
      вернути створити_дробове_з_д64(М, д64(значення.значення) * (право як адреса<ПредметДробового>).значення) як адреса<Предмет>;
    }

    увімкнути_стан_падіння(
      М,
      створити_текст(М, "Помножити ціле число можна лише на або ціле або дробове число.") як адреса<Предмет>,
      місцезнаходження
    );
    вернути пусто;
  }

  місцева дія предмет_цілого_поділити(
    М: адреса<Машина>,
    значення: адреса<ПредметЦілого>,
    право: адреса<Предмет>,
    місцезнаходження: Місцезнаходження
  ) -> ПредметАбоСтанПадіння {
    якщо право.тип == М.предмет_структури_Ціле {
      вернути створити_дробове_з_д64(М, д64(значення.значення) / д64((право як адреса<ПредметЦілого>).значення)) як адреса<Предмет>;
    }

    якщо право.тип == М.предмет_структури_Дробове {
      вернути створити_дробове_з_д64(М, д64(значення.значення) / (право як адреса<ПредметДробового>).значення) як адреса<Предмет>;
    }

    увімкнути_стан_падіння(
      М,
      створити_текст(М, "Поділити ціле число можна лише на або ціле або дробове число.") як адреса<Предмет>,
      місцезнаходження
    );
    вернути пусто;
  }

  місцева дія предмет_цілого_остача(
    М: адреса<Машина>,
    значення: адреса<ПредметЦілого>,
    право: адреса<Предмет>,
    місцезнаходження: Місцезнаходження
  ) -> ПредметАбоСтанПадіння {
    якщо право.тип == М.предмет_структури_Ціле {
      вернути створити_ціле_з_ц64(М, значення.значення % (право як адреса<ПредметЦілого>).значення) як адреса<Предмет>;
    }

    якщо право.тип == М.предмет_структури_Дробове {
      вернути створити_дробове_з_д64(М, д64(значення.значення) % (право як адреса<ПредметДробового>).значення) як адреса<Предмет>;
    }

    увімкнути_стан_падіння(
      М,
      створити_текст(М, "Отримати остачу ділення цілого числа можна лише з або цілим або дробовим число.") як адреса<Предмет>,
      місцезнаходження
    );
    вернути пусто;
  }

  місцева дія предмет_цілого_поділити_націло(
    М: адреса<Машина>,
    значення: адреса<ПредметЦілого>,
    право: адреса<Предмет>,
    місцезнаходження: Місцезнаходження
  ) -> ПредметАбоСтанПадіння {
    якщо право.тип == М.предмет_структури_Ціле {
      вернути створити_ціле_з_ц64(М, значення.значення / (право як адреса<ПредметЦілого>).значення) як адреса<Предмет>;
    }

    якщо право.тип == М.предмет_структури_Дробове {
      вернути створити_дробове_з_д64(М, д64(значення.значення) / (право як адреса<ПредметДробового>).значення) як адреса<Предмет>;
    }

    увімкнути_стан_падіння(
      М,
      створити_текст(М, "Отримати неповну частку ділення цілого числа можна лише з або цілим або дробовим число.") як адреса<Предмет>,
      місцезнаходження
    );
    вернути пусто;
  }

  місцева дія предмет_цілого_степінь(
    М: адреса<Машина>,
    значення: адреса<ПредметЦілого>,
    право: адреса<Предмет>,
    місцезнаходження: Місцезнаходження
  ) -> ПредметАбоСтанПадіння {
    якщо право.тип == М.предмет_структури_Ціле {
      вернути створити_ціле_з_ц64(М, піднести_до_степеня_ц64(М, значення.значення, (право як адреса<ПредметЦілого>).значення)) як адреса<Предмет>;
    }

    якщо право.тип == М.предмет_структури_Дробове {
      вернути створити_дробове_з_д64(М, піднести_до_степеня_д64(М, д64(значення.значення), (право як адреса<ПредметДробового>).значення)) як адреса<Предмет>;
    }

    увімкнути_стан_падіння(
      М,
      створити_текст(М, "Отримати степінь цілого числа можна лише з або цілим або дробовим число.") як адреса<Предмет>,
      місцезнаходження
    );
    вернути пусто;
  }

  місцева дія предмет_цілого_вліво(
    М: адреса<Машина>,
    значення: адреса<ПредметЦілого>,
    право: адреса<Предмет>,
    місцезнаходження: Місцезнаходження
  ) -> ПредметАбоСтанПадіння {
    якщо право.тип == М.предмет_структури_Ціле {
      вернути створити_ціле_з_ц64(М, значення.значення << (право як адреса<ПредметЦілого>).значення) як адреса<Предмет>;
    }

    увімкнути_стан_падіння(
      М,
      створити_текст(М, "Зсунути вліво ціле число можна лише з або цілим числом.") як адреса<Предмет>,
      місцезнаходження
    );
    вернути пусто;
  }

  місцева дія предмет_цілого_вправо(
    М: адреса<Машина>,
    значення: адреса<ПредметЦілого>,
    право: адреса<Предмет>,
    місцезнаходження: Місцезнаходження
  ) -> ПредметАбоСтанПадіння {
    якщо право.тип == М.предмет_структури_Ціле {
      вернути створити_ціле_з_ц64(М, значення.значення >> (право як адреса<ПредметЦілого>).значення) як адреса<Предмет>;
    }

    увімкнути_стан_падіння(
      М,
      створити_текст(М, "Зсунути вправо ціле число можна лише з або цілим числом.") як адреса<Предмет>,
      місцезнаходження
    );
    вернути пусто;
  }

  місцева дія предмет_цілого_двійкове_і(
    М: адреса<Машина>,
    значення: адреса<ПредметЦілого>,
    право: адреса<Предмет>,
    місцезнаходження: Місцезнаходження
  ) -> ПредметАбоСтанПадіння {
    якщо право.тип == М.предмет_структури_Ціле {
      вернути створити_ціле_з_ц64(М, значення.значення & (право як адреса<ПредметЦілого>).значення) як адреса<Предмет>;
    }

    увімкнути_стан_падіння(
      М,
      створити_текст(М, "Виконути двійкове І можна лише між цілими числами.") як адреса<Предмет>,
      місцезнаходження
    );
    вернути пусто;
  }

  місцева дія предмет_цілого_двійкове_або(
    М: адреса<Машина>,
    значення: адреса<ПредметЦілого>,
    право: адреса<Предмет>,
    місцезнаходження: Місцезнаходження
  ) -> ПредметАбоСтанПадіння {
    якщо право.тип == М.предмет_структури_Ціле {
      вернути створити_ціле_з_ц64(М, значення.значення | (право як адреса<ПредметЦілого>).значення) як адреса<Предмет>;
    }

    увімкнути_стан_падіння(
      М,
      створити_текст(М, "Виконути двійкове АБО можна лише між цілими числами.") як адреса<Предмет>,
      місцезнаходження
    );
    вернути пусто;
  }

  місцева дія предмет_цілого_двійкове_вабо(
    М: адреса<Машина>,
    значення: адреса<ПредметЦілого>,
    право: адреса<Предмет>,
    місцезнаходження: Місцезнаходження
  ) -> ПредметАбоСтанПадіння {
    якщо право.тип == М.предмет_структури_Ціле {
      вернути створити_ціле_з_ц64(М, значення.значення вабо (право як адреса<ПредметЦілого>).значення) як адреса<Предмет>;
    }

    увімкнути_стан_падіння(
      М,
      створити_текст(М, "Виконути двійкове ВАБО можна лише між цілими числами.") як адреса<Предмет>,
      місцезнаходження
    );
    вернути пусто;
  }

  місцева дія предмет_цілого_менше(
    М: адреса<Машина>,
    значення: адреса<ПредметЦілого>,
    право: адреса<Предмет>,
    місцезнаходження: Місцезнаходження
  ) -> ПредметАбоСтанПадіння {
    якщо право.тип == М.предмет_структури_Ціле {
      якщо значення.значення < (право як адреса<ПредметЦілого>).значення {
        вернути М.значення_дійсне;
      } інакше {
        вернути пусто;
      }
    }

    якщо право.тип == М.предмет_структури_Дробове {
      якщо д64(значення.значення) < (право як адреса<ПредметДробового>).значення {
        вернути М.значення_дійсне;
      } інакше {
        вернути пусто;
      }
    }

    увімкнути_стан_падіння(
      М,
      створити_текст(М, "Виконути перевірку ціле число менше можна з цілим або дробовим числом.") як адреса<Предмет>,
      місцезнаходження
    );
    вернути пусто;
  }

  місцева дія предмет_цілого_більше(
    М: адреса<Машина>,
    значення: адреса<ПредметЦілого>,
    право: адреса<Предмет>,
    місцезнаходження: Місцезнаходження
  ) -> ПредметАбоСтанПадіння {
    якщо право.тип == М.предмет_структури_Ціле {
      якщо значення.значення > (право як адреса<ПредметЦілого>).значення {
        вернути М.значення_дійсне;
      } інакше {
        вернути пусто;
      }
    }

    якщо право.тип == М.предмет_структури_Дробове {
      якщо д64(значення.значення) > (право як адреса<ПредметДробового>).значення {
        вернути М.значення_дійсне;
      } інакше {
        вернути пусто;
      }
    }

    увімкнути_стан_падіння(
      М,
      створити_текст(М, "Виконути перевірку ціле число менше можна з цілим або дробовим числом.") як адреса<Предмет>,
      місцезнаходження
    );
    вернути пусто;
  }

  місцева дія предмет_цілого_двійкове_не(
    М: адреса<Машина>,
    значення: адреса<ПредметЦілого>,
    місцезнаходження: Місцезнаходження
  ) -> ПредметАбоСтанПадіння {
    вернути створити_ціле_з_ц64(М, значення.значення) як адреса<Предмет>; // потім: втілити
  }

  місцева дія предмет_цілого_змінити_знак(
    М: адреса<Машина>,
    значення: адреса<ПредметЦілого>,
    місцезнаходження: Місцезнаходження
  ) -> ПредметАбоСтанПадіння {
    вернути створити_ціле_з_ц64(М, -значення.значення) як адреса<Предмет>;
  }

  місцева дія предмет_цілого_отримати_властивість(
    М: адреса<Машина>,
    значення: адреса<ПредметЦілого>,
    назва: адреса<ПредметТексту>,
    місцезнаходження: Місцезнаходження
  ) -> ПредметАбоСтанПадіння {
    змінна предмет_методу = знайти_метод_в_структурі(
      М,
      М.предмет_структури_Ціле,
      назва
    );

    якщо предмет_методу == пусто {
      вернути пусто;
    }

    вернути предмет_методу як адреса<Предмет>;
  }
}