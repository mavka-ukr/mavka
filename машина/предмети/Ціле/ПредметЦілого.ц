взяти означення мавка/машина;

простір мавка {
  місцева дія записати_метод_структури_Ціле__чародія_ціле(М: адреса<Машина>);
  місцева дія записати_метод_структури_Ціле__чародія_дробове(М: адреса<Машина>);
  місцева дія записати_метод_структури_Ціле__чародія_текст(М: адреса<Машина>);

  місцева дія записати_дію_структури_Ціле__з(М: адреса<Машина>);

  місцева дія заповнити_структуру_Ціле(
    М: адреса<Машина>
  ) {
    М.предмет_структури_Ціле.заборонити_наслідування = так;

    записати_метод_структури_Ціле__чародія_ціле(М);
    записати_метод_структури_Ціле__чародія_дробове(М);
    записати_метод_структури_Ціле__чародія_текст(М);

    записати_дію_структури_Ціле__з(М);
  }

  місцева дія предмет_цілого_додати(
    М: адреса<Машина>,
    значення: ц64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЦіле {
      вернути значення_ціле(значення + право.дані як ц64);
    }

    якщо право.вид == ЗДробове {
      вернути значення_дробове(д64(значення) + право.дані як д64);
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Додати до цілого числа можна лише або ціле або дробове число.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія предмет_цілого_відняти(
    М: адреса<Машина>,
    значення: ц64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЦіле {
      вернути значення_ціле(значення - право.дані як ц64);
    }

    якщо право.вид == ЗДробове {
      вернути значення_дробове(д64(значення) - право.дані як д64) як Значення;
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Відняти від цілого числа можна лише або ціле або дробове число.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія предмет_цілого_помножити(
    М: адреса<Машина>,
    значення: ц64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЦіле {
      вернути значення_ціле(значення * право.дані як ц64);
    }

    якщо право.вид == ЗДробове {
      вернути значення_дробове(д64(значення) * право.дані як д64) як Значення;
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Помножити ціле число можна лише на або ціле або дробове число.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія предмет_цілого_поділити(
    М: адреса<Машина>,
    значення: ц64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЦіле {
      вернути значення_дробове(д64(значення) / д64(право.дані як ц64)) як Значення;
    }

    якщо право.вид == ЗДробове {
      вернути значення_дробове(д64(значення) / право.дані як д64) як Значення;
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Поділити ціле число можна лише на або ціле або дробове число.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія предмет_цілого_остача(
    М: адреса<Машина>,
    значення: ц64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЦіле {
      вернути значення_ціле(значення % право.дані як ц64);
    }

    якщо право.вид == ЗДробове {
      вернути значення_дробове(д64(значення) % право.дані як д64) як Значення;
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Отримати остачу ділення цілого числа можна лише з або цілим або дробовим число.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія предмет_цілого_поділити_націло(
    М: адреса<Машина>,
    значення: ц64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЦіле {
      вернути значення_ціле(значення / право.дані як ц64);
    }

    якщо право.вид == ЗДробове {
      вернути значення_дробове(д64(значення) / право.дані як д64);
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Отримати неповну частку ділення цілого числа можна лише з або цілим або дробовим число.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія предмет_цілого_степінь(
    М: адреса<Машина>,
    значення: ц64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЦіле {
      вернути значення_ціле(піднести_до_степеня_ц64(М, значення, право.дані як ц64));
    }

    якщо право.вид == ЗДробове {
      вернути значення_дробове(піднести_до_степеня_д64(М, д64(значення), право.дані як д64));
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Отримати степінь цілого числа можна лише з або цілим або дробовим число.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія предмет_цілого_вліво(
    М: адреса<Машина>,
    значення: ц64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЦіле {
      вернути значення_ціле(значення << право.дані як ц64);
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Зсунути вліво ціле число можна лише з або цілим числом.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія предмет_цілого_вправо(
    М: адреса<Машина>,
    значення: ц64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЦіле {
      вернути значення_ціле(значення >> право.дані як ц64);
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Зсунути вправо ціле число можна лише з або цілим числом.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія предмет_цілого_двійкове_і(
    М: адреса<Машина>,
    значення: ц64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЦіле {
      вернути значення_ціле(значення & право.дані як ц64);
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Виконути двійкове І можна лише між цілими числами.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія предмет_цілого_двійкове_або(
    М: адреса<Машина>,
    значення: ц64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЦіле {
      вернути значення_ціле(значення | право.дані як ц64) як Значення;
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Виконути двійкове АБО можна лише між цілими числами.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія предмет_цілого_двійкове_вабо(
    М: адреса<Машина>,
    значення: ц64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЦіле {
      вернути значення_ціле(значення вабо право.дані як ц64);
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Виконути двійкове ВАБО можна лише між цілими числами.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія предмет_цілого_менше(
    М: адреса<Машина>,
    значення: ц64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЦіле {
      якщо значення < право.дані як ц64 {
        вернути значення_дійсне();
      } інакше {
        вернути значення_недійсне();
      }
    }

    якщо право.вид == ЗДробове {
      якщо д64(значення) < право.дані як д64 {
        вернути значення_дійсне();
      } інакше {
        вернути значення_недійсне();
      }
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Виконути перевірку ціле число менше можна з цілим або дробовим числом.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія предмет_цілого_більше(
    М: адреса<Машина>,
    значення: ц64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЦіле {
      якщо значення > право.дані як ц64 {
        вернути значення_дійсне();
      } інакше {
        вернути значення_недійсне();
      }
    }

    якщо право.вид == ЗДробове {
      якщо д64(значення) > право.дані як д64 {
        вернути значення_дійсне();
      } інакше {
        вернути значення_недійсне();
      }
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Виконути перевірку ціле число менше можна з цілим або дробовим числом.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія предмет_цілого_двійкове_не(
    М: адреса<Машина>,
    значення: ц64,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    вернути значення_ціле(значення); // потім: втілити
  }

  місцева дія предмет_цілого_змінити_знак(
    М: адреса<Машина>,
    значення: ц64,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    вернути значення_ціле(-значення);
  }

  місцева дія предмет_цілого_отримати_властивість(
    М: адреса<Машина>,
    значення: ц64,
    назва: адреса<ПредметТексту>,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    змінна предмет_методу = знайти_метод_в_структурі(
      М,
      М.предмет_структури_Ціле,
      назва
    );

    якщо предмет_методу == пусто {
      вернути значення_недійсне();
    }

    вернути значення_предмет(предмет_методу);
  }
}