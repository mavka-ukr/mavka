взяти означення машина_мавки;

простір мавка {
  місцева дія заповнити_структуру_Дробове(
    М: адреса<Машина>
  ) {
    М.предмет_структури_Дробове.заборонити_наслідування = так;
  }

  місцева дія предмет_дробового_додати(
    М: адреса<Машина>,
    значення: д64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЦіле {
      вернути значення_дробове(значення + д64(право.дані як д64));
    }

    якщо право.вид == ЗДробове {
      вернути значення_дробове(значення + право.дані як д64);
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Додати до дробового числа можна лише або ціле або дробове число.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія предмет_дробового_відняти(
    М: адреса<Машина>,
    значення: д64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЦіле {
      вернути значення_дробове(значення - д64(право.дані як ц64));
    }

    якщо право.вид == ЗДробове {
      вернути значення_дробове(значення - право.дані як д64) як Значення;
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Відняти від дробового числа можна лише або ціле або дробове число.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія предмет_дробового_помножити(
    М: адреса<Машина>,
    значення: д64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЦіле {
      вернути значення_дробове(значення * д64(право.дані як ц64));
    }

    якщо право.вид == ЗДробове {
      вернути значення_дробове(значення * право.дані як д64) як Значення;
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Помножити дробове число можна лише на або ціле або дробове число.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія предмет_дробового_поділити(
    М: адреса<Машина>,
    значення: д64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЦіле {
      вернути значення_дробове(значення / д64(право.дані як ц64)) як Значення;
    }

    якщо право.вид == ЗДробове {
      вернути значення_дробове(значення / право.дані як д64) як Значення;
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Поділити дробове число можна лише на або ціле або дробове число.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія предмет_дробового_остача(
    М: адреса<Машина>,
    значення: д64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЦіле {
      вернути значення_дробове(значення % д64(право.дані як ц64));
    }

    якщо право.вид == ЗДробове {
      вернути значення_дробове(значення % право.дані як д64) як Значення;
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Отримати остачу ділення дробового числа можна лише з або цілим або дробовим число.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія предмет_дробового_частка(
    М: адреса<Машина>,
    значення: д64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЦіле {
      вернути значення_дробове(значення / д64(право.дані як ц64));
    }

    якщо право.вид == ЗДробове {
      вернути значення_дробове(значення / право.дані як д64);
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Отримати неповну частку ділення дробового числа можна лише з або цілим або дробовим число.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія предмет_дробового_степінь(
    М: адреса<Машина>,
    значення: д64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЦіле {
      вернути значення_дробове(піднести_до_степеня_д64(М, значення, д64(право.дані як ц64)));
    }

    якщо право.вид == ЗДробове {
      вернути значення_дробове(піднести_до_степеня_д64(М, значення, право.дані як д64));
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Отримати степінь дробового числа можна лише з або цілим або дробовим число.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія предмет_дробового_менше(
    М: адреса<Машина>,
    значення: д64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЦіле {
      якщо значення < д64(право.дані як ц64) {
        вернути значення_дійсне();
      } інакше {
        вернути значення_недійсне();
      }
    }

    якщо право.вид == ЗДробове {
      якщо значення < право.дані як д64 {
        вернути значення_дійсне();
      } інакше {
        вернути значення_недійсне();
      }
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Виконути перевірку чи дробове число менше можна з цілим або дробовим числом.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія предмет_дробового_більше(
    М: адреса<Машина>,
    значення: д64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЦіле {
      якщо значення > д64(право.дані як ц64) {
        вернути значення_дійсне();
      } інакше {
        вернути значення_недійсне();
      }
    }

    якщо право.вид == ЗДробове {
      якщо значення > право.дані як д64 {
        вернути значення_дійсне();
      } інакше {
        вернути значення_недійсне();
      }
    }

    увімкнути_стан_падіння(
      М,
      значення_предмет(створити_текст(М, "Виконути перевірку чи дробове число менше можна з цілим або дробовим числом.")),
      місцезнаходження
    );
    вернути значення_недійсне();
  }

  місцева дія предмет_дробового_змінити_знак(
    М: адреса<Машина>,
    значення: д64,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    вернути значення_дробове(-значення);
  }

  місцева дія предмет_дробового_отримати_властивість(
    М: адреса<Машина>,
    значення: д64,
    назва: адреса<ПредметТексту>,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    вернути значення_недійсне();
  }
}