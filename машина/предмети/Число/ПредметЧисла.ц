взяти означення мавка/машина;

дія копіювати_памʼять<Т>(
  куди: памʼять<Т>,
  звідки: памʼять<Т>,
  кількість: природне
) {
  змінна п: природне = 0;

  поки п < кількість {
    куди[п] = звідки[п];

    п += 1;
  }
}

дія заповнити_памʼять<Т>(
  куди: памʼять<Т>,
  значення: Т,
  кількість: природне
) {
  змінна п: природне = 0;

  поки п < кількість {
    куди[п] = значення;

    п += 1;
  }
}

простір мавка {
  місцева дія записати_метод_структури_Число__чародія_число(М: адреса<Машина>);
  місцева дія записати_метод_структури_Число__чародія_текст(М: адреса<Машина>);

  місцева дія записати_дію_структури_Число__з(М: адреса<Машина>);

  місцева дія заповнити_структуру_Число(
    М: адреса<Машина>
  ) {
    М.предмет_структури_Число.заборонити_наслідування = так;

    записати_метод_структури_Число__чародія_число(М);
    записати_метод_структури_Число__чародія_текст(М);

    записати_дію_структури_Число__з(М);
  }

  місцева дія предмет_числа_додати(
    М: адреса<Машина>,
    значення: д64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЧисло {
      вернути ЧИСЛО(значення + право.дані як д64);
    }

    увімкнути_стан_падіння(
      М,
      ПРЕДМЕТ(створити_текст(М, "Додати до числа можна лише число.")),
      місцезнаходження
    );
    вернути НЕДІЙСНЕ();
  }

  місцева дія предмет_числа_відняти(
    М: адреса<Машина>,
    значення: д64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЧисло {
      вернути ЧИСЛО(значення - право.дані як д64);
    }

    увімкнути_стан_падіння(
      М,
      ПРЕДМЕТ(створити_текст(М, "Відняти від числа можна лише число.")),
      місцезнаходження
    );
    вернути НЕДІЙСНЕ();
  }

  місцева дія предмет_числа_помножити(
    М: адреса<Машина>,
    значення: д64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЧисло {
      вернути ЧИСЛО(значення * право.дані як д64);
    }

    увімкнути_стан_падіння(
      М,
      ПРЕДМЕТ(створити_текст(М, "Помножити число можна лише на число.")),
      місцезнаходження
    );
    вернути НЕДІЙСНЕ();
  }

  місцева дія предмет_числа_поділити(
    М: адреса<Машина>,
    значення: д64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЧисло {
      вернути ЧИСЛО(значення / право.дані як д64);
    }

    увімкнути_стан_падіння(
      М,
      ПРЕДМЕТ(створити_текст(М, "Поділити число можна лише на число.")),
      місцезнаходження
    );
    вернути НЕДІЙСНЕ();
  }

  місцева дія предмет_числа_остача(
    М: адреса<Машина>,
    значення: д64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЧисло {
      вернути ЧИСЛО(значення % право.дані як д64);
    }

    увімкнути_стан_падіння(
      М,
      ПРЕДМЕТ(створити_текст(М, "Отримати остачу ділення числа можна лише з числом.")),
      місцезнаходження
    );
    вернути НЕДІЙСНЕ();
  }

  місцева дія предмет_числа_степінь(
    М: адреса<Машина>,
    значення: д64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЧисло {
      вернути ЧИСЛО(піднести_до_степеня_д64(М, значення, право.дані як д64));
    }

    увімкнути_стан_падіння(
      М,
      ПРЕДМЕТ(створити_текст(М, "Отримати степінь числа можна лише з числом.")),
      місцезнаходження
    );
    вернути НЕДІЙСНЕ();
  }

  місцева дія предмет_числа_вліво(
    М: адреса<Машина>,
    значення: д64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЧисло {
      вернути ЧИСЛО(д64(ц32(значення) << ц32(право.дані як д64)));
    }

    увімкнути_стан_падіння(
      М,
      ПРЕДМЕТ(створити_текст(М, "Зсунути вліво число можна лише з числом.")),
      місцезнаходження
    );
    вернути НЕДІЙСНЕ();
  }

  місцева дія предмет_числа_вправо(
    М: адреса<Машина>,
    значення: д64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЧисло {
      вернути ЧИСЛО(д64(ц32(значення) >> ц32(право.дані як д64)));
    }

    увімкнути_стан_падіння(
      М,
      ПРЕДМЕТ(створити_текст(М, "Зсунути вправо число можна лише з числом.")),
      місцезнаходження
    );
    вернути НЕДІЙСНЕ();
  }

  місцева дія предмет_числа_двійкове_і(
    М: адреса<Машина>,
    значення: д64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЧисло {
      вернути ЧИСЛО(д64(ц32(значення) & ц32(право.дані як д64)));
    }

    увімкнути_стан_падіння(
      М,
      ПРЕДМЕТ(створити_текст(М, "Виконати двійкове І можна лише між цілими числами.")),
      місцезнаходження
    );
    вернути НЕДІЙСНЕ();
  }

  місцева дія предмет_числа_двійкове_або(
    М: адреса<Машина>,
    значення: д64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЧисло {
      вернути ЧИСЛО(д64(ц32(значення) | ц32(право.дані як д64)));
    }

    увімкнути_стан_падіння(
      М,
      ПРЕДМЕТ(створити_текст(М, "Виконати двійкове АБО можна лише між цілими числами.")),
      місцезнаходження
    );
    вернути НЕДІЙСНЕ();
  }

  місцева дія предмет_числа_двійкове_вабо(
    М: адреса<Машина>,
    значення: д64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЧисло {
      вернути ЧИСЛО(д64(ц32(значення) вабо ц32(право.дані як д64)));
    }

    увімкнути_стан_падіння(
      М,
      ПРЕДМЕТ(створити_текст(М, "Виконати двійкове ВАБО можна лише між цілими числами.")),
      місцезнаходження
    );
    вернути НЕДІЙСНЕ();
  }

  місцева дія предмет_числа_менше(
    М: адреса<Машина>,
    значення: д64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЧисло {
      вернути ЧИ(значення < право.дані як д64);
    }

    увімкнути_стан_падіння(
      М,
      ПРЕДМЕТ(створити_текст(М, "Виконати перевірку число менше можна з числом.")),
      місцезнаходження
    );
    вернути НЕДІЙСНЕ();
  }

  місцева дія предмет_числа_більше(
    М: адреса<Машина>,
    значення: д64,
    право: Значення,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    якщо право.вид == ЗЧисло {
      вернути ЧИ(значення > право.дані як д64);
    }

    увімкнути_стан_падіння(
      М,
      ПРЕДМЕТ(створити_текст(М, "Виконати перевірку число більше можна з числом.")),
      місцезнаходження
    );
    вернути НЕДІЙСНЕ();
  }

  місцева дія предмет_числа_двійкове_не(
    М: адреса<Машина>,
    значення: д64,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    вернути ЧИСЛО(д64(¬ц32(значення)));
  }

  місцева дія предмет_числа_змінити_знак(
    М: адреса<Машина>,
    значення: д64,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    вернути ЧИСЛО(-значення);
  }

  місцева дія предмет_числа_отримати_властивість(
    М: адреса<Машина>,
    значення: д64,
    назва: адреса<ПредметТексту>,
    місцезнаходження: Місцезнаходження
  ) -> ЗначенняАбоСтанПадіння {
    змінна предмет_методу = знайти_метод_в_структурі(
      М,
      М.предмет_структури_Число,
      назва
    );

    якщо предмет_методу == пусто {
      вернути НЕДІЙСНЕ();
    }

    вернути ПРЕДМЕТ(предмет_методу);
  }
}